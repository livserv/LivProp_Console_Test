import{j as e,r as d,R as v,f as I,c as oe,n as $e}from"./index-CrvO-MG2.js";import{F as De,u as Fe}from"./formik.esm-DIJ-rSp_.js";import{Y as V}from"./YesNoDropdown-ZzdgvHiK.js";import{B as O}from"./Button-DurNfux6.js";import{g as le,p as Ge,R as Ve}from"./ajax-LTZZf17G.js";import{P as Ke}from"./ProgressButton-Drm0khYL.js";import{a as k,b as q}from"./index-B8kw75Xj.js";import{d as ee,b as te,e as Qe}from"./bots-BxKmL1dA.js";import{a as ke,L as Me,J as He,M as ie,N as Ye,Q as Je,V as Xe,W as qe,C as et,K as tt}from"./KbDocsEditor-DV0oGJ2u.js";import{u as xe}from"./useSelectedBot-CMV0ja1Y.js";import{r as ot}from"./env-CBDBHzQq.js";import{a as he}from"./svg-icons-0YZuJKXB.js";import{P as rt}from"./PopUpDialog-Dw302yLV.js";import{u as st}from"./organization-KSWwvssM.js";import{P as at}from"./PageHeader-D-5Ai_TV.js";function nt({values:t,handleChange:o}){return e.jsxs("div",{className:"mb-4",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-thin text-primary mb-4",children:"Legal requirements"}),e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Chat Disclaimer"}),e.jsx("input",{type:"text",name:"chatDisclaimer",value:t.chatDisclaimer,onChange:o,maxLength:260,placeholder:"Provide the disclaimer to be shown in chat window",className:"border rounded-md h-12 w-full px-4"})]})}function lt({values:t,setFieldValue:o}){return e.jsxs("div",{className:"mb-4",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-thin text-primary mb-4",children:"Hide Livserv branding"}),e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Hide Livserv branding"}),e.jsx(V,{name:"hideLivservBranding",value:t.hideLivservBranding,onChange:(s,r)=>o(s,r),className:"border h-12 rounded-md w-full"})]})}const $=({name:t,value:o,onChange:s,onBlur:r,placeholder:l="#000000",className:a="",inputClassName:h="",colorInputClassName:m=""})=>e.jsxs("div",{className:`relative w-full ${a}`,children:[e.jsx("input",{type:"text",name:t,value:o,onChange:s,onBlur:r,className:`w-full border border-gray-300 rounded-md py-2 pl-3 pr-10 text-sm ${h}`,placeholder:l,autoComplete:"off"}),e.jsx("input",{type:"color",value:o,onChange:s,className:`absolute right-2 top-1/2 -translate-y-1/2 w-6 h-6 border-0 p-0 bg-transparent cursor-pointer ${m}`,tabIndex:-1,"aria-label":"Choose color"})]}),G=({error:t,children:o})=>t?e.jsx("div",{className:"text-red-500 text-xs",children:o}):null,it=v.forwardRef((t,o)=>e.jsx("input",{ref:o,...t,style:{clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1,...t.style||{}}}));function ye({imageUrl:t,imageName:o,maxImageSize:s=25e4,onChange:r,bgColor:l}){const[a,h]=d.useState(null),[m,u]=d.useState(t),p=v.useRef(null),i=l&&(m!=null&&m.endsWith(".png"))?l:"transparent",w=!!a,c=!w&&t,f=m?"Replace image":"Select image",n=g=>{try{const y=g.target.files[0];if(!y)return;const M=y.size;if(y.type.startsWith("image/")&&M<=s){h(y),u(URL.createObjectURL(y));const B=new FileReader;B.onloadend=()=>{u(B.result)},B.readAsDataURL(y),r==null||r(o,y)}else alert("Please upload valid image file and size is <= "+s/1e3+" kb"),h(null),g.target.value=""}catch(y){console.log("Error uploading the image ::",y),alert("Please select the image file"),g.target.value=""}},C=async()=>{try{await ee(o),r(o,null),u(null),h(null),I(!0,"Logo deleted successfully.","success")}catch(g){console.log("Deleting logo failed. Please try again later.",g)}},x=async()=>{try{const g=await te(o,a);r(o,g),h(null),I(!0,"Logo uploaded successfully.","success")}catch(g){console.log("File upload failed. Please try again later.",g)}};return e.jsxs("div",{className:"flex flex-col gap-3",children:[m&&e.jsx("div",{className:"h-20 w-20 flex items-center justify-center",children:e.jsx("img",{src:m,alt:"headerLogo",height:20,style:{backgroundColor:i}})}),e.jsxs("div",{className:"flex flex-row gap-2",children:[e.jsx(O,{label:f,type:"secondary",onClick:()=>p.current&&p.current.click()}),e.jsx(it,{ref:p,name:o,type:"file",onChange:n},a?a.name:""),c&&e.jsx(O,{label:"Delete",type:"secondary",onClick:C}),w&&e.jsx(Ke,{color:"primary",variant:"contained",onClick:x,ml:5,children:"Upload"})]}),a&&e.jsxs("div",{className:"text-xs",children:["File Name : ",a.name," "]})]})}function ct({values:t,touched:o,errors:s,handleBlur:r,setFieldValue:l}){var a,h;return e.jsxs("div",{className:"mb-8 border-y py-6",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-thin text-primary mb-4",children:"Message Bubble Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-2",children:"Show Message Bubble Logo"}),e.jsx(V,{name:"messageBubbleLogo",value:t.messageBubbleLogo,onChange:(m,u)=>l(m,u),className:"border h-12 rounded-md w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Font Size"}),e.jsx(k,{field:"fontSize",placeholder:"12px",value:t.fontSize,onChange:m=>l("fontSize",m),wrapperClassName:"border rounded-md h-12 w-full"})]})]}),e.jsx("div",{className:"text-xs uppercase tracking-wider mt-8 mb-2 text-purple-700 font-bold",children:"Visitor Bubble Settings"}),t.messageBubbleLogo&&e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Upload Visitor Logo"}),e.jsx(ye,{imageUrl:(a=t.visitorMessageLogo)==null?void 0:a.url,imageName:"visitorMessageLogo",maxImageSize:5e4,onChange:l})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Background Color"}),e.jsx($,{name:"visitorBackgroundColor",value:t.visitorBackgroundColor,onChange:m=>l("visitorBackgroundColor",m.target.value),onBlur:r,placeholder:"#ffffff",inputClassName:"h-12"}),e.jsx(G,{error:o.visitorBackgroundColor&&s.visitorBackgroundColor,children:s.visitorBackgroundColor})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Font Color"}),e.jsx($,{name:"visitorFontColor",value:t.visitorFontColor,onChange:m=>l("visitorFontColor",m.target.value),onBlur:r,placeholder:"#000000",inputClassName:"h-12"}),o.visitorFontColor&&s.visitorFontColor&&e.jsx("p",{className:"text-xs text-red-500",children:s.visitorFontColor})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Border Color"}),e.jsx($,{name:"visitorBorderColor",value:t.visitorBorderColor,onChange:m=>l("visitorBorderColor",m.target.value),onBlur:r,placeholder:"#000000",inputClassName:"h-12"}),e.jsx(G,{error:o.visitorBorderColor&&s.visitorBorderColor,children:s.visitorBorderColor})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Border Radius"}),e.jsx(k,{field:"visitorBubbleBorderCurve",placeholder:"border: 1px 2px 3px 4px",value:t.visitorBubbleBorderCurve,onChange:m=>l("visitorBubbleBorderCurve",m),wrapperClassName:"border rounded-md h-12 w-full"}),e.jsx(G,{error:o.visitorBubbleBorderCurve&&s.visitorBubbleBorderCurve,children:s.visitorBubbleBorderCurve})]})]}),e.jsx("div",{className:"text-xs uppercase tracking-wider mt-8 mb-2 text-purple-700 font-bold",children:"Bot Bubble Settings"}),t.messageBubbleLogo&&e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Upload Bot Logo"}),e.jsx(ye,{imageUrl:(h=t.botMessageLogo)==null?void 0:h.url,imageName:"botMessageLogo",maxImageSize:5e4,onChange:l})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Background Color"}),e.jsx($,{name:"botBackgroundColor",value:t.botBackgroundColor,onChange:m=>l("botBackgroundColor",m.target.value),onBlur:r,placeholder:"#ffffff",inputClassName:"h-12"}),e.jsx(G,{error:o.botBackgroundColor&&s.botBackgroundColor,children:s.botBackgroundColor})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Font Color"}),e.jsx($,{name:"botFontColor",value:t.botFontColor,onChange:m=>l("botFontColor",m.target.value),onBlur:r,placeholder:"#000000",inputClassName:"h-12"}),e.jsx(G,{error:o.botFontColor&&s.botFontColor,children:s.botFontColor})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Border Color"}),e.jsx($,{name:"botBorderColor",value:t.botBorderColor,onChange:m=>l("botBorderColor",m.target.value),onBlur:r,placeholder:"#000000",inputClassName:"h-12"}),e.jsx(G,{error:o.botBorderColor&&s.botBorderColor,children:s.botBorderColor})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Border Radius"}),e.jsx(k,{field:"botBubbleBorderCurve",placeholder:"border: 1px 2px 3px 4px",value:t.botBubbleBorderCurve,onChange:m=>l("botBubbleBorderCurve",m),wrapperClassName:"border rounded-md h-12 w-full"}),e.jsx(G,{error:o.botBubbleBorderCurve&&s.botBubbleBorderCurve,children:s.botBubbleBorderCurve})]})]})]})}function dt(t){const o=oe(s=>s.isSuperUser);return e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"mt-8 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 gap-6 sm:gap-8 lg:gap-12",children:[e.jsx(nt,{...t}),o&&e.jsx(lt,{...t})]}),e.jsx(ct,{...t})]})}const ne=t=>d.createElement("svg",{width:36,height:30,viewBox:"0 0 36 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},d.createElement("g",{filter:"url(#filter0_d_1_106)"},d.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24.3998 8.35993C24.3998 12.8311 19.856 16.5196 14.2 16.5196C13.4532 16.5196 12.7088 16.4548 11.9815 16.3252C11.0197 18.5199 9.49338 19.7919 7.53245 20.3414C7.32845 20.399 7.11108 20.3186 6.99451 20.1434C6.87794 19.9682 6.89008 19.7379 7.02365 19.5758C8.05943 18.3195 8.49053 16.7991 8.18695 14.9535C5.54708 13.4151 4 10.9612 4 8.35961C4 3.88842 8.54381 0.199951 14.1999 0.199951C19.8559 0.199951 24.3997 3.88872 24.3997 8.35961L24.3998 8.35993ZM8.85692 6.2C7.78471 6.2 6.91406 7.06038 6.91406 8.11995C6.91406 9.17952 7.78471 10.0399 8.85692 10.0399C9.92914 10.0399 10.7998 9.17952 10.7998 8.11995C10.7998 7.06038 9.92914 6.2 8.85692 6.2ZM8.85692 7.15997C9.39365 7.15997 9.82836 7.58955 9.82836 8.11995C9.82836 8.65035 9.39365 9.07993 8.85692 9.07993C8.3202 9.07993 7.88549 8.65035 7.88549 8.11995C7.88549 7.58955 8.3202 7.15997 8.85692 7.15997ZM14.2 6.2C13.1277 6.2 12.2571 7.06038 12.2571 8.11995C12.2571 9.17952 13.1277 10.0399 14.2 10.0399C15.2722 10.0399 16.1428 9.17952 16.1428 8.11995C16.1428 7.06038 15.2722 6.2 14.2 6.2ZM14.2 7.15997C14.7367 7.15997 15.1714 7.58955 15.1714 8.11995C15.1714 8.65035 14.7367 9.07993 14.2 9.07993C13.6632 9.07993 13.2285 8.65035 13.2285 8.11995C13.2285 7.58955 13.6632 7.15997 14.2 7.15997ZM19.543 6.2C18.4708 6.2 17.6001 7.06038 17.6001 8.11995C17.6001 9.17952 18.4708 10.0399 19.543 10.0399C20.6152 10.0399 21.4858 9.17952 21.4858 8.11995C21.4858 7.06038 20.6152 6.2 19.543 6.2ZM19.543 7.15997C20.0797 7.15997 20.5144 7.58955 20.5144 8.11995C20.5144 8.65035 20.0797 9.07993 19.543 9.07993C19.0063 9.07993 18.5715 8.65035 18.5715 8.11995C18.5715 7.58955 19.0063 7.15997 19.543 7.15997ZM20.9054 1.64002H21.0001C26.6562 1.64002 31.2 5.3288 31.2 9.79968C31.2 12.4012 29.653 14.8552 27.0131 16.3948C26.7095 18.2392 27.1406 19.7595 28.1763 21.0159C28.3099 21.1779 28.3221 21.4083 28.2055 21.5835C28.0889 21.7587 27.8716 21.8391 27.6675 21.7815C25.7065 21.2319 24.18 19.9599 23.2185 17.7653C22.4912 17.8949 21.7468 17.9597 21 17.9597C19.1568 17.9597 17.4323 17.5685 15.9436 16.8857C21.0498 16.2053 24.8858 12.5945 24.8858 8.35985C24.8858 5.67191 23.3401 3.23589 20.9054 1.64002Z",fill:"#6D8994"})),d.createElement("defs",null,d.createElement("filter",{id:"filter0_d_1_106",x:0,y:.199951,width:35.2,height:29.6,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},d.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),d.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),d.createElement("feOffset",{dy:4}),d.createElement("feGaussianBlur",{stdDeviation:2}),d.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),d.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),d.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_1_106"}),d.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_1_106",result:"shape"})))),mt=({values:t,setFieldValue:o,activeIndex:s})=>{const r=a=>t.launcherType===a,l=oe(a=>a.isSuperUser);return e.jsxs("div",{className:"mt-12 border-b py-4",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-thin text-primary mb-4",children:"Choose Type"}),e.jsxs("div",{className:"mb-12",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-3 sm:gap-4",children:[e.jsx(O,{icon:e.jsx(ne,{className:"w-6 h-6 sm:w-8 sm:h-8"}),type:"rounded",onClick:()=>o("launcherType","icon"),className:`border rounded-full w-12 h-12 sm:w-16 sm:h-16 flex items-center justify-center
                            ${r("icon")?"border-blue-500 ring-2 ring-blue-200":"border-gray-300 hover:bg-gray-100"}`}),e.jsxs("div",{className:`flex items-center w-36 sm:w-48 bg-gray-200 rounded-full shadow-md cursor-pointer
                            ${r("bar")?"border-blue-500 ring-2 ring-blue-200":"border-gray-300 hover:bg-gray-100"}`,onClick:()=>o("launcherType","bar"),children:[e.jsx("div",{className:"bg-white w-10 h-10 sm:w-16 sm:h-16 flex items-center justify-center rounded-full",children:e.jsx(ne,{className:"w-6 h-6 sm:w-8 sm:h-8"})}),e.jsx("span",{className:"ml-2 sm:ml-4 text-gray-600 font-medium text-xs sm:text-base",children:"Live Chat"})]}),e.jsxs("div",{className:`flex items-center justify-end w-36 sm:w-48 bg-gray-200 rounded-full shadow-md cursor-pointer
                            ${r("expand")?"border-blue-500 ring-2 ring-blue-200":"border-gray-300 hover:bg-gray-100"}`,onClick:()=>o("launcherType","expand"),children:[e.jsx("span",{className:"mr-2 sm:mr-4 text-gray-600 font-medium text-xs sm:text-base",children:"Live Chat"}),e.jsx("div",{className:"bg-white w-10 h-10 sm:w-16 sm:h-16 flex items-center justify-center rounded-full",children:e.jsx(ne,{className:"w-6 h-6 sm:w-8 sm:h-8"})})]})]}),!s&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-2 gap-6 lg:gap-12",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Spacing on corner"}),e.jsx(k,{field:"launcherSpacingCorner",placeholder:"0px",onChange:a=>o("launcherSpacingCorner",a),value:t.launcherSpacingCorner,wrapperClassName:"border rounded-md h-12 w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Spacing on Bottom "}),e.jsx(k,{field:"launcherSpacingBottom",placeholder:"0px",onChange:a=>o("launcherSpacingBottom",a),value:t.launcherSpacingBottom,wrapperClassName:"border rounded-md h-12 w-full"})]})]}),e.jsxs("div",{className:"mt-8 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8 lg:gap-12",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Button on Mobile"}),e.jsx(V,{name:"buttonOnMobile",value:t.buttonOnMobile,onChange:(a,h)=>o(a,h),className:"border h-12 rounded-md w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Show We are online bubble"}),e.jsx(V,{name:"showMinimizeButtonToolTip",value:t.showMinimizeButtonToolTip,onChange:(a,h)=>o(a,h),className:"border h-12 rounded-md w-full"})]}),l&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Activate Voice Bot"}),e.jsx(V,{name:"activateVoiceBot",value:t.activateVoiceBot,onChange:(a,h)=>o(a,h),className:"border h-12 rounded-md w-full"})]})]})]})]})]})},gt=[{value:"regular",label:"Regular"},{value:"remote",label:"Remote"}];function ht({values:t,touched:o,errors:s,handleBlur:r,setFieldValue:l}){return e.jsxs("div",{className:"mb-8 border-y",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-thin text-primary mb-4",children:"Composer Settings"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6 sm:gap-8 mb-4",children:[e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Placeholder Text *"}),e.jsx(k,{field:"placeholder",placeholder:"Type your message...",maxLength:50,onBlur:r,onChange:a=>l&&l("placeholder",a),value:t.placeholder,wrapperClassName:"border rounded-md h-12 w-full"}),o.placeholder&&s.placeholder&&e.jsx("div",{className:"text-red-500 text-xs",children:s.placeholder})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Font source"}),e.jsx("div",{className:"flex flex-row space-x-4",children:gt.map(a=>e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"fontType",value:a.value,checked:t.fontType===a.value,onChange:h=>l&&l("fontType",h.target.value),className:"mr-2"}),a.label]},a.value))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6 sm:gap-8 mb-4",children:[e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Font name"}),e.jsx(k,{field:"fontName",placeholder:"Provide Font Name",onChange:a=>l&&l("fontName",a),value:t.fontName,wrapperClassName:"border rounded-md h-12 w-full"})]}),t.fontType==="remote"&&e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Paste Remote Font Link"}),e.jsx(k,{field:"remoteFontLink",placeholder:"Ex: https://fonts.googleapis.com",onChange:a=>l&&l("remoteFontLink",a),value:t.remoteFontLink,wrapperClassName:"border rounded-md h-12 w-full"})]})]})]})}const ut=({values:t,setFieldValue:o,activeIndex:s})=>{const r=[{value:"bottomRight",label:"Bottom Right"},{value:"bottomLeft",label:"Bottom Left"}],l=[{value:"sm",label:"Small"},{value:"md",label:"Medium"},{value:"lg",label:"Large"}],a={sm:{width:"300px",height:"400px"},md:{width:"380px",height:"500px"},lg:{width:"420px",height:"600px"}},h={sm:{width:"200px",height:"300px"},md:{width:"280px",height:"400px"},lg:{width:"320px",height:"450px"}},u=[{code:"en",name:"English",native:"English"},{code:"ar",name:"Arabic",native:"العربية"},{code:"af",name:"Afrikaans",native:"Afrikaans"},{code:"ml",name:"Malayalam",native:"മലയാളം"},{code:"kn",name:"Kannada",native:"ಕನ್ನಡ"},{code:"ta",name:"Tamil",native:"தமிழ்"},{code:"gu",name:"Gujarati",native:"Gujarati"},{code:"ig",name:"Igbo",native:"Igbo"},{code:"yo",name:"Yoruba",native:"Yoruba"}].map(i=>({label:`${i.name}`,value:i.code,full:i})),p=(i,w,c)=>{let f,n;const C=c==="chatWindow"?a:h;C[i]&&(f=C[i].width,n=C[i].height),w(c==="chatWindow"?"dimension":"mobileDimension",i),w(`${c}Width`,f),w(`${c}Height`,n)};return e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-thin text-primary mb-4",children:" Choose Position And Size"}),e.jsxs("div",{className:`grid grid-cols-1 sm:grid-cols-2  gap-2 sm:gap-4 lg:gap-8 mb-4 ${s?" lg:grid-cols-3":"lg:grid-cols-4"}`,children:[s?e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:" Dimension (Desktop)"}),e.jsx(q,{field:"dimension",options:l,onChange:i=>p(i,o,"chatWindow"),showClear:!1,value:t.dimension||"",className:"border rounded-md h-12 w-full"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Chat Window Width"}),e.jsx(k,{field:"chatWindowWidth",placeholder:"380px",onChange:i=>o("chatWindowWidth",i),value:t.chatWindowWidth,wrapperClassName:"border rounded-md h-12 w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Chat Window Height"}),e.jsx(k,{field:"chatWindowHeight",placeholder:"500px",onChange:i=>o("chatWindowHeight",i),value:t.chatWindowHeight,wrapperClassName:"border rounded-md h-12 w-full"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Spacing on corner"}),e.jsx(k,{field:"paddingLeft",placeholder:"0px",onChange:i=>o("paddingLeft",i),value:t.paddingLeft,wrapperClassName:"border rounded-md h-12 w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Spacing on Bottom"}),e.jsx(k,{field:"paddingBottom",placeholder:"0px",onChange:i=>o("paddingBottom",i),value:t.paddingBottom,wrapperClassName:"border rounded-md h-12 w-full"})]})]}),e.jsxs("div",{className:`grid grid-cols-1 sm:grid-cols-2  gap-2 sm:gap-4 lg:gap-8 mb-4 ${s?" lg:grid-cols-3":"lg:grid-cols-4"}`,children:[!s&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Mobile Chat Window Width"}),e.jsx(k,{field:"mobileChatWindowWidth",placeholder:"380px",onChange:i=>o("mobileChatWindowWidth",i),value:t.mobileChatWindowWidth,wrapperClassName:"border rounded-md h-12 w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Mobile Chat Window Height"}),e.jsx(k,{field:"mobileChatWindowHeight",placeholder:"500px",onChange:i=>o("mobileChatWindowHeight",i),value:t.mobileChatWindowHeight,wrapperClassName:"border rounded-md h-12 w-full"})]})]}),!s&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Desktop proactive window"}),e.jsx(V,{name:"autoLaunch",value:t.autoLaunch,onChange:(i,w)=>o(i,w),className:"border h-12 rounded-md w-full"})]}),!s&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Mobile proactive window"}),e.jsx(V,{name:"mobileAutoLaunch",value:t.mobileAutoLaunch,onChange:(i,w)=>o(i,w),className:"border h-12 rounded-md w-full"})]})]}),e.jsxs("div",{className:"mt-8 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 sm:gap-8 lg:gap-12",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:" Enable Multilingual Support?"}),e.jsxs("div",{className:"flex flex-row items-center space-x-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"multiLanguageChat",value:"true",checked:t.multiLanguageChat===!0,onChange:()=>o("multiLanguageChat",!0),className:"mr-2"})," ","Yes"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"multiLanguageChat",value:"false",checked:t.multiLanguageChat===!1,onChange:()=>o("multiLanguageChat",!1),className:"mr-2"})," ","No"]})]})]}),t.multiLanguageChat&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Choose Language"}),e.jsx(q,{field:"translateLanguages",options:u,onChange:i=>{const w=u.filter(c=>i.includes(c.value)).map(c=>c.full);o("translateLanguages",w)},showClear:!1,value:(t.translateLanguages||[]).map(i=>i.code),className:"border rounded-md w-full h-12",multiple:!0})]}),!s&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Select default languages"}),e.jsx(q,{field:"defaultLanguage",options:u,onChange:i=>{const w=u.filter(c=>i.includes(c.value)).map(c=>c.full);o("defaultLanguage",w)},disabled:!t.multiLanguageChat||t.multiLanguageChat==="No",showClear:!1,value:(t.defaultLanguage||[]).map(i=>i.code),className:"border h-12 rounded-md w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:" Position"}),e.jsx(q,{field:"windowAlign",options:r,onChange:i=>o("windowAlign",i),showClear:!1,value:t.windowAlign||"",className:"border rounded-md h-12 w-full"})]}),s&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:" Dimension (Mobile)"}),e.jsx(q,{field:"mobileDimension",options:l,onChange:i=>p(i,o,"mobileChatWindow"),showClear:!1,value:t.mobileDimension||"",className:"border rounded-md h-12 w-full"})]})]})]})};function pt({values:t,setFieldValue:o}){return e.jsxs("div",{className:"mb-8  border-y",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-thin text-primary mb-4",children:"Choose Position And Size"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8 lg:gap-12 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Background Color *"}),e.jsx($,{name:"bgColor",value:t.bgColor,onChange:s=>o("bgColor",s.target.value),placeholder:"#000000",inputClassName:"h-12"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Font Color *"}),e.jsx($,{name:"fontColor",value:t.fontColor,onChange:s=>o("fontColor",s.target.value),placeholder:"#000000",inputClassName:"h-12"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Font Size"}),e.jsx(k,{field:"headerFontSize",placeholder:"16px",onChange:s=>o("headerFontSize",s),value:t.headerFontSize,wrapperClassName:"border rounded-md h-12 w-full"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8 lg:gap-12 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Chat Window Title *"}),e.jsx(k,{field:"titleText",placeholder:"Provide your chat window title",onChange:s=>o("titleText",s),value:t.titleText,wrapperClassName:"border rounded-md h-12 w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Chat Window Header Padding"}),e.jsx(k,{field:"headerPadding",placeholder:"padding: 2px 5px 2px 5px",onChange:s=>o("headerPadding",s),value:t.headerPadding,wrapperClassName:"border rounded-md h-12 w-full"})]})]})]})}const xt=t=>d.createElement("svg",{width:40,height:12,viewBox:"0 0 40 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},d.createElement("path",{d:"M6.02344 5.67188V0.363281H7.85742V5.67188C7.85742 6.58984 7.71484 7.30469 7.42969 7.81641C6.89844 8.75391 5.88477 9.22266 4.38867 9.22266C2.89258 9.22266 1.87695 8.75391 1.3418 7.81641C1.05664 7.30469 0.914062 6.58984 0.914062 5.67188V0.363281H2.74805V5.67188C2.74805 6.26562 2.81836 6.69922 2.95898 6.97266C3.17773 7.45703 3.6543 7.69922 4.38867 7.69922C5.11914 7.69922 5.59375 7.45703 5.8125 6.97266C5.95312 6.69922 6.02344 6.26562 6.02344 5.67188ZM14.8008 3.29883C15.3164 3.84961 15.5742 4.6582 15.5742 5.72461C15.5742 6.84961 15.3203 7.70703 14.8125 8.29688C14.3086 8.88672 13.6582 9.18164 12.8613 9.18164C12.3535 9.18164 11.9316 9.05469 11.5957 8.80078C11.4121 8.66016 11.2324 8.45508 11.0566 8.18555V11.5137H9.4043V2.61328H11.0039V3.55664C11.1836 3.2793 11.375 3.06055 11.5781 2.90039C11.9492 2.61523 12.3906 2.47266 12.9023 2.47266C13.6484 2.47266 14.2812 2.74805 14.8008 3.29883ZM13.8516 5.80664C13.8516 5.31445 13.7383 4.87891 13.5117 4.5C13.2891 4.12109 12.9258 3.93164 12.4219 3.93164C11.8164 3.93164 11.4004 4.21875 11.1738 4.79297C11.0566 5.09766 10.998 5.48438 10.998 5.95312C10.998 6.69531 11.1953 7.2168 11.5898 7.51758C11.8242 7.69336 12.1016 7.78125 12.4219 7.78125C12.8867 7.78125 13.2402 7.60156 13.4824 7.24219C13.7285 6.88281 13.8516 6.4043 13.8516 5.80664ZM16.8223 0.363281H18.4922V9H16.8223V0.363281ZM25.4531 3.42188C25.9922 4.09766 26.2617 4.89648 26.2617 5.81836C26.2617 6.75586 25.9922 7.55859 25.4531 8.22656C24.9141 8.89062 24.0957 9.22266 22.998 9.22266C21.9004 9.22266 21.082 8.89062 20.543 8.22656C20.0039 7.55859 19.7344 6.75586 19.7344 5.81836C19.7344 4.89648 20.0039 4.09766 20.543 3.42188C21.082 2.74609 21.9004 2.4082 22.998 2.4082C24.0957 2.4082 24.9141 2.74609 25.4531 3.42188ZM22.9922 3.82031C22.5039 3.82031 22.127 3.99414 21.8613 4.3418C21.5996 4.68555 21.4688 5.17773 21.4688 5.81836C21.4688 6.45898 21.5996 6.95312 21.8613 7.30078C22.127 7.64844 22.5039 7.82227 22.9922 7.82227C23.4805 7.82227 23.8555 7.64844 24.1172 7.30078C24.3789 6.95312 24.5098 6.45898 24.5098 5.81836C24.5098 5.17773 24.3789 4.68555 24.1172 4.3418C23.8555 3.99414 23.4805 3.82031 22.9922 3.82031ZM27.7031 3.30469C28.1445 2.74219 28.9023 2.46094 29.9766 2.46094C30.6758 2.46094 31.2969 2.59961 31.8398 2.87695C32.3828 3.1543 32.6543 3.67773 32.6543 4.44727V7.37695C32.6543 7.58008 32.6582 7.82617 32.666 8.11523C32.6777 8.33398 32.7109 8.48242 32.7656 8.56055C32.8203 8.63867 32.9023 8.70312 33.0117 8.75391V9H31.1953C31.1445 8.87109 31.1094 8.75 31.0898 8.63672C31.0703 8.52344 31.0547 8.39453 31.043 8.25C30.8125 8.5 30.5469 8.71289 30.2461 8.88867C29.8867 9.0957 29.4805 9.19922 29.0273 9.19922C28.4492 9.19922 27.9707 9.03516 27.5918 8.70703C27.2168 8.375 27.0293 7.90625 27.0293 7.30078C27.0293 6.51562 27.332 5.94727 27.9375 5.5957C28.2695 5.4043 28.7578 5.26758 29.4023 5.18555L29.9707 5.11523C30.2793 5.07617 30.5 5.02734 30.6328 4.96875C30.8711 4.86719 30.9902 4.70898 30.9902 4.49414C30.9902 4.23242 30.8984 4.05273 30.7148 3.95508C30.5352 3.85352 30.2695 3.80273 29.918 3.80273C29.5234 3.80273 29.2441 3.90039 29.0801 4.0957C28.9629 4.24023 28.8848 4.43555 28.8457 4.68164H27.2344C27.2695 4.12305 27.4258 3.66406 27.7031 3.30469ZM28.9453 7.79297C29.1016 7.92188 29.293 7.98633 29.5195 7.98633C29.8789 7.98633 30.209 7.88086 30.5098 7.66992C30.8145 7.45898 30.9727 7.07422 30.9844 6.51562V5.89453C30.8789 5.96094 30.7715 6.01562 30.6621 6.05859C30.5566 6.09766 30.4102 6.13477 30.2227 6.16992L29.8477 6.24023C29.4961 6.30273 29.2441 6.37891 29.0918 6.46875C28.834 6.62109 28.7051 6.85742 28.7051 7.17773C28.7051 7.46289 28.7852 7.66797 28.9453 7.79297ZM39.9551 0.375V9H38.332V8.11523C38.0938 8.49414 37.8223 8.76953 37.5176 8.94141C37.2129 9.11328 36.834 9.19922 36.3809 9.19922C35.6348 9.19922 35.0059 8.89844 34.4941 8.29688C33.9863 7.69141 33.7324 6.91602 33.7324 5.9707C33.7324 4.88086 33.9824 4.02344 34.4824 3.39844C34.9863 2.77344 35.6582 2.46094 36.498 2.46094C36.8848 2.46094 37.2285 2.54688 37.5293 2.71875C37.8301 2.88672 38.0742 3.12109 38.2617 3.42188V0.375H39.9551ZM35.4551 5.84766C35.4551 6.4375 35.5723 6.9082 35.8066 7.25977C36.0371 7.61523 36.3887 7.79297 36.8613 7.79297C37.334 7.79297 37.6934 7.61719 37.9395 7.26562C38.1855 6.91406 38.3086 6.45898 38.3086 5.90039C38.3086 5.11914 38.1113 4.56055 37.7168 4.22461C37.4746 4.02148 37.1934 3.91992 36.873 3.91992C36.3848 3.91992 36.0254 4.10547 35.7949 4.47656C35.5684 4.84375 35.4551 5.30078 35.4551 5.84766Z",fill:"#0074A0"})),Ne=({imageUrl:t,imageName:o,maxImageSize:s=25e4,onChange:r,bgColor:l,variant:a="rounded",className:h="",showButtons:m=!0,showFileName:u=!0,onFileSelect:p,displayImage:i,autoUpload:w=!1})=>{const[c,f]=d.useState(null),[n,C]=d.useState(i||t||null),x=d.useRef(null),g=i!==void 0?i:n,y=l&&g!=null&&g.endsWith(".png")?l:"transparent",M=async S=>{var _;try{const E=(_=S.target.files)==null?void 0:_[0];if(!E)return;const me=E.size;if(E.type.startsWith("image/")&&me<=s)if(f(E),i===void 0&&C(URL.createObjectURL(E)),p==null||p(E),w)await P(E);else{const K=new FileReader;K.onloadend=()=>{i===void 0&&C(K.result)},K.readAsDataURL(E)}else I(!0,`Please upload valid image file and size is <= ${s/1e3} kb`,"error"),f(null),p==null||p(null),S.target.value=""}catch(E){console.log("Error uploading the image ::",E),I(!0,"Please select the image file","error"),p==null||p(null),S.target.value=""}},B=async()=>{try{ee&&await ee(o),r(o,null),i===void 0&&C(null),f(null),p(null),I(!0,"Logo deleted successfully.","success")}catch(S){console.log("Deleting logo failed. Please try again later.",S),I(!0,"Deleting logo failed. Please try again later.","error")}},P=async S=>{try{const _=S||c;if(!_)return;let E=_;te&&(E=await te(o,_)),r(o,E),f(null),I(!0,"Logo uploaded successfully.","success")}catch(_){console.log("File upload failed. Please try again later.",_),I(!0,"File upload failed. Please try again later.","error")}},U=()=>{var S;(S=x.current)==null||S.click()},H=S=>{S.stopPropagation(),B()},W=()=>{f(null),i===void 0&&C(t||null),p==null||p(null)},D=()=>{const S="border border-gray-300 hover:bg-gray-100 p-4 flex items-center justify-center cursor-pointer relative";return a==="rounded"?`${S} rounded-full w-12 h-12 sm:w-16 sm:h-16`:`${S} rounded-lg w-24 h-24`},ce=()=>a==="rounded"?"w-full h-full object-cover rounded-full":"w-full h-full object-cover rounded",de=()=>a==="rounded"?"w-6 h-6 sm:w-8 sm:h-8 text-gray-500":"w-8 h-8 text-gray-500";return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative inline-block",children:[e.jsxs("div",{className:`${D()} ${h}`,onClick:U,children:[g?e.jsx("img",{src:g,alt:"Upload Preview",className:ce(),style:{backgroundColor:y}}):e.jsx(xt,{className:de()}),g&&e.jsx("button",{onClick:H,className:"absolute -top-2 -right-2 bg-red-500 hover:bg-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm",type:"button",children:"×"})]}),e.jsx("input",{ref:x,type:"file",accept:"image/*",style:{display:"none"},onChange:M})]}),m&&c&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(O,{label:"Upload",type:"primary",onClick:()=>P()}),e.jsx(O,{label:"Delete",type:"secondary",onClick:W})]}),u&&c&&e.jsxs("div",{className:"text-xs text-gray-600",children:["File Name: ",c.name]})]})},Ct=t=>d.createElement("svg",{width:31,height:36,viewBox:"0 0 31 36",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},d.createElement("g",{filter:"url(#filter0_d_1_105)"},d.createElement("path",{d:"M23.4002 5.60005H16.2002V3.75483C16.4405 3.61881 16.6408 3.42208 16.7812 3.18433C16.9216 2.94658 16.9971 2.67614 17.0002 2.40005C17.0002 1.9757 16.8316 1.56874 16.5316 1.26868C16.2315 0.96862 15.8245 0.800049 15.4002 0.800049C14.9758 0.800049 14.5689 0.96862 14.2688 1.26868C13.9688 1.56874 13.8002 1.9757 13.8002 2.40005C13.8033 2.67614 13.8788 2.94658 14.0192 3.18433C14.1596 3.42208 14.3599 3.61881 14.6002 3.75483V5.60005H7.4002C6.5518 5.60102 5.73843 5.93847 5.13852 6.53838C4.53862 7.13828 4.20117 7.95165 4.2002 8.80005V20C4.20117 20.8484 4.53862 21.6618 5.13852 22.2617C5.73843 22.8616 6.5518 23.1991 7.4002 23.2H9.0002V27.2C9.00024 27.3582 9.04717 27.5129 9.13504 27.6444C9.22292 27.776 9.34781 27.8785 9.49394 27.9391C9.59096 27.9796 9.69507 28.0003 9.8002 28C9.90525 28 10.0093 27.9793 10.1063 27.9391C10.2034 27.8989 10.2916 27.84 10.3658 27.7657L14.9314 23.2H23.4002C24.2486 23.1991 25.062 22.8616 25.6619 22.2617C26.2618 21.6618 26.5992 20.8484 26.6002 20V8.80005C26.5992 7.95165 26.2618 7.13828 25.6619 6.53838C25.062 5.93847 24.2486 5.60102 23.4002 5.60005ZM9.0002 13.6C9.0002 13.2836 9.09403 12.9743 9.26984 12.7111C9.44565 12.448 9.69554 12.2429 9.9879 12.1218C10.2803 12.0007 10.602 11.9691 10.9123 12.0308C11.2227 12.0925 11.5078 12.2449 11.7316 12.4687C11.9553 12.6924 12.1077 12.9775 12.1695 13.2879C12.2312 13.5983 12.1995 13.92 12.0784 14.2123C11.9573 14.5047 11.7522 14.7546 11.4891 14.9304C11.226 15.1062 10.9166 15.2 10.6002 15.2C10.1758 15.2 9.76888 15.0315 9.46882 14.7314C9.16877 14.4314 9.0002 14.0244 9.0002 13.6ZM19.8111 18.2633C18.4799 19.0663 16.9548 19.4907 15.4002 19.4907C13.8456 19.4907 12.3204 19.0663 10.9893 18.2633C10.8989 18.2095 10.8202 18.1383 10.7574 18.054C10.6946 17.9697 10.6491 17.8738 10.6234 17.7718C10.5977 17.6698 10.5924 17.5638 10.6078 17.4598C10.6231 17.3558 10.6588 17.2558 10.7129 17.1656C10.7669 17.0754 10.8382 16.9968 10.9227 16.9342C11.0071 16.8716 11.1031 16.8262 11.2051 16.8008C11.3072 16.7753 11.4132 16.7702 11.5172 16.7858C11.6212 16.8013 11.7211 16.8372 11.8111 16.8915C12.8982 17.5336 14.1376 17.8723 15.4002 17.8723C16.6628 17.8723 17.9022 17.5336 18.9893 16.8915C19.0793 16.8372 19.1792 16.8013 19.2832 16.7858C19.3872 16.7702 19.4932 16.7753 19.5952 16.8008C19.6973 16.8262 19.7932 16.8716 19.8777 16.9342C19.9622 16.9968 20.0335 17.0754 20.0875 17.1656C20.1415 17.2558 20.1773 17.3558 20.1926 17.4598C20.208 17.5638 20.2027 17.6698 20.177 17.7718C20.1513 17.8738 20.1058 17.9697 20.043 18.054C19.9802 18.1383 19.9014 18.2095 19.8111 18.2633ZM20.2002 15.2C19.8837 15.2 19.5744 15.1062 19.3113 14.9304C19.0482 14.7546 18.8431 14.5047 18.722 14.2123C18.6009 13.92 18.5692 13.5983 18.6309 13.2879C18.6927 12.9775 18.8451 12.6924 19.0688 12.4687C19.2926 12.2449 19.5777 12.0925 19.8881 12.0308C20.1984 11.9691 20.5201 12.0007 20.8125 12.1218C21.1049 12.2429 21.3547 12.448 21.5305 12.7111C21.7064 12.9743 21.8002 13.2836 21.8002 13.6C21.8002 14.0244 21.6316 14.4314 21.3316 14.7314C21.0315 15.0315 20.6245 15.2 20.2002 15.2Z",fill:"#6D8994"})),d.createElement("defs",null,d.createElement("filter",{id:"filter0_d_1_105",x:.200195,y:.800049,width:30.4,height:35.2,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},d.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),d.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),d.createElement("feOffset",{dy:4}),d.createElement("feGaussianBlur",{stdDeviation:2}),d.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),d.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),d.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_1_105"}),d.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_1_105",result:"shape"})))),ft=t=>d.createElement("svg",{width:26,height:26,viewBox:"0 0 26 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},d.createElement("path",{d:"M14.1149 0.600098H7.59129C6.83563 0.600098 6.21922 1.21768 6.21922 1.9721V9.41213L8.27066 7.80037H14.1151C14.8695 7.80037 15.4871 7.18279 15.4871 6.42837V1.97334C15.4871 1.21892 14.8695 0.601338 14.1151 0.601338L14.1149 0.600098ZM8.44135 2.28331H11.5112C11.7328 2.28331 11.9109 2.46253 11.9109 2.68293C11.9109 2.90334 11.7316 3.08256 11.5112 3.08256H8.44135C8.21974 3.08256 8.04171 2.90334 8.04171 2.68293C8.04171 2.46253 8.22094 2.28331 8.44135 2.28331ZM13.2636 6.11709H8.44011C8.2185 6.11709 8.04047 5.93788 8.04047 5.71747C8.04047 5.49708 8.2197 5.31785 8.44011 5.31785H13.2636C13.4853 5.31785 13.6633 5.49707 13.6633 5.71747C13.6633 5.93786 13.4841 6.11709 13.2636 6.11709ZM13.2636 4.59979H8.44011C8.2185 4.59979 8.04047 4.42058 8.04047 4.20017C8.04047 3.97978 8.2197 3.80055 8.44011 3.80055H13.2636C13.4853 3.80055 13.6633 3.97977 13.6633 4.20017C13.6633 4.42056 13.4841 4.59979 13.2636 4.59979ZM13.2636 3.08249H12.9233C12.7017 3.08249 12.5237 2.90328 12.5237 2.68287C12.5237 2.46247 12.7029 2.28325 12.9233 2.28325H13.2636C13.4853 2.28325 13.6633 2.46247 13.6633 2.68287C13.6633 2.90328 13.4841 3.08249 13.2636 3.08249ZM11.8649 21.0963V25.4001H9.67546V21.7309C9.67546 21.5093 9.49623 21.3313 9.27582 21.3313C9.05542 21.3313 8.87618 21.5105 8.87618 21.7309V25.4001H3.58886V21.7309C3.58886 21.5093 3.40964 21.3313 3.18922 21.3313C2.96882 21.3313 2.78958 21.5105 2.78958 21.7309V25.4001H0.600098V21.0963C0.600098 19.4277 2.07025 18.0629 3.86611 18.0629H8.60005C10.3972 18.0629 11.8661 19.4276 11.8661 21.0963H11.8649ZM6.23258 11.2138C7.65066 11.2138 8.79868 12.3618 8.79868 13.7798C8.79868 15.2826 7.98247 17.1886 6.23258 17.1886C4.42941 17.1886 3.66649 15.1966 3.66649 13.7798C3.66649 12.3618 4.81693 11.2138 6.23258 11.2138ZM25.399 21.0963V25.4001H23.2095V21.7309C23.2095 21.5093 23.0303 21.3313 22.8099 21.3313C22.5895 21.3313 22.4102 21.5105 22.4102 21.7309V25.4001H17.1229V21.7309C17.1229 21.5093 16.9437 21.3313 16.7233 21.3313C16.5029 21.3313 16.3236 21.5105 16.3236 21.7309V25.4001H14.1341V21.0963C14.1341 19.4277 15.6043 18.0629 17.4001 18.0629H22.1341C23.9312 18.0629 25.4001 19.4276 25.4001 21.0963H25.399ZM19.78 4.80796V12.248L17.7297 10.6362H11.8853C11.1297 10.6362 10.5132 10.0186 10.5132 9.26423V8.60064H14.1147C15.3124 8.60064 16.2872 7.62584 16.2872 6.42821V3.43599H18.4077C19.1633 3.43599 19.78 4.05354 19.78 4.80796ZM22.3327 13.7797C22.3327 15.2825 21.5165 17.1885 19.7667 17.1885C17.9635 17.1885 17.2006 15.1965 17.2006 13.7797C17.2006 13.0313 17.5202 12.3581 18.0313 11.8894L19.9326 13.3849C20.1954 13.5908 20.5804 13.4043 20.5804 13.0701V11.3457C21.5989 11.686 22.3327 12.6462 22.3327 13.7797Z",fill:"#6D8994"})),bt=t=>d.createElement("svg",{width:25,height:23,viewBox:"0 0 25 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},d.createElement("path",{d:"M9.48977 18.5416H15.3058H15.3482L20.3584 22.4V17.0451C22.895 15.3921 24.3999 12.6559 24.3999 9.6708C24.3999 4.77871 20.323 0.800049 15.31 0.800049H9.4898C4.47685 0.800049 0.399902 4.77871 0.399902 9.6708C0.399902 14.5629 4.47962 18.5416 9.48977 18.5416ZM17.3135 7.95896C18.2824 7.95896 19.0677 8.72529 19.0677 9.6708C19.0677 10.6163 18.2824 11.3826 17.3135 11.3826C16.3447 11.3826 15.5594 10.6163 15.5594 9.6708C15.5594 8.72662 16.3447 7.95896 17.3135 7.95896ZM12.402 7.95896C13.3709 7.95896 14.1561 8.72529 14.1561 9.6708C14.1561 10.6163 13.3709 11.3826 12.402 11.3826C11.4331 11.3826 10.6478 10.6163 10.6478 9.6708C10.6478 8.72662 11.4331 7.95896 12.402 7.95896ZM7.49041 7.95896C8.45929 7.95896 9.24454 8.72529 9.24454 9.6708C9.24454 10.6163 8.45929 11.3826 7.49041 11.3826C6.52154 11.3826 5.73628 10.6163 5.73628 9.6708C5.73628 8.72662 6.52154 7.95896 7.49041 7.95896Z",fill:"#6D8994"})),wt=t=>d.createElement("svg",{width:35,height:38,viewBox:"0 0 35 38",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},d.createElement("g",{filter:"url(#filter0_d_1_109)"},d.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.9121 13.9655C13.6575 13.9655 14.2583 14.5516 14.2583 15.2726C14.2583 15.9936 13.6575 16.5798 12.9121 16.5798C12.1731 16.5798 11.5724 15.9936 11.5724 15.2726C11.5724 14.5516 12.1731 13.9655 12.9121 13.9655ZM20.9437 28.6278C22.3842 28.556 23.6812 27.9497 24.6386 27.0144C25.2457 26.422 25.7147 25.7009 25.9989 24.8942C26.0364 24.8577 26.0803 24.8148 26.1165 24.7795C26.5247 24.3812 26.8697 23.9362 27.1565 23.4661C27.0686 25.0795 26.3607 26.5354 25.2535 27.6142C24.1399 28.7008 22.6284 29.3991 20.9581 29.471C20.8198 29.6714 20.5937 29.7999 20.3367 29.7999H19.2231C18.8045 29.7999 18.4634 29.4646 18.4634 29.0588C18.4634 28.6604 18.8071 28.3239 19.2231 28.3239H20.3367C20.586 28.3214 20.8055 28.4438 20.9437 28.6278ZM21.8881 13.9655C22.6271 13.9655 23.2278 14.5516 23.2278 15.2726C23.2278 15.9936 22.6271 16.5798 21.8881 16.5798C21.1491 16.5798 20.5484 15.9936 20.5484 15.2726C20.5484 14.5516 21.1491 13.9655 21.8881 13.9655ZM15.1665 23.4319C14.9236 23.4319 14.7273 23.2378 14.7273 23.0033C14.7273 22.7764 14.9262 22.5823 15.1665 22.5823H19.6441C19.8767 22.5823 20.0756 22.7764 20.0756 23.0033C20.0756 23.2403 19.8767 23.4319 19.6441 23.4319H15.1665ZM22.3779 19.3679H12.4225C10.2792 19.3679 8.52092 17.6562 8.52092 15.555C8.52092 13.4638 10.2753 11.7483 12.4225 11.7483H22.3815C24.5248 11.7483 26.2831 13.46 26.2831 15.555C26.2792 17.6563 24.5239 19.3679 22.3779 19.3679ZM12.4225 18.5184H22.3815C24.0481 18.5184 25.4188 17.1847 25.4188 15.5549C25.4188 13.9288 24.052 12.5914 22.3815 12.5914H12.4225C10.7559 12.5914 9.38524 13.9251 9.38524 15.5549C9.38524 17.186 10.7521 18.5184 12.4225 18.5184ZM28.0336 19.8696H28.1654C29.2854 19.8696 30.2001 18.9772 30.2001 17.8843V16.5343C30.2001 15.4352 29.2854 14.5427 28.1654 14.5427H28.0336V19.8696ZM6.63481 19.8696H6.77304V14.5452H6.63481C5.51475 14.5452 4.6001 15.4377 4.6001 16.5368V17.8868C4.6001 18.9772 5.51475 19.8696 6.63481 19.8696ZM10.8191 8.24891L8.97689 2.98003C8.90972 2.8086 8.97689 2.62455 9.11513 2.51616C9.48977 2.18086 9.64223 1.66659 9.51044 1.18884C9.32182 0.47415 8.56606 0.0531365 7.84389 0.247234C7.46925 0.369505 7.21605 0.527068 7.01063 0.869929C6.6967 1.40692 6.79747 2.08505 7.25997 2.50355C7.44212 2.67497 7.67853 2.78968 7.92528 2.83885C8.10098 2.87541 8.23275 3.01028 8.26246 3.17416L9.44066 9.00516C9.86051 8.69634 10.3205 8.43926 10.8191 8.24891ZM25.3643 9.00268L26.5425 3.17168C26.5736 3.00655 26.704 2.87167 26.8797 2.83637C27.1291 2.78721 27.3629 2.67124 27.545 2.50106C28.0347 2.04981 28.1148 1.31618 27.7336 0.772896C27.5205 0.472894 27.1936 0.272469 26.8255 0.216998C26.4508 0.161534 26.0723 0.253553 25.7726 0.474143C25.4793 0.694731 25.2971 1.01742 25.2532 1.37919C25.2028 1.8002 25.3643 2.22248 25.6847 2.5149C25.823 2.6233 25.8901 2.80734 25.8294 2.97876L23.9872 8.24764C24.4794 8.43924 24.9393 8.69638 25.3643 9.00268ZM27.1627 20.2904V14.1228C27.1627 12.6077 26.5245 11.2312 25.509 10.2305C24.4833 9.23976 23.0725 8.61707 21.5198 8.61707H13.2762C11.7234 8.61707 10.3127 9.23976 9.2973 10.2305C8.27153 11.2314 7.63723 12.6078 7.63723 14.1228V20.2904C7.63723 21.8055 8.27543 23.182 9.2973 24.1827C10.3127 25.1835 11.7274 25.7961 13.2762 25.7961C13.5191 25.7961 13.7077 25.9902 13.7077 26.2247V29.7743L17.6595 25.9246C17.7409 25.8389 17.8585 25.796 17.967 25.796H21.5236C23.0765 25.796 24.4872 25.1834 25.5128 24.1825C26.5282 23.1804 27.1627 21.8053 27.1627 20.2904Z",fill:"#6D8994"})),d.createElement("defs",null,d.createElement("filter",{id:"filter0_d_1_109",x:.600098,y:.199951,width:33.6,height:37.6,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},d.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),d.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),d.createElement("feOffset",{dy:4}),d.createElement("feGaussianBlur",{stdDeviation:2}),d.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),d.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),d.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_1_109"}),d.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_1_109",result:"shape"})))),Be=200*1024,jt=({values:t,setFieldValue:o,activeIndex:s})=>{var C,x;const[,r]=d.useState(null),[l,a]=d.useState(null),[h,m]=d.useState(null),[u,p]=d.useState(!1),i=async(g,y)=>{try{const M=document.createElement("div");document.body.appendChild(M);const B=$e.createRoot(M);B.render(g),setTimeout(()=>{const P=M.querySelector("svg");if(P){const U=P.outerHTML,H=new Blob([U],{type:"image/svg+xml"}),W=new File([H],`bot-icon-${y+1}.svg`,{type:"image/svg+xml"});o("botLogo",W),a(W),m(y),p(!1),r(null)}else console.log("SVG element not found.");B.unmount(),document.body.removeChild(M)},100)}catch(M){console.log("Error processing SVG icon.",M)}},w=g=>{g?(o("botLogo",g),r(URL.createObjectURL(g)),a(g),m(null),p(!0)):(o("botLogo",null),r(null),a(null),p(!1))},c=async()=>{try{if(!l)return;let g=l;te&&(g=await te("botChatButton",l)),o("botChatButton",g),I(!0,"Logo uploaded successfully.","success"),a(null)}catch(g){console.log("File upload failed. Please try again later.",g),I(!0,"File upload failed. Please try again later.","error")}},f=async()=>{try{ee&&await ee("botChatButton"),o("botChatButton",null),r(null),a(null),m(null),p(!1),I(!0,"Logo deleted successfully.","success")}catch(g){console.log("Deleting logo failed. Please try again later.",g),I(!0,"Deleting logo failed. Please try again later.","error")}},n=[e.jsx(Ct,{},"default"),e.jsx(ne,{},"v1"),e.jsx(ft,{},"v2"),e.jsx(bt,{},"v3"),e.jsx(wt,{},"v4")];return e.jsxs("div",{className:"mt-12 border-y py-4",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-thin text-primary mb-4",children:"Chat Launcher Setting"}),e.jsxs("div",{className:"mb-12",children:[e.jsx("label",{className:"block text-sm text-gray-600 my-4",children:"Choose Icon"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 sm:gap-4",children:[n.map((g,y)=>e.jsx(O,{icon:g,type:"rounded",className:`border p-2 sm:p-4 rounded-full w-12 h-12 sm:w-16 sm:h-16 flex items-center justify-center ${h===y?"border-blue-500 ring-2 ring-blue-200":"border-gray-300 hover:bg-gray-100"}`,onClick:()=>i(g,y)},y)),e.jsx(Ne,{imageUrl:(C=t.botChatButton)==null?void 0:C.url,imageName:"botChatButton",maxImageSize:Be,onChange:o,variant:"rounded",className:`text-primary ${u&&l?"border-blue-500 ring-2 ring-blue-200":"border-gray-300 hover:bg-gray-100"}`,showButtons:!1,showFileName:!1,onFileSelect:w,autoUpload:!1})]}),e.jsx("div",{className:"flex gap-2 mt-5",children:l&&e.jsxs(e.Fragment,{children:[e.jsx(O,{label:"Upload",type:"primary",onClick:c}),e.jsx(O,{label:"Delete",type:"secondary",onClick:f})]})}),l&&e.jsxs("div",{className:"text-xs mt-2",children:["File Name : ",l.name]})]}),!s&&e.jsxs("div",{className:"mt-8 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8 lg:gap-12",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Upload Header Logo"}),e.jsx(Ne,{imageUrl:(x=t.botLogo)==null?void 0:x.url,imageName:"botLogo",onChange:o,bgColor:t.bgColor,maxImageSize:Be})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Header Logo Margin"}),e.jsx(k,{field:"headerLogoMargin",placeholder:"1px 2px 1px 2px",onChange:g=>o("headerLogoMargin",g),value:t==null?void 0:t.headerLogoMargin,wrapperClassName:"border rounded-md h-12 w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Width"}),e.jsx(k,{field:"logoWidth",placeholder:"0px",onChange:g=>o("logoWidth",g),value:t==null?void 0:t.logoWidth,wrapperClassName:"border rounded-md h-12 w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Height"}),e.jsx(k,{field:"logoHeight",placeholder:"0px",onChange:g=>o("logoHeight",g),value:t==null?void 0:t.logoHeight,wrapperClassName:"border rounded-md h-12 w-full"})]})]})]})};async function vt(t){return await le(`/organization/organization-props/${t}`,{},{noAuth:!0})}const R={BOT:"bot",ADVANCE:"advance"};function yt({activeIndex:t,onNavigate:o,onChange:s}){const[r,l]=xe(),[a,h]=d.useState(R.BOT),m=oe(c=>{var f;return(f=c.organization)==null?void 0:f.organizationPropId}),[u,p]=d.useState(null);d.useEffect(()=>{m&&(async()=>{try{const c=await vt(m);p(c)}catch(c){p(null),console.error("Failed to fetch organization props:",c)}})()},[m]);const i=d.useMemo(()=>{var x,g,y;if(!l)return{};const{botName:c,botDesign:f={}}=l,n=f,C={bgColor:(n==null?void 0:n.backgroundColor)||"#484a49",botBorderColor:(n==null?void 0:n.botBorderColor)||"#484a49",botBackgroundColor:(n==null?void 0:n.botBackgroundColor)||"#dfd9df",botFontColor:(n==null?void 0:n.botFontColor)||"#000000",visitorBorderColor:(n==null?void 0:n.visitorBorderColor)||"#000000",visitorBackgroundColor:(n==null?void 0:n.visitorBackgroundColor)||"#ffffff",visitorFontColor:(n==null?void 0:n.visitorFontColor)||"#000000",fontType:(n==null?void 0:n.fontType)||"normal-font",windowAlign:(n==null?void 0:n.windowAlign)||"bottomRight",fontColor:(n==null?void 0:n.textColor)||"#484a49",titleText:c,placeholder:"Type your message...",launcherType:"bar",messageBubbleLogo:!0,botLogo:(n==null?void 0:n.botLogo)||{},visitorMessageLogo:(n==null?void 0:n.visitorMessageLogo)||{},botMessageLogo:(n==null?void 0:n.botMessageLogo)||{},botChatButton:(n==null?void 0:n.botChatButton)||{},hideLivservBranding:(n==null?void 0:n.hideLivservBranding)||!1,showMinimizeButtonToolTip:(n==null?void 0:n.showMinimizeButtonToolTip)||!0,...n};return u&&(C.domainSettings={domain:(x=u==null?void 0:u.consoleSettings)==null?void 0:x.domain,website:(g=u==null?void 0:u.consoleSettings)==null?void 0:g.website,displayName:(y=u==null?void 0:u.consoleSettings)==null?void 0:y.displayName}),C},[l,u]);if(!l)return null;const w=async(c,{setErrors:f,setStatus:n,setSubmitting:C})=>{var x,g,y,M,B,P;try{const{botDesign:U={}}=l,H=U;((x=c.botLogo)==null?void 0:x.name)!==((g=H.botLogo)==null?void 0:g.name)&&(c.botLogo=H.botLogo),((y=c.visitorMessageLogo)==null?void 0:y.name)!==((M=H.visitorMessageLogo)==null?void 0:M.name)&&(c.visitorMessageLogo=H.visitorMessageLogo),((B=c.botMessageLogo)==null?void 0:B.name)!==((P=H.botMessageLogo)==null?void 0:P.name)&&(c.botMessageLogo=H.botMessageLogo),await Qe(r,c)?I(!0,"Bot design updated successfully","success"):I(!0,"Failed to update bot design. Please try again later.","error"),t&&o(t+1),n({success:!1}),C(!1)}catch(U){I(!0,"Failed to update bot design. Please try again later.","error"),console.error(U),n({success:!1}),f({submit:U.message}),C(!1)}};return e.jsx(e.Fragment,{children:e.jsx(De,{initialValues:i,validationSchema:void 0,onSubmit:w,children:c=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-full h-full bg-white rounded-lg shadow-lg p-14",children:[e.jsxs("div",{className:"flex items-center space-x-4 border-b pb-4 mb-4",children:[e.jsxs("div",{className:"relative flex items-center justify-center",children:[e.jsx("button",{className:`px-4 py-2 text-black ${a===R.BOT?"text-orange-600 bg-white border border-[#FB9F37] rounded-md shadow-md transition":""}`,onClick:()=>h(R.BOT),children:"Bot Setting"}),a===R.BOT&&e.jsx("div",{className:"absolute bottom-[-8px] w-4 h-4 bg-white border-l border-b border-[#FB9F37]",style:{transform:"rotate(-46deg)"}})]}),!t&&e.jsxs("div",{className:"relative flex items-center justify-center",children:[e.jsx("button",{className:`px-4 py-2 text-black ${a===R.ADVANCE?"text-orange-600 bg-white border border-[#FB9F37] rounded-md shadow-md transition":""}`,onClick:()=>h(R.ADVANCE),children:"Advance Setting"}),a===R.ADVANCE&&e.jsx("div",{className:"absolute bottom-[-8px] w-4 h-4 bg-white border-l border-b border-[#FB9F37]",style:{transform:"rotate(-46deg)"}})]})]}),e.jsxs("form",{noValidate:!0,onSubmit:c.handleSubmit,children:[a===R.BOT&&e.jsxs(e.Fragment,{children:[e.jsx(ut,{...c,activeIndex:t}),e.jsx(jt,{...c,activeIndex:t}),e.jsx(mt,{...c,activeIndex:t}),!t&&e.jsxs(e.Fragment,{children:[e.jsx(pt,{...c}),e.jsx(ht,{...c})]})]}),a===R.ADVANCE&&e.jsx(dt,{...c})]}),e.jsx(Nt,{onChange:s}),e.jsx("div",{className:"flex mt-12 justify-end",children:e.jsx(O,{label:t?"Next":"Save Changes",onClick:()=>c.handleSubmit()})})]})})},r)})}function Nt({onChange:t}){const{values:o}=Fe();return d.useEffect(()=>{o&&t(ke(o))},[o,t]),null}let z=null;function Bt(t){t.origin||(t.origin=null),t.botId||(t.botId=null);try{const{origin:o,botId:s}=t;z=new BroadcastChannel("lp_web_chat");const r=Lt(t);return z.addEventListener("message",r),z.postMessage({action:"GetConversationId",origin:o,botId:s}),()=>{z&&(z.removeEventListener("message",r),z.close(),z=null)}}catch(o){console.error("Unable to start session sharing:",o)}}function Lt({onHistoryChange:t,getHistory:o,origin:s=null,botId:r=null}){return l=>{const a=l.data||{};if(!(a.origin!==s||a.botId!==r))try{if(a.action==="GetConversationId"){const h=o();ue(h,s,r)}else if(a.action==="SetConversationId"){const{conversationId:h,history:m}=a;h?Me(h||void 0):He(),m&&(t==null||t(m))}}catch(h){console.log("Error occurred when trying to handle session sharing:",h)}}}function ue(t,o,s,r){if(z)try{const l=ie()||"";if(!r&&!l)return;z.postMessage({action:"SetConversationId",origin:o,botId:s,conversationId:l,history:t})}catch(l){console.error("Error sharing session:",l)}}function pe(){return{role:"assistant",type:"text",content:"Hello, greetings for the day, how may I assist you?"}}function St(t,o,s){var C;const{updateContact:r,onReceiveChatResponse:l,bot:a,locationDetails:h,onCallback:m,recipientId:u,history:p,chatFlowId:i,preferredLanguage:w,url:c}=o,{flowId:f,flowType:n}=((C=p==null?void 0:p[p.length-1])==null?void 0:C.media)||{};return typeof t=="string"&&f&&(t={method:"flow-response",type:n,flowId:f,answer:t}),(t==null?void 0:t.type)==="customForm"&&(t!=null&&t.answer)&&(t={method:"flow-response",type:n,flowId:f,answer:t.answer}),s?Mt(t,a,c,{onReceiveChatResponse:l,updateContact:r,onCallback:m,recipientId:u,chatFlowId:i,language:w},h):kt(t,a,c,{onReceiveChatResponse:l,updateContact:r,onCallback:m,recipientId:u,chatFlowId:i,language:w},h)}async function kt(t,o,s,{onReceiveChatResponse:r,updateContact:l,onCallback:a,recipientId:h,chatFlowId:m,language:u},p){const i=ie(),{_id:w,organizationId:c,botSettings:f}=o,n={url:s,userQuery:t,recipientDetails:{recipientId:h,conversationId:i,language:u,...p},chatFlowId:m};r&&(n.testMode=!0);try{const C=await Ge(`/bot/${c}/${w}/chat`,n,{noAuth:!0});return r==null||r(C),Ee(C,{updateContact:l,botSettings:f,onCallback:a})}catch(C){return[{role:"assistant",type:"text",content:C.message||"Unknown Server error"}]}}async function Mt(t,o,s,{onReceiveChatResponse:r,updateContact:l,onCallback:a,recipientId:h,chatFlowId:m,language:u},p){const i=ie(),{_id:w,organizationId:c,botSettings:f}=o,n={url:s,userQuery:t,recipientDetails:{recipientId:h,conversationId:i,language:u,...p},chatFlowId:m};r&&(n.testMode=!0);try{const x=await(await fetch(`${ot}voicebot/voiceChat?organizationId=${c}&botId=${w}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).json();return r==null||r(x.data),{data:Ee(x.data,{updateContact:l,botSettings:f,onCallback:a}),audioUri:x.data.audioUri}}catch(C){return console.log(C,"error"),[{role:"assistant",type:"text",content:C.message||"Unknown Server error"}]}}function Ee(t,{updateContact:o,botSettings:s,onCallback:r}){const{chatRefId:l,recipientId:a,messages:h}=t;return Me(l),r==null||r("set-visitor-id",{recipientId:a}),Y(h,{updateContact:o,botSettings:s})}function Y(t,{updateContact:o,botSettings:s}){if(!(t!=null&&t.length))return t;const r=t[t.length-1];return r.type==="form"&&t.push({role:"user",type:"lead",content:"",profile:r.media,updateContact:o,botSettings:s}),r.type==="customForm"&&(r.role==="assistant"&&(r.role="user"),Object.assign(r,{type:"customForm",content:"",media:r.media,updateContact:o,botSettings:s})),t}async function Ht(t){try{const o=await Ye(),s=new URLSearchParams(window.location.search),r=s.get("token"),l=s.get("sourceUrl");let a=document.referrer;if(l&&a)try{const f=new URL(l).hostname,n=new URL(a).hostname;f===n&&(a="")}catch(f){console.error("Invalid URL in sourceUrl or referer:",f)}const h=(o==null?void 0:o.country_name)||"NA",m=(o==null?void 0:o.city)||"NA",u={authToken:r,recipientId:t,sourceUrl:l,referer:a,country:h,city:m},{startupFlow:p,hideChatWindow:i,googleTagManagerId:w,...c}=await le("/bot/get-bot-details-by-auth-token",u,{noAuth:!0});return{startupFlow:p,hideChatWindow:i,googleTagManagerId:w,bot:c}}catch(o){console.log("Failed to init chat:-",o)}}async function Le(t,o,s,{autoLaunch:r,startupMessages:l}){const{_id:a,organizationId:h,botSettings:m={}}=t,u=ie();if(!o||!u)return r?l||[pe()]:[];try{const p=await le(`/bot/${h}/${a}/chat/history/${o}/${u}`,null,{noAuth:!0}),{messages:i}=p||{};return Y(i,{updateContact:s,botSettings:m})}catch(p){console.error("Failed to fetch chat history:-",p)}return r?[pe()]:[]}function Et({text:t="We are Online!",onHide:o,design:s,isLeft:r}){const l=Tt(s,r),[a,h]=v.useState(!0),m=v.useCallback(u=>{u.preventDefault(),u.stopPropagation(),h(!1),o==null||o()},[o]);return a?e.jsxs("div",{className:"button-tooltip",style:l,children:[e.jsxs("div",{children:[e.jsx("img",{draggable:!1,className:"chat-hand",alt:"👋",src:"https://cwc.livserv.in/uploads/Templates/cwc_trend1/hand.png"}),e.jsx("b",{children:t}),e.jsx("br",{})]}),e.jsx("a",{className:"close-indicator",onClick:m,children:e.jsx("svg",{width:"12",height:"12",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M1490 1245q0 40-24 68l-136 136q-24 24-68 24t-68-28l-294-294-294 294q-24 24-68 24t-68-28l-136-136q-24-24-24-68t24-68l294-294-294-294q-24-24-24-68t24-68l136-136q24-24 68-24t68 28l294 294 294-294q24-24 68-28t68 28l136 136q28 24 24 68t-24 68l-294 294 294 294q24 24 24 68z",fill:"#fff"})})})]}):null}function Tt(t,o){let{spacingCorner:s,spacingBottom:r}=(t==null?void 0:t.launcher)||{};if(s=parseFloat(s)||void 0,r=parseFloat(r)||void 0,s&&(s+=5),r&&(r+=75),s||r)return{bottom:r,[o?"left":"right"]:s}}function It({isLeft:t,bgColor:o,secBgColor:s,imageUrl:r,chatIcon:l,barText:a="Live Chat",fontSize:h,color:m,autoAnimate:u=!0,style:p,onClick:i}){const w=t?"bottom-left":"bottom-right",c={backgroundColor:o},f={backgroundImage:`linear-gradient(90deg, ${o}, ${s})`},n=v.useRef(null);return v.useEffect(()=>{if(u){const C=setInterval(()=>{var x;(x=n.current)==null||x.classList.remove("bar-hide"),setTimeout(()=>{var g;return(g=n.current)==null?void 0:g.classList.add("bar-hide")},7e3)},35e3);return()=>clearInterval(C)}},[u]),e.jsxs("div",{className:`lp-launcher expand-button ${w}`,onClick:i,style:p,children:[e.jsx("div",{ref:n,className:"text-container bar-hide",style:f,children:e.jsx("div",{className:"bar-text",style:{minWidth:"150px",fontSize:h,color:m},children:e.jsxs("p",{children:["Hi there,"," ",e.jsx("img",{draggable:!1,className:"chat-hand",alt:"👋",src:"https://cwc.livserv.in/uploads/Templates/cwc_trend1/hand.png"})," ","We are online!"]})})}),e.jsx("div",{className:"image-container",style:c,children:e.jsxs("div",{className:"image-sub-container",children:[r&&e.jsx("img",{src:r,alt:a}),!r&&l]})})]})}function Ut({design:t,onToggle:o}){const{launcher:{launcherType:s,buttonLogoUrl:r,buttonOnMobile:l,barText:a,fontSize:h,spacingCorner:m,spacingBottom:u,showMinimizeButtonToolTip:p=!0}={},header:{bgColor:i,secBgColor:w,fontColor:c}={},window:{fontFamily:f,align:n}={}}=t||{},C=n==="bottomLeft",x={bottom:u,[C?"left":"right"]:m};if(s==="icon"||l){const g=r&&r.endsWith(".svg");return e.jsxs("div",{id:"lp-launcher",className:"lp-launcher button "+(!r||g?" bordered":""),onClick:o,style:{borderColor:i,color:c,background:!r||g?"linear-gradient(to right,"+i+", "+w+")":"transparent",verticalAlign:"middle",padding:!r||g?"16px":void 0,display:"flex",...x},children:[p&&e.jsx(Et,{design:t,isLeft:C}),r&&e.jsx("img",{src:r,alt:"Live Chat"}),!r&&he]})}else return s==="expand"?e.jsx(It,{isLeft:C,color:c,style:x,bgColor:i,secBgColor:w,imageUrl:r,chatIcon:he,barText:a,fontSize:h,onClick:o}):e.jsxs("div",{id:"lp-launcher",className:"lp-launcher bar",onClick:o,style:{background:"linear-gradient(to right, "+i+", "+w+")",color:c,fontFamily:f,display:"flex",alignItems:"center",...x},children:[r&&e.jsx("img",{src:r,alt:a}),!r&&he,e.jsx("span",{children:a||"Live Chat"})]})}function At({googleTagManagerId:t}){return d.useEffect(()=>{if(!t||document.querySelector(`script[data-gtm="${t}"]`))return;if(window.dataLayer&&document.querySelector('script[src*="gtm.js"]')){console.log("GTM already loaded by server");return}const o=document.createElement("script");o.innerHTML=`
            (function(w,d,s,l,i){
                w[l]=w[l]||[];
                w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});
                var f=d.getElementsByTagName(s)[0],
                j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';
                j.async=true;
                j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;
                f.parentNode.insertBefore(j,f);
            })(window,document,'script','dataLayer','${t}');
        `,document.head.appendChild(o);const s=document.createElement("noscript");return s.innerHTML=`
          <iframe src="https://www.googletagmanager.com/ns.html?id=${t}"
            height="0" width="0" style="display:none;visibility:hidden" title="Google Tag Manager"></iframe>
        `,document.body.insertBefore(s,document.body.firstChild),()=>{document.head.removeChild(o),document.body.removeChild(s)}},[t]),null}function Pt({design:t}){const o=t==null?void 0:t.remoteFontLink;return o?Ve.createPortal(e.jsx("link",{rel:"stylesheet",href:o}),document.head,"remoteFont"):null}const _t={window:{spacingCorner:"0px",spacingBottom:"7px"},launcher:{spacingCorner:"0px",spacingBottom:"7px"}},Se=["lead","options","customForm","stop"];function Wt(t){var we,je,ve;const{botDetails:o,botDesign:s,startupFlow:r,onReceiveChatResponse:l,autoLaunch:a,recipientId:h,origin:m,onCallback:u,optionsRenderer:p,fullscreen:i,sourceUrl:w}=t,[c]=xe(),{organizationId:f}=oe(),[n,C]=v.useState(a||!1),[x,g]=v.useState(s),[y,M]=v.useState(!1),[B,P]=v.useState(o),[U,H]=v.useState(r),[W,D]=v.useState(r==null?void 0:r.messages),[ce,de]=v.useState(h),[S,_]=v.useState([]),[E,me]=v.useState(),[K,fe]=v.useState(),[Ue,Ae]=v.useState(null),b=v.useRef({autoLaunch:a});if(i)try{const j=window.innerWidth+"px",N=window.innerHeight+"px";x.window.width=j,x.window.height=N,x.window.spacingBottom="0px",x.window.spacingCorner="0px",x.launcher.spacingBottom="0px",x.launcher.spacingCorner="0px"}catch(j){console.error("Error setting fullscreen design:",j)}b.current.recipientId=ce,b.current.bot=B,b.current.chatFlowId=U==null?void 0:U.flowId,b.current.startupMessages=W,b.current.origin=m,b.current.preferredLanguage=K,b.current.url=w;const Pe=v.useCallback(j=>{Je(j),fe(j)},[]);b.current.setAndBroadcastHistory=v.useCallback(j=>{var N;typeof j=="function"?_(L=>{var T;const A=j(L);return ue(A,b.current.origin,(T=b.current.bot)==null?void 0:T._id,!0),A}):(_(j),ue(j,b.current.origin,(N=b.current.bot)==null?void 0:N._id,!0))},[]),b.current.onCallback=v.useCallback((j,N)=>{j==="set-visitor-id"&&N.recipientId&&de(N.recipientId),u==null||u(j,N)},[u]),b.current.history=S,b.current.showBot=n,b.current.design=x,b.current.locationDetails=E,b.current.onReceiveChatResponse=l,b.current.isLoadedInConsole=!!l,v.useEffect(()=>{P(o)},[o]),v.useEffect(()=>{var L;const{updateContact:j,bot:N}=b.current;H(r),(L=r==null?void 0:r.messages)!=null&&L.length?D(Y([...r.messages],{updateContact:j,botSettings:N.botSettings})):D(!1)},[r]),v.useEffect(()=>{if(B&&!b.current.isLoadedInConsole)return Bt({botId:B._id,origin:b.current.origin,onHistoryChange:j=>{var N;!(j!=null&&j.length)&&!((N=b.current.history)!=null&&N.length)||_(j)},getHistory:()=>b.current.history})},[B]),v.useEffect(()=>{g(s)},[s]),v.useEffect(()=>{fe(Xe());const{updateContact:j,bot:N,recipientId:L,autoLaunch:A,setAndBroadcastHistory:T,startupMessages:ae}=b.current;N?Le(N,L,j,{autoLaunch:A,startupMessages:Y(ae,{updateContact:j,botSettings:N.botSettings})}).then(T):Ht(L).then(J=>{if(!J)return;const{bot:Z,startupFlow:F,googleTagManagerId:Ze,hideChatWindow:Re}=J;if(Re)try{window.top&&window.top!==window.self&&window.top.postMessage({lsMessage:"hide_ls_window"},"*")}catch(X){console.error("Error hiding chat window:",X.message||X)}else{Ae(Ze),P(Z),H(F);const X=Y(F==null?void 0:F.messages,{updateContact:j,botSettings:Z.botSettings});D(X);const{design:ze,isLoadedInConsole:Oe}=b.current;!ze&&Z.botDesign&&g(ke(Z.botDesign,Oe?void 0:_t)),Le(Z,L,j,{autoLaunch:A,startupMessages:Y(X,{updateContact:j,botSettings:Z.botSettings})}).then(T)}}),qe().then(me)},[]);const re=v.useCallback((j,N)=>{var ae,J,Z,F;const{design:L,onCallback:A}=b.current;let{showBot:T}=b.current;T=j?!T:T,A==null||A("windowToggle",{state:T,design:T?{width:(ae=L==null?void 0:L.window)==null?void 0:ae.width,height:(J=L==null?void 0:L.window)==null?void 0:J.height,spacingBottom:(Z=L==null?void 0:L.window)==null?void 0:Z.spacingBottom,spacingCorner:(F=L==null?void 0:L.window)==null?void 0:F.spacingCorner}:N})},[]),se=v.useCallback(async j=>{var N;(N=b.current.history)!=null&&N.length||setTimeout(()=>{var A;if((A=b.current.startupMessages)!=null&&A.length){b.current.setAndBroadcastHistory(T=>T.concat(...b.current.startupMessages));return}const L=pe();b.current.setAndBroadcastHistory(T=>T?T.concat(L):[L])},j||1700)},[]),be=v.useCallback(()=>{re(!0),C(j=>!j),M(!0),setTimeout(()=>M(!1),1e3),se()},[re,se]);v.useLayoutEffect(()=>{x&&re(!1,!0)},[x,re]);const ge=v.useCallback(async(j,N=!1)=>St(j,b.current,N),[]);b.current.updateContact=v.useCallback(async j=>{const N=await ge(j);b.current.setAndBroadcastHistory(L=>L.filter(A=>!Se.includes(A.type)).concat(...Array.isArray(N)?N:[]))},[ge]);const _e=v.useCallback(()=>{Ce(f,c,H),b.current.setAndBroadcastHistory([]),He(),delete b.current.history,se(700)},[se,f,c]);if(!B||!E)return null;let Q="hide-chat";n&&y?Q="opening":n&&!y?Q="show-chat":!n&&y&&(Q="closing"),Q+=((we=x==null?void 0:x.window)==null?void 0:we.align)==="bottomLeft"?" bottom-left ":" bottom-right ",l&&(Q+=" test-console");const We=S&&Se.includes((je=S[S.length-1])==null?void 0:je.type);return e.jsxs(e.Fragment,{children:[e.jsx(Pt,{design:x}),e.jsx(At,{googleTagManagerId:Ue}),e.jsxs("div",{className:"chat-handler "+Q,children:[n&&!!B&&e.jsx(et,{botDesign:x,messages:S,showTime:!0,displayComponents:void 0,onUserMessage:ge,disabledMessage:We,onHistoryChange:b.current.setAndBroadcastHistory,onClear:_e,onHide:be,onCallback:b.current.onCallback,optionsRenderer:p,language:K,setLanguage:Pe,fullscreen:i,activateVoiceBot:((ve=x==null?void 0:x.composer)==null?void 0:ve.activateVoiceBot)??!1}),!n&&!y&&e.jsx(Ut,{design:x,onToggle:be})]})]})}const Te="lp-vid";function Zt(t,o){if(t==="set-visitor-id"){const{recipientId:s}=o||{};s&&Rt(s)}}function Ie(){try{return localStorage.getItem(Te)||void 0}catch(t){console.error("Unable to use browser cache",t)}}function Rt(t){try{localStorage.setItem(Te,t)}catch(o){console.error("Unable to use browser cache",o)}}function zt({activeIndex:t,onNavigate:o}){var M;const[s,r]=xe(),{isSuperUser:l,organizationId:a}=oe(),[h,m]=d.useState(null),[u,p]=d.useState(!1),[i,w]=d.useState({}),[c,f]=d.useState(),[n,C]=d.useState(!1),x=B=>st(B.organization);if(d.useEffect(()=>{!a||!s||Ce(a,s,f,C)},[s,a]),c===void 0)return null;const g=B=>{const{role:P,type:U,passedDocIds:H,searchQuery:W}=B||{};if(P!=="assistant"||U!=="text"||!(H!=null&&H.length)&&!W)return null;const D=()=>e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{d:"M19 2H8c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h11c.55 0 1-.45 1-1V3c0-.55-.45-1-1-1zm0 17H8V4h11v15zm-2-7H10v2h7v-2zm0-4H10v2h7V8zm-9 9H5V5c0-1.1.9-2 2-2h1v2H7v12zm0 2v-2h1v2H7z"})});return e.jsx("span",{className:"ml-2 cursor-pointer",onClick:()=>y(B),children:e.jsx(D,{})})},y=B=>{console.log("Clicked on KB icon",B),m(B),p(!0)};return e.jsxs("div",{className:"w-full p-8",children:[!t&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-4",children:e.jsx(at,{title:"Chat Window Design"})}),e.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-8"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"w-full mb-4",children:e.jsx(yt,{activeIndex:t,onNavigate:o,onChange:w})}),e.jsxs("div",{className:"w-full",children:[e.jsx("div",{children:n?e.jsx("div",{children:"Loading chat preview..."}):e.jsx(Wt,{botDetails:r,botDesign:i,startupFlow:c,autoLaunch:(M=r==null?void 0:r.botDesign)==null?void 0:M.autoLaunch,recipientId:Ie(),onReceiveChatResponse:x,onCallback:Zt,optionsRenderer:g},s)}),e.jsx(rt,{openPopUpDialog:u,setPopUpDialog:p,title:"View and update Knowledge base",children:h&&e.jsx(tt,{message:h,isSuperUser:l})})]})]})]})}const Ce=async(t,o,s,r)=>{try{r==null||r(!0);const l=await le(`/bot/${t}/${o}/chat/startup-flow`,{recipientId:Ie()});s(l||!1),r==null||r(!1)}catch(l){r(!1),s(!1),console.error("Failed to fetch startup flow:",l)}},ro=Object.freeze(Object.defineProperty({__proto__:null,default:zt,fetchStartupFlow:Ce},Symbol.toStringTag,{value:"Module"}));export{zt as B,Wt as C,Ie as g,Zt as h,ro as i};
