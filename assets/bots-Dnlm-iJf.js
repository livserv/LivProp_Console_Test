import{q as S,t as B,k as l,p as f}from"./Button-CPgSoE2E.js";import{u as r,c}from"./AlertSnackbar-BtF5Z4Y6.js";async function w(t){const{organization:{websiteUrl:s,_id:o}}=c.getState(),e={organizationId:o,websiteUrl:s,botName:t,botDesign:{visitorMessageLogo:{name:"",url:""},botMessageLogo:{name:"",url:""},botChatButton:{name:"",url:""},botLogo:{name:"",url:""},backgroundColor:"#e7a654",textColor:"#ffffff",dimensions:{heightInPixel:"500px",heightInPercent:"70%",widthInPixel:"350px",widthInPercent:"25%"},botLogoDimensions:{heightInPixel:"30px",heightInPercent:"100%",widthInPixel:"30px",widthInPercent:"100%"}},botSettings:{botCreationStatus:{step:0,status:!1}}},n=await f(`/bot/${o}`,e);g(n,!0)}async function d(t,s,o=!0){const{organizationId:e}=c.getState();if(!e||!t)throw new Error("Bot details not found");const n=await B(`/bot/${e}/${t}`,s);return g(n,o),n}function x(t,s){return d(t,{botName:s})}async function $(t){const{organizationId:s}=c.getState(),{selectedBotId:o}=r.getState(),e=await l(`/bot/${s}/${o}/update-logo/${t}`,null);return p(o,e),e[`botDesign.${t}`]}async function m(t){const{organizationId:s,selectedBotId:o}=c.getState();if(!s||!t)throw new Error("Bot details not found");const{deleted:e}=await l(`/bot/${s}/${t}`,null);if(e){let{botsMap:n,botsList:a}=r.getState();n={...n},a=[...a],delete n[e];const i=a.findIndex(b=>b._id===e);i>=0&&a.splice(i,1);const u={botsMap:n,botsList:a};o===e&&(u.selectedBotId=a[0]?._id||null),r.setState(u)}return!!e}function P(t,s){let{botDesign:o}=c.getState();return o={...o,...s},d(t,{botDesign:o})}function L(t,s){const{botsMap:o}=r.getState(),n={...(o?.[t]||{}).botSettings,...s};return d(t,{botSettings:n})}async function D(t,s){const{organizationId:o}=c.getState(),{selectedBotId:e}=r.getState(),n=new FormData;n.append("file",s);const a=await f(`/bot/${o}/${e}/update-logo/${t}`,n);return p(e,a),a[`botDesign.${t}`]}function g(t,s=!0){const o=t._id;let{botsMap:e,botsList:n}=r.getState();e={...e,[o]:t},n=[...n];const a=n.findIndex(u=>u._id===o);a>=0?n[a]=t:n.push(t);const i={botsMap:e,botsList:n};s&&(i.selectedBotId=o),r.setState(i)}function p(t,s){if(!t)return;const{botsMap:o}=r.getState(),e=o[t];if(!e)return;const n=Object.keys(s).reduce((a,i)=>S(a,i,s[i]),e);g(n)}export{x as a,D as b,w as c,$ as d,P as e,p as f,m as r,L as s,d as u};
