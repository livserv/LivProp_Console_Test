import{e as B,k as w,u as y,a as I,R as m,j as s,b as h}from"./index-DNgbtrVq.js";import"./Button-C3bz2KtR.js";import{S as N}from"./SelectBox-CkRYZ70U.js";import"./ajax-CVEl0eD2.js";import{s as _,a as C}from"./organization-4PXNM00t.js";import{u as P}from"./useSelectedBot-CzDcn7AF.js";function k(){const c=B(a=>a.botsList),{pathname:o}=w(),t=y(),{botId:r}=I(),[u]=P(r),d=m.useRef({});d.current.botId=u,d.current.pathname=o;const f=(c||[]).map(a=>({label:a.botName,value:a._id})),l=m.useCallback(a=>{const i=a&&typeof a=="object"&&"value"in a?a.value:a;if(!i||typeof i!="string")return;const{pathname:p,botId:e}=d.current;if(p&&e&&p.includes(e)){const n=p.replace(e,i);t(n)}_(i)},[t]);return s.jsx("div",{style:{width:"100%",marginLeft:0},children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{style:{color:"#2f7ce9",fontSize:20,marginRight:8},children:"ðŸ¤–"}),s.jsx(N,{options:f,value:u,onChange:l,showClear:!1,placeholder:"Select Bot",className:"w-full border border-gray-300 rounded px-2 py-2"})]})})}function R(){const c=h(e=>e.isSuperUser),o=h(e=>e.organizationId),t=h(e=>e.organizationList),r=m.useRef({}),{pathname:u}=w(),d=y(),{botId:f}=I();r.current.navigate=d,r.current.pathname=u,r.current.botId=f;const l=m.useMemo(()=>t==null?void 0:t.filter(e=>e._id===o)[0],[o,t]),a=c&&(t==null?void 0:t.length)>0,i=m.useCallback(async e=>{const n=e&&typeof e=="object"&&"value"in e?e.value:e;if(!n||typeof n!="string")return;const x=t.find(S=>S._id===n);if(!x)return;h.setState({organization:x,organizationId:n,selectedBotId:void 0}),sessionStorage.setItem("orgId",n);const b=await C(n),{botId:g,pathname:j,navigate:v}=r.current;b?g&&j&&v(j.replace(g,b)):v("/")},[t]),p=(t||[]).map(e=>({label:`${e.organizationName||`(${e._id})`}  $${e.availableCredits?e.availableCredits.toFixed(1):0}`,value:e._id}));return s.jsx("div",{style:{width:"100%",marginLeft:0},children:a&&s.jsx("div",{className:"flex items-center",children:s.jsx(N,{options:p,value:l==null?void 0:l._id,onChange:i,showClear:!1,placeholder:"Select organization",className:"w-full border border-gray-300 rounded px-2 py-2"})})})}function A({title:c,icon:o,onClick:t}){return s.jsxs("div",{className:"w-full rounded-md bg-white flex justify-between h-[50px] shadow-[0px_1px_4px_0px_#5653534D]",children:[s.jsx("span",{className:"text-primary uppercase font-bold text-md ps-4 py-3",children:c}),s.jsxs("div",{className:"mx-4 mt-2",children:[" ",s.jsx(R,{})," "]}),s.jsxs("div",{className:"mx-4 mt-2 ",children:[" ",s.jsx(k,{})," "]}),!!o&&s.jsx("button",{onClick:t,className:"btn bg-primary h-full w-[50px] rounded-[4px] hover:opacity-80",children:s.jsx(o,{className:"m-auto"})})]})}export{A as P};
