import{o as y}from"./AlertSnackbar-BBOi9bHj.js";const u={STRING:"string",NUMBER:"number",DATE:"date",DATETIME:"datetime",TIME:"time",PHONE_NUMBER:"phone",EMAIL:"email",CUSTOM:"custom"},X=["GET","POST","PUT"],D=["text","number","date","param","header"],ee=[{value:u.STRING,label:"Any Text"},{value:u.NUMBER,label:"Number"},{value:u.DATE,label:"Date"},{value:u.DATETIME,label:"Date & time"},{value:u.TIME,label:"Time only"},{value:u.PHONE_NUMBER,label:"Phone number"},{value:u.EMAIL,label:"Email Address"},{value:u.CUSTOM,label:"Custom value"}],se=["YYYY-MM-DD","DD-MM-YYYY","MM-DD-YYYY","DD/MM/YYYY","MM/DD/YYYY","YYYY/MM/DD"],L={jpg:"image/*",jpeg:"image/*",png:"image/*",gif:"image/*",mp4:"video/*",avi:"video/*",mov:"video/*",wmv:"video/*",mp3:"audio/*",wav:"audio/*",pdf:"application/pdf"},M=[{id:f(),type:"start",data:{message:"Chat Window Opened"},position:{x:10,y:10}}],S=f(),k=f();function f(e=12){const s="abcdefghijklmnopqrstuvwxyz0123456789";let a="";const r=s.length,o=Date.now().toString(36);for(let t=0;t<e;t++)a+=s.charAt(Math.floor(Math.random()*r));return o+a}const re=e=>{if(e&&e.flows?.length>0){let s=_(e);const a=R(e);return s=[...M,...s],{flowNodes:s,flowEdges:a}}return{flowNodes:[...M],flowEdges:[]}},_=e=>e.flows.map((a,r)=>({id:a.flowId,type:a.type,data:H(a),position:Q(a,r,e)})),H=e=>{const s={};switch(["message","leadForm","gpt","leadFlow","stop","file","map","question","callConnect","otp","customForm","options"].includes(e.type)&&(s.message=typeof e.content=="string"?e.content:e.content[0]),e.type){case"options":s.fieldLabel=e.fieldLabel,s.fallback=e.fallback?e.fallback:e.meta?.fallback,s.dataSource=e.dataSource?e.dataSource:e.meta?.dataSource,s.property=e.property,s.subOptions=U(e.children);break;case"file":s.fileType=e.meta?.type,e.meta?.media&&(q(e.meta.media,e)||!e.meta.media[0].name)?(s.urls=e.meta.media.map(o=>o.url),s.files=[]):(s.urls=[],s.files=e.meta?.media?e.meta.media:[],s.fileType||(s.fileType=e.meta?.media?V(e.meta.media):""));break;case"map":s.url=e.meta?.url?.trim();break;case"question":s.fieldLabel=e.fieldLabel,s.property=e.property,s.dateFormat=e.meta?.dateFormat||"",s.errorMessage=e.meta?.errorMessage||"";const r=e.fieldType?e.fieldType:e.meta?.type;s.fieldType=r,(r&&r===u.DATE||r===u.DATETIME)&&(s.min=e.meta?.min?A(e,"min"):s.min,s.max=e.meta?.max?A(e,"max"):s.max),r&&r===u.TIME?(s.min=e.meta?.min?$(e.meta?.min):e.meta?.min,s.max=e.meta?.min?$(e.meta?.max):e.meta?.max):(r&&r===u.STRING||r===u.NUMBER)&&(s.min=e.min?e.min:e.meta?.min,s.max=e.min?e.min:e.meta?.max),r===u.CUSTOM&&(s.custom=e.custom?e.custom:e.meta?.custom);break;case"http":if(s.property=e.property||"",e.meta){s.displayText=e.meta.displayText||"",s.requestType=e.meta.requestType||"",s.hideData=e.meta.hideData||!1,s.url=e.meta.url?.trim()||"",s.params=e.meta.params||[],s.headers=e.meta.headers||[],s.successFlowId=e.meta.successFlowId?e.meta.successFlowId:f(),s.failureFlowId=e.meta.failureFlowId?e.meta.failureFlowId:f();const o=e.meta.statusWiseFlowId?.map(t=>({statusCode:t.statusCode||"",id:t.flowId||""}));s.statusWiseFlow=o||[]}break;case"callConnect":e.meta&&(s.callConnectId=e.meta.callConnectId,s.callAccepted=e.meta.callAccepted,s.callRejected=e.meta.callRejected,s.successMessage=e.meta.successMessage,s.failureMessage=e.meta.failureMessage);break;case"otp":e.meta&&(s.otpType=e.meta.otpType);break;case"customForm":s.property=e.property,e.meta&&(s.customFields=Y(e.meta.customFields));break;case"url":s.fieldLabel=e.fieldLabel,s.property=e.property,s.subUrls=j(e.children);break;case"whatsAppFlow":s.fieldLabel=e.fieldLabel,s.property=e.property,e.meta&&(s.header=e.meta.header,s.body=e.meta.body,s.footer=e.meta.footer,s.flow_token=e.meta.flow_token,s.flow_id=e.meta.flow_id,s.flow_action=e.meta.flow_action,s.flow_cta=e.meta.flow_cta,s.screen=e.meta.screen,s.responsedata=e.meta.responsedata);break}return s},q=(e,s)=>e?.files?(s.meta.media=e.files,!0):!1,Y=(e=[])=>e.map(s=>({id:s.id,title:s.title,property:s.property,whatsAppQuestion:s.whatsAppQuestion,fieldType:s.fieldType,dateFormat:s?.dateFormat,min:s?.min,max:s?.max,custom:s?.custom,isCollapsed:!1})),U=(e=[])=>e.map(s=>({id:s.flowId?s.flowId:s.id,title:s.title,subTitle:s.subTitle,value:s.value,imageUrl:s.imageUrl,category:s.category,isLink:s.isLink,description:s.description,leadEmailTo:s.leadEmailTo?s.leadEmailTo:"",leadEmailCc:s.leadEmailCc?[...s.leadEmailCc]:[],isCollapsed:!1})),j=(e=[])=>e.map(s=>({id:s.flowId?s.flowId:s.id,url:s.url,value:s.value,leadEmailTo:s.leadEmailTo?s.leadEmailTo:"",leadEmailCc:s.leadEmailCc?[...s.leadEmailCc]:[],isCollapsed:!1})),Q=(e,s,a)=>{let r={x:s+150,y:s+50};return e.flowId&&a.positions&&(r=a.positions.find(o=>o.nodeId===e.flowId)?.position||r),r},R=e=>{let s={};e?.startFlowId&&(s={id:M[0].id,source:M[0].id,target:e?.startFlowId,type:"custom"});const a=e.flows;let r=a.filter(o=>o.nextFlowId).map(o=>({id:`e-${o.flowId}-${o.nextFlowId}`,source:o.flowId,target:o.nextFlowId,type:"custom"}));return a.forEach(o=>{if(o.children&&o.children.length>0&&o.children.forEach(t=>{t.nextFlowId&&r.push({id:`e-${t.flowId?t.flowId:t.id}-${t.nextFlowId}`,source:o.flowId,target:t.nextFlowId,type:"custom",sourceHandle:t.flowId?t.flowId:t.id})}),o.type==="http"&&o.meta){const t=o.meta;t.successFlowId&&r.push({id:`e-${S}-${t.successFlowId}`,source:o.flowId,target:t.successFlowId,type:"custom",sourceHandle:t.successFlowId}),t.failureFlowId&&r.push({id:`e-${k}-${t.failureFlowId}`,source:o.flowId,target:t.failureFlowId,type:"custom",sourceHandle:t.failureFlowId}),t.statusWiseFlowId?.forEach(l=>{l.nextFlowId&&r.push({id:`e-${l.flowId?l.flowId:""}-${l.nextFlowId}`,source:o.flowId,target:l.nextFlowId,type:"custom",sourceHandle:l.flowId})})}}),a.forEach(o=>{o.children&&o.children.length>0&&o.children.forEach(t=>{t.nextFlowId&&r.push({id:`e-${t.flowId?t.flowId:t.id}-${t.nextFlowId}`,source:o.flowId,target:t.nextFlowId,type:"custom",sourceHandle:t.flowId?t.flowId:t.id})})}),r=Object.keys(s).length>0?[s,...r]:[...r],r},te=(e,s)=>{const a=e.dataTransfer.getData("application/reactflow");return{id:f(),type:a,position:s,data:{message:""},...a==="options"&&{data:{fieldLabel:"",property:"",message:"",fallback:"",subOptions:[{id:f(),title:"",subTitle:"",value:"",leadEmailTo:"",leadEmailCc:[],category:"",description:"",isCollapsed:!0,isLink:!1}]}},...a==="file"&&{data:{message:"",fileType:"pdf",urls:[],files:[]}},...a==="map"&&{data:{message:"",url:""}},...a==="leadForm"&&{data:{message:"This will display lead form for the visitor"}},...a==="gpt"&&{data:{message:"From here on visitors would be handled by GPT"}},...a==="question"&&{data:{message:"",fieldLabel:"",property:"",type:"",meta:{min:"",max:"",regex:"",errorMessage:""}}},...a==="http"&&{data:{propertyName:"",displayText:"",url:"",requestType:"",hideData:!1,params:[],headers:[],successFlowId:f(),failureFlowId:f(),statusWiseFlow:[]}},...a==="callConnect"&&{data:{message:"",meta:{callConnectId:"",callAccepted:"",callRejected:"",successMessage:"",failureMessage:""},callAcceptedId:f(),callRejectedId:f()}},...a==="otp"&&{data:{message:"",meta:{otpType:""}}},...a==="customForm"&&{data:{property:"",message:"",customFields:[{id:f(),title:"",property:"",fieldType:"",isCollapsed:!0}]}},...a==="url"&&{data:{fieldLabel:"",property:"",subUrls:[{id:f(),url:"Default",value:"NA",leadEmailTo:"",leadEmailCc:[],isCollapsed:!0}]}},...a==="whatsAppFlow"&&{data:{fieldLabel:"",property:"",header:"",body:"",footer:"",flow_token:"",flow_id:"",flow_action:"navigate",flow_cta:"",screen:"",responsedata:""}}}},W=e=>L[e.toLowerCase()]||"",V=e=>{const s=new Set;for(const a of e){const r=a.name.split(".").pop();if(r){const o=W(r);o&&s.add(o)}}return Array.from(s).join(", ")},O={pdf:"application/pdf",jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",gif:"image/gif",mp4:"video/mp4",mov:"video/mp4",avi:"video/mp4"},ae=e=>e==="application/pdf"||e==="pdf"?"pdf":e.startsWith("image/")?"image":e.startsWith("video/")?"video":"unknown",oe=e=>{const s=z(e);return O[s]||""},B=e=>(new URL(e).pathname.split("/").pop()||"").split("?")[0],z=e=>{const s=B(e),a=s.lastIndexOf(".");return a>-1?s.substring(a+1).toLowerCase():""},A=(e,s)=>{let a=new Date;const r=s==="min"?"min":"max",o=e[r]||e.meta?.[r];if(o){const[t,l]=o.split("T");a=new Date(t);const[d,n,c]=l.split(":");a.setHours(d||0),a.setMinutes(n||0),a.setSeconds(c.split(".")[0]||0)}return a||""},$=e=>{const s=new Date,a=/^([01]\d|2[0-3]):([0-5]\d)$/.test(e);let r;if(a){const[o,t]=e.split(":").map(Number);r=new Date(s),r.setHours(o,t,0,0)}else r=new Date(s),r.setHours(23,59,59,999);return r},ie=(e,s,a)=>{const r=m=>m<10?"0"+m:m;s&&e&&(e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0)),a&&(e.setHours(23),e.setMinutes(59),e.setSeconds(59),e.setMilliseconds(99));const o=e.getFullYear(),t=r(e.getMonth()+1),l=r(e.getDate()),d=r(e.getHours()),n=r(e.getMinutes()),c=r(e.getSeconds()),i=(e.getMilliseconds()/1e3).toFixed(3).slice(2,5);return`${o}-${t}-${l}T${d}:${n}:${c}.${i}Z`},le=e=>{if(e){const s=e.getHours().toString().padStart(2,"0"),a=e.getMinutes().toString().padStart(2,"0");return`${s}:${a}`}return""},x=(e,s,a)=>{const r=[e],o=new Set,t=[];for(;r.length>0;){const l=r.pop();if(o.has(l))continue;o.add(l);const n=s.filter(i=>i.target===l).map(i=>i.source),c=a.filter(i=>n.includes(i.id));t.push(...c),r.push(...n)}return t},P=(e,s)=>e.filter(t=>s?t.type===s:["options","question","http"].includes(t.type)).map(t=>t.data.property).filter(t=>!t||t.trim()===""?!1:/^[a-zA-Z0-9-_]+$/.test(t.trim())),I=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e);function Z(e){return e.charAt(0).toUpperCase()+e.slice(1)}const ne=e=>{const s={};return e.errors={},e.message?(e.message.length<3||e.message.length>1500)&&(s.message="Error in Message Node",e.errors.message="Message must be between 3 and 1500 characters"):(s.message="Error in Message Node",e.errors.message="Message is required"),s},ce=(e,s,a,r)=>{const o={};s.errors={};let t=[];const l=x(e.id,r,a);t=P(l,"http"),c(s.message||"","message",-1,o,s.errors),n("dataSource",s.dataSource||"",-1,t,s.dataSource,o,s.errors),(s.subOptions||[]).forEach((i,m)=>{const g={};n("title",i.title,m,t,null,o,g,(p,h,E,b,w)=>c(p,h,E,b,w)),s.dataSource&&!i.isLink&&n("value",i.value,m,t,null,o,g,(p,h,E,b,w)=>c(p,h,E,b,w));const T=new Set;if(i.leadEmailTo){const p=i.leadEmailTo.trim();I(p)?T.has(p)?(o[`leadEmailTo_${m}`]="Duplicate Lead Email To",g.leadEmailTo="Duplicate Lead Email To"):T.add(p):(o[`leadEmailTo_${m}`]="Lead Email To must be a valid email",g.leadEmailTo="Lead Email To must be a valid email")}i.leadEmailCc&&Array.isArray(i.leadEmailCc)&&i.leadEmailCc.forEach((p,h)=>{const E=p.trim();I(E)?T.has(E)?(o[`subOptions[${m}].leadEmailCc[${h}]`]="Duplicate email in Lead Email Cc",g.leadEmailCc="Duplicate email in Lead Email Cc"):T.add(E):(o[`subOptions[${m}].leadEmailCc[${h}]`]="Invalid email format",g.leadEmailCc="Invalid email format")}),s.subOption=g});function n(i,m,g,T,p,h,E,b){if(!(b&&!b(m,i,g,h,E))&&p){const w=m.indexOf("."),N=w!==-1?m.slice(0,w):m;T.includes(N)||(h[`${i}_${g}`]=`Invalid property: ${N} is not in the properties list`,E[i]=`Invalid property: ${N} is not in the properties list`)}}function c(i,m,g,T,p){if(!i||i.length<1||i.length>500){const h=`${Z(m)} must be between 1 and 500 characters`;return T[`${m}_${g}`]=h,p[m]=h,!1}return!0}return o},de=e=>{const s={};e.errors={};const a=e.subUrls||[];return a.forEach((r,o)=>{const t={};if(o!==a.length-1&&!v(r.url)){const d="Url must be a valid URL (starting with http, https, or ftp)";s[`url_${o}`]=d,t.url=d}const l=new Set;if(r.leadEmailTo){const d=r.leadEmailTo.trim();I(d)?l.has(d)?(s[`leadEmailTo_${o}`]="Duplicate Lead Email To",r.leadEmailTo="Duplicate Lead Email To"):l.add(d):(s[`leadEmailTo_${o}`]="Lead Email To must be a valid email",t.leadEmailTo="Lead Email To must be a valid email")}r.leadEmailCc&&Array.isArray(r.leadEmailCc)&&r.leadEmailCc.forEach((d,n)=>{const c=d.trim();I(c)?l.has(c)?(s[`subUrls[${o}].leadEmailCc[${n}]`]="Duplicate email in Lead Email Cc",t.leadEmailCc="Duplicate email in Lead Email Cc"):l.add(c):(s[`subUrls[${o}].leadEmailCc[${n}]`]="Invalid email format",t.leadEmailCc="Invalid email format")}),e.subUrl=t}),s},me=e=>{const s={};e.errors={},e.message?(e.message.length<3||e.message.length>1500)&&(s.message="Error in File Node",e.errors.message="Message must be between 3 and 1500 characters"):(s.message="Error in File Node",e.errors.message="Message is required");const a=Array.isArray(e.urls)&&e.urls.every(o=>v(o));a||(s.message="Error in File Node",e.errors.urls="Invalid image URL"),e.fileType||(s.message="Error in File Node",e.errors.fileType="File type is required");const r=e.files&&G(e.files,e.fileType);return(a&&e.urls?.length===0&&!r||!a&&!r)&&(s.message="Error in File Node",e.errors.fileOrUrl="Either valid URLs or valid files must be provided"),s},ue=e=>{const s={};return e.errors={},e.message?(e.message.length<3||e.message.length>500)&&(s.message="Error in Maps Node",e.errors.message="Message must be between 3 and 500 characters"):(s.message="Error in Maps Node",e.errors.message="Message is required"),(!e.url||!v(e.url))&&(s.message="Error in Maps Node",e.errors.url="URL must be valid"),s},G=(e,s)=>{if(!e||e.length===0)return!1;const r={pdf:["pdf","application/pdf"],"application/pdf":["pdf","application/pdf"],images:["jpg","jpeg","png","gif"],"image/*":["jpg","jpeg","png","gif"],video:["mp4","avi","mov"],"video/*":["mp4","avi","mov"]}[s];return e.every(o=>{const t=o.name.split(".").pop()?.toLowerCase();return Array.isArray(r)?r.includes(t||""):t===r})},v=e=>/^(http|https|ftp):\/\/[^\s/$.?#].[^\s]*$/i.test(e),pe=(e,s)=>{switch(s=s?.trim(),e){case"message":if(!s)return"Message is required";if(s.length<3)return"Message must be at least 3 characters";if(s.length>500)return"Message must be at most 500 characters";break;case"title":if(!s)return"Title is required";if(s.length<1)return"Title must be at least 1 characters";if(s.length>500)return"Title must be at most 500 characters";break;case"leadEmailTo":if(s&&!/\S+@\S+\.\S+/.test(s))return"Lead Email To is invalid";break;case"leadEmailCc":if(s&&!/\S+@\S+\.\S+/.test(s))return"Lead Email CC is invalid";break}return""},fe=e=>{const s={};switch(e.errors={},e.message||(s.message="Error in Question Node",e.errors.message="A message is required"),e.fieldType||(s.message="Error in Question Node",e.errors.fieldType="Question Type is required"),e.property&&(/^[a-zA-Z0-9-_]+$/.test(e.property.trim())||(s.message="Error in Question Node",e.errors.property="Property can only contain alphanumeric characters, hyphens (-), and underscores (_), and should not have spaces.")),e.fieldType){case u.DATE:{const a=y().startOf("day"),r=y().add(3,"months").endOf("day"),o=e.min?y(e.min).startOf("day"):a,t=e.max?y(e.max).endOf("day"):r;o&&o.isBefore(a)&&(s.message="Error in Question Node",e.errors.min="Min date cannot be before today."),t&&t.isAfter(r)&&(s.message="Error in Question Node",e.errors.max="Max date cannot be more than 3 months from today."),o&&t&&o.isAfter(t)&&(s.message="Error in Question Node",e.errors.min="Min date cannot be after Max date.");break}case u.DATETIME:{const a=e.min?y(e.min):null,r=e.max?y(e.max):null,o=y().startOf("day"),t=y().add(3,"months").endOf("day");a&&a.isBefore(o)&&(s.message="Error in Question Node",e.errors.min="Min datetime cannot be before today."),r&&r.isAfter(t)&&(s.message="Error in Question Node",e.errors.max="Max datetime cannot be more than 3 months from today."),a&&r&&a.isAfter(r)&&(s.message="Error in Question Node",e.errors.min="Min datetime cannot be after Max datetime.");break}case u.TIME:{const a=e.min?y(e.min):null,r=e.max?y(e.max):null,o=y().startOf("day"),t=y().endOf("day");a&&a.isBefore(o)&&(s.message="Error in Question Node",e.errors.min="Min time cannot be before today."),r&&r.isAfter(t)&&(s.message="Error in Question Node",e.errors.max="Max time cannot be after today."),a&&r&&a.isAfter(r)&&(s.message="Error in Question Node",e.errors.min="Min time cannot be after Max time.");break}case"custom":e.custom||(s.message="Error in Question Node",e.errors.custom="A custom regex is required.");break;case"string":case"number":case"age":{const a=e.min?parseInt(e.min,10):void 0,r=e.max?parseInt(e.max,10):void 0,o=J(a,r,e.fieldType);o&&(s.message="Error in Question Node",e.errors.answer=o);break}}return s},ge=e=>{const s={};if(e.errors={},e.property&&(/^[a-zA-Z0-9-_]+$/.test(e.property.trim())||(s.message="Error in WhatsApp Flow Node",e.errors.property="Property can only contain alphanumeric characters, hyphens (-), and underscores (_), and should not have spaces.")),e.body?.trim()||(s.message="Error in WhatsApp Flow Node",e.errors.body="Body is required"),e.flow_id?.trim()||(s.message="Error in WhatsApp Flow Node",e.errors.flow_id="Flow ID is required"),e.flow_action?.trim()||(s.message="Error in WhatsApp Flow Node",e.errors.flow_action="Flow Action is required"),e.screen?.trim()||(s.message="Error in WhatsApp Flow Node",e.errors.screen="First Screen is required"),e.flow_cta?.trim()?e.flow_cta.length>30&&(s.message="Error in WhatsApp Flow Node",e.errors.flow_cta="Submit Button text must be at most 30 characters"):(s.message="Error in WhatsApp Flow Node",e.errors.flow_cta="Submit Button text is required"),!e.responsedata)s.message="Error in WhatsApp Flow Node",e.errors.responsedata="Response Data is required";else try{const a=typeof e.responsedata=="string"?JSON.parse(e.responsedata):e.responsedata;(typeof a!="object"||a===null)&&(s.message="Error in WhatsApp Flow Node",e.errors.responsedata="Must be a valid JSON object")}catch{s.message="Error in WhatsApp Flow Node",e.errors.responsedata="Invalid JSON format"}return s},J=(e,s,a)=>{if(e&&typeof e!="number"||s&&typeof s!="number")return`Both min and max values must be valid numbers for ${a}.`;if(e&&s&&e>s)return`Min value cannot be greater than Max value for ${a}.`;if(a==="string"){if(e&&e<3)return"Min length for string must be at least 3.";if(s&&s>2500)return"Max length for string must not exceed 500."}if(a==="number"){if(e&&(e<1||e>9999999999))return`Min value for ${a} must be between 1 and ${9999999999}.`;if(s&&(s<1||s>9999999999))return`Max value for ${a} must be between 1 and ${9999999999}.`}return""},he=e=>{const s={};return e.errors={},["message","successMessage","failureMessage"].forEach(a=>F(e[a],a,s,"Call Connect",e)),["callConnectId","callAccepted","callRejected"].forEach(a=>F(e[a],a,s,"Call Connect",e,!1)),s},ye=e=>{const s={};return e.errors={},F(e.message,"message",s,"OTP",e),F(e.otpType,"otpType",s,"OTP",e,!1),s},Ee=(e,s,a,r,o)=>{let t="";switch(e){case"message":s?s.length<3?t="Message must be at least 3 characters":s.length>500&&(t="Message must be at most 500 characters"):t="Message is required";break;case"property":s?s.length<3?t="Property must be at least 3 characters":s.length>500?t="Property must be at most 500 characters":/^[A-Za-z][\w]*$/.test(s)?o?.has(s)&&(t="Property name must be unique"):t='Property must start with a letter, cannot contain spaces, or special characters like "@", and should not start with a number':t="Property is required";break;case"title":s?s.length<3?t="Title must be at least 1 character":s.length>500&&(t="Title must be at most 500 characters"):t="Title is required";break;case"whatsAppQuestion":s?s.length<3?t="whatsAppQuestion must be at least 1 character":s.length>500&&(t="whatsAppQuestion must be at most 500 characters"):t="whatsAppQuestion is required";break;case"fieldType":s||(t="Field Type is required");break;case"custom":a===e&&(s||(t="A custom regex is required."));break}return t};function F(e,s,a,r,o,t=!0){e?t&&(e.length<3||e.length>500)&&(a.message=`Error in ${s} Node`,o.errors[s]=`${s} must be between 3 and 500 characters`):(a.message=`Error in ${r} Node`,o.errors[s]=`${s} is required`)}const Te=(e,s,a)=>{const r=e.data,o={},t={};r.errors={};let l=[];const d=x(e.id,a,s);if(l=P(d),!r.url||r.url.length===0)o.message="Error in HTTP Node";else{const n=r.url.match(/\{(.*?)\}/);if(n){const c=n[1]?.trim();(!/^[a-zA-Z0-9-_]+$/.test(c)||l.length==0||!l.includes(c))&&(t.url="HTTP Node - Property can only contain alphanumeric characters, hyphens (-), and underscores (_), and should not have spaces.")}}return(!r.requestType||r.requestType.length===0)&&(o.message="Error in HTTP Node"),r.statusWiseFlow.length&&r.statusWiseFlow.forEach(n=>{n.statusCode||(o.message="Error in HTTP Node")}),r.params.length&&(r.errors.params=[],r.params.forEach((n,c)=>{const i=C(n,c,l,"Param",o);i&&Object.keys(i).length>0&&r.errors.params.push({index:c,errors:i.errors})})),r.headers.length&&(r.errors.headers=[],r.headers.forEach((n,c)=>{const i=C(n,c,l,"Header",o);i&&Object.keys(i).length>0&&r.errors.headers.push({index:c,errors:i.errors})})),r.successFlowId||(o.message="Error in HTTP Node",r.errors.successFlowStatusCode="HTTP Node - Success flow statusCode is mandatory"),r.failureFlowId||(o.message="Error in HTTP Node",r.errors.failureFlowStatusCode="HTTP Node - Failure flow statusCode is mandatory"),r.statusWiseFlow&&r.statusWiseFlow.length>0&&(r.errors.statusWiseFlow=[],r.statusWiseFlow.forEach((n,c)=>{n.statusCode||r.errors.statusWiseFlow.push({index:c,message:"HTTP Node - Status code is mandatory"})})),{newErrors:o,newWarnings:t}},C=(e,s,a,r,o)=>{const t={},{key:l,valueType:d,value:n}=e;if(l||(t.key=`${r} - Key is mandatory`,o.message="Error in HTTP Node"),d||(t.valueType=`${r} - ValueType is mandatory`,o.message="Error in HTTP Node"),n?d==="number"&&isNaN(Number(n))?(t.value=`${r} - Value is not a valid Number`,o.message="Error in HTTP Node"):d==="date"&&!(n instanceof Date)&&(t.value=`${r} - Value is not a valid Date`,o.message="Error in HTTP Node"):(t.value=`${r} - Value is mandatory`,o.message="Error in HTTP Node"),(d=="param"||d=="header")&&Object.keys(t)?.length===0){const c=n.trim();c?(!/^[A-Za-z][\w]*$/.test(c)||a.length===0||!a.includes(c))&&(t.property=`${r} - Property must contain only alphanumeric characters, hyphens (-), underscores (_), and no spaces.`,o.message="Error in HTTP Node"):(t.property=`${r} - Property must contain only alphanumeric characters, hyphens (-), underscores (_), and no spaces.`,o.message="Error in HTTP Node")}return Object.keys(t).length>0?{index:s,errors:t}:null};export{u as F,D as H,se as S,ee as a,P as b,X as c,pe as d,I as e,x as f,f as g,ae as h,v as i,oe as j,le as k,re as l,te as m,ne as n,ce as o,de as p,ge as q,me as r,ue as s,ie as t,fe as u,Ee as v,he as w,ye as x,Te as y};
