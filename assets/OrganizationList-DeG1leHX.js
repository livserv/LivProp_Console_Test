import{j as t,h as b,r as l,R as c,c as P}from"./AlertSnackbar-BZv5XCa6.js";import{c as g,n as U,f as H,j as I}from"./index-BmF1FII0.js";import{F as K,b as m}from"./formik.esm-B6xhVahS.js";import"./Button-G0N6qh_I.js";import{T as o}from"./Toggle-BSMpY5YT.js";import{P as R}from"./ProgressButton-BXdCpKCq.js";import{u as C}from"./organization-DGedQ_Gd.js";import{S as _}from"./settings-p1J7tnGZ.js";/* empty css                */import{T as A}from"./Table-BKnbalQl.js";import{B as S}from"./Button-Bp3KLPoL.js";import{S as E}from"./SelectButton-ByD8lbJm.js";import{T as V}from"./TextBox-DOuaDUpj.js";import{s as W}from"./utils-BPLOM7gE.js";import{P as q}from"./PageHeader-Dxt-ivdX.js";import{S as G}from"./download-3fltnL9L.js";import{S as J}from"./TableFooter-Dn6rnFKD.js";import"./env-CmL5wTXD.js";import"./LabelWrapper-COY-wAmE.js";import"./SelectBox-1plhzATO.js";import"./useSelectedBot-De1owT-_.js";function Q({organizationId:h,consoleDisplaySettings:i={},onDone:d}){const p={hideTrainingTab:i?.hideTrainingTab||!1,hideSettingsTab:i?.hideSettingsTab||!1,hideKBTab:i?.hideKBTab||!1,hideMediaTab:i?.hideMediaTab||!1,hideDesignTab:i?.hideDesignTab||!1,hideFlowDesignTab:i?.hideFlowDesignTab??!0},u=async s=>{try{await C({settings:s},h),b(!0,"Console display settings updated successfully","success"),d()}catch{b(!0,"Not able to update the console display settings. Try after sometime!","error")}};return t.jsx(K,{initialValues:p,onSubmit:u,children:({values:s,handleChange:n,isSubmitting:r,handleSubmit:x})=>t.jsxs("form",{onSubmit:x,className:"space-y-4",children:[t.jsx("div",{className:"text-lg font-semibold border-b pb-2",children:"Console Settings"}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{children:"Hide Settings"}),t.jsx(m,{as:o,name:"hideSettingsTab",checked:s.hideSettingsTab,onChange:()=>n({target:{name:"hideSettingsTab",value:!s.hideSettingsTab}})})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{children:"Hide Knowledge Base"}),t.jsx(m,{as:o,name:"hideKBTab",checked:s.hideKBTab,onChange:()=>n({target:{name:"hideKBTab",value:!s.hideKBTab}})})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{children:"Hide Conversation Media"}),t.jsx(m,{as:o,name:"hideMediaTab",checked:s.hideMediaTab,onChange:()=>n({target:{name:"hideMediaTab",value:!s.hideMediaTab}})})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{children:"Hide Bot Design"}),t.jsx(m,{as:o,name:"hideDesignTab",checked:s.hideDesignTab,onChange:()=>n({target:{name:"hideDesignTab",value:!s.hideDesignTab}})})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{children:"Hide Bot Flow"}),t.jsx(m,{as:o,name:"hideFlowDesignTab",checked:s.hideFlowDesignTab,onChange:()=>n({target:{name:"hideFlowDesignTab",value:!s.hideFlowDesignTab}})})]}),t.jsx("div",{className:"flex justify-end pt-4",children:t.jsx(R,{isLoading:r,disabled:r,type:"submit",children:"Update"})})]})})}const v=[{value:0,label:"Organization List"},{value:1,label:"Organization Invoice"}];function fe(){const[h,i]=l.useState(1),[d,p]=l.useState(10),u=[{field:"name",title:"Name",sortable:!0},{field:"websiteUrl",title:"Website",cellClassName:g("max-w-[250px]"),hideBelow:"lg",template:e=>!!e.websiteUrl&&t.jsx("a",{href:e.websiteUrl,target:"_blank",title:e.websiteUrl,rel:"noreferrer noopener",children:U(e.websiteUrl)})},{field:"email",title:"Email",cellClassName:g("max-w-[250px]"),hideBelow:"sm"},{field:"registeredAt",title:"Registered Date",hideBelow:"xl",sortable:!0},{field:"credits",title:"Credits",hideBelow:"lg",sortable:!0},{field:"managed",title:"Managed",cellClassName:g("text-center"),hideBelow:"md",template:e=>t.jsx(o,{checked:e.handledByLivServ,containerClassName:"mx-auto",onChange:a=>k(a,e._id)})},{field:"",title:"",cellClassName:g("text-center"),template:e=>t.jsx(S,{icon:t.jsx(_,{}),type:"plain",onClick:()=>D(e._id,e.settings)})}],[s,n]=l.useState(""),[r,x]=c.useState(v[0]),w=P(e=>e.organizationList),[f,N]=c.useState(),[,y]=l.useState(!1),[B,L]=l.useState(),j=c.useMemo(()=>w.map(e=>({_id:e._id,name:e.organizationName,websiteUrl:e.websiteUrl,email:e.admins.map(a=>a.email).join(", "),registeredAt:I(e.registeredAt),credits:H(e.availableCredits),handledByLivServ:e.handledByLivServ,settings:e.settings})),[w]),D=(e,a)=>{N(e),L(a),y(!0)},z=e=>W(t.jsx(Q,{organizationId:e,consoleDisplaySettings:B,onDone:()=>y(!1)}),{showCloseButton:!0,width:"700px"});l.useEffect(()=>{f&&z(f)},[f]);const k=async(e,a)=>{const M=e,O=a;try{await C({handledByLivServ:M},O),b(!0,"Handled by LivServ updated successfully","success")}catch{b(!0,"Not able to update the Handled by LivServ. Try after sometime!","error")}},T=c.useMemo(()=>{const e=s?.toLowerCase()?.trim();return e?j.filter(a=>a.name?.toLowerCase().includes(e)||a.email?.toLowerCase().includes(e)||a.websiteUrl?.toLowerCase().includes(e)):j},[s,j]),F=c.useMemo(()=>{const e=(h-1)*d,a=e+d;return T.slice(e,a)},[T,h,d]);return t.jsxs("div",{children:[t.jsx(q,{title:"Organizations"}),t.jsxs("div",{className:"flex flex-col gap-3",children:[t.jsxs("div",{className:"flex justify-between py-2",children:[t.jsxs("div",{className:"pt-2",children:[!r?.value&&t.jsx("span",{className:"text-sm font-semibold",children:"Organization List"}),!!r?.value&&t.jsx("span",{className:"text-sm font-semibold",children:"Organization Invoice"}),t.jsx(E,{value:r,onChange:x,items:v,iconOnly:!0,className:"bg-primary pt-0 ps-0 pb-0 pr-0 text-white ms-2 align-middle"})]}),t.jsxs("div",{className:"flex justify-between items-center py-2 px-2",children:[t.jsx(V,{value:s,placeholder:"Search",onChange:e=>n(e.target.value),iconRight:J}),t.jsx(S,{icon:t.jsx(G,{}),size:"sm",type:"secondary",className:"mx-2 align-middle"})]})]}),t.jsx(A,{rows:F,columns:u,totalRows:T?.length,pagination:!0,onChange:({pageNumber:e,count:a})=>{i(e),p(a)}})]})]})}export{fe as default};
