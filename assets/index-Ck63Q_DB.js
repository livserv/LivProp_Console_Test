import{R as P,j as E}from"./index-CrfK1Bx0.js";import{k as T,l as w}from"./ajax-HqDwPv2n.js";import{L as K,S as M,T as k}from"./TextBox-CRDP_KU8.js";import{c as B}from"./Button-B6Zh4FlD.js";const $=P.createContext({}),R=$.Provider;function F(u,r){const{valueFieldProp:o="value",hasErrorFieldProp:x="hasError",errorMessageFieldProp:s="errorMessage",changeHandler:t,defaultProps:c}={};return function(n){const e=P.useContext($),{[o]:i,onChange:f,...p}=n,a=p,d=P.useRef({field:n.field,onChange:f,form:e,changeHandler:t});d.current={field:n.field,onChange:f,form:e,changeHandler:t};const y=P.useCallback((h,m,...b)=>{const{form:g,onChange:v,field:j,changeHandler:C}=d.current;typeof C=="function"&&(h=C(h,m,...b),m=j||m),j&&(g!=null&&g.onChange)&&g.onChange(h,j,...b),v==null||v(h,m,...b)},[]);if(e!=null&&e.getProps&&n.field){const{[o]:h=i,hasError:m,isTouched:b,errorMessage:g,middleware:v}=e.getProps(n,r);d.current.middleware=v,a[o]=P.useMemo(()=>{const{middleware:j,field:C}=d.current;return j?j(h,C,!1):h},[h]),m&&b&&(a[x]=m),g&&b&&(a[s]=g)}else a.value=i;return E.jsx(u,{...c,...a,onChange:y})}}function S({label:u,iconLeft:r,iconRight:o,className:x,wrapperClassName:s,args:t,field:c,onChange:l,value:n,...e}){const i=E.jsx("textarea",{className:B("border-0 w-full h-full rounded-[8px] mt-[-5px] bg-transparent outline-none px-4 placeholder:text-pBlack placeholder:text-sm",x),onChange:f=>l==null?void 0:l(f.currentTarget.value,c,t),...e,children:n});return E.jsx(K,{label:u,iconLeft:r,iconRight:o,className:s,children:i})}function H(u,r){const o={hasError:!1};if(!u)return o;try{u.validateSync(r,{abortEarly:!1})}catch(x){const s=x.inner;o.hasError=!0,o.errors=s.reduce((t,c)=>(t[c.path]=c.message,t),{})}return o}function O(u){const r=P.useRef({props:u,touched:{}});r.current.props=u,r.current.errors=u.errors||r.current.errors;const{value:o}=u,x=P.useMemo(()=>({onChange:(s,t,c)=>{const{field:l,args:n,middleware:e,onChange:i,validator:f}=r.current.props,p=l?`${l}.${t}`:t,a=T(o,p,e?e(s,t,!0):s),d=H(f,a);r.current.errors=d,r.current.touched[t]=!0,i(a,l,{fieldArgs:c,field:t,args:n,errors:d})},getProps:(s,t)=>{var a,d;const{field:c,middleware:l}=r.current.props,{valueFieldProp:n="value"}=t||{},{field:e,[n]:i}=s;if(!e)return{[n]:i};const f=c?`${c}.${e}`:e,p=(d=(a=r.current.errors)==null?void 0:a.errors)==null?void 0:d[e];return{[n]:w(o,f),hasError:!!p,isTouched:r.current.touched[e],middleware:l,errorMessage:p}},setValue:(s,t)=>{if(!s||typeof s!="object")return;const{field:c,args:l,middleware:n,onChange:e,validator:i}=r.current.props,f=Object.keys(s);if(!f.length)return;const p=f.reduce((d,y)=>{const h=s[y],m=c?`${c}.${y}`:y;return T(d,m,n?n(h,y,!0):h)},o),a=i==null?void 0:i.validate(p);r.current.errors=a,e(p,c,{fieldArgs:t,args:l,errors:a})},getErrors:()=>r.current.errors}),[o]);return E.jsx(R,{value:x,children:u.children})}const G=F(M),q=F(S),z=F(k);export{O as F,z as a,G as b,F as c,q as d};
