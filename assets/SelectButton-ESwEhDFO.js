import{r,j as o}from"./index-76FBFgXB.js";import{c as f}from"./Button-Bm5UGBgp.js";import{R as N}from"./ajax-w58snP7s.js";function P({className:j,prefix:b,iconOnly:y=!1,items:l,onChange:w,value:u}){const[a,i]=r.useState(!1),[p,g]=r.useState("bottom"),[h,n]=r.useState(-1),[c,C]=r.useState(!1),s=r.useRef(null),m=r.useRef(null),d=r.useCallback(()=>{C(window.innerWidth<640)},[]);r.useEffect(()=>(d(),window.addEventListener("resize",d),()=>window.removeEventListener("resize",d)),[d]),r.useEffect(()=>{const e=t=>{m.current&&!m.current.contains(t.target)&&s.current&&!s.current.contains(t.target)&&(i(!1),n(-1))};return a?document.addEventListener("mousedown",e):document.removeEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[a]);const x=()=>{if(s.current&&!c){const e=s.current.getBoundingClientRect(),t=window.innerHeight-e.bottom,k=200;t<k&&e.top>k?g("top"):g("bottom")}},E=()=>{if(a||x(),i(!a),!a){const e=u?l.indexOf(u):0;n(e>0?e:0)}},v=e=>{if(!a){(e.key==="ArrowDown"||e.key==="ArrowUp")&&(i(!0),n(0),x(),e.preventDefault());return}switch(e.key){case"ArrowDown":e.preventDefault(),n(t=>t<l.length-1?t+1:0);break;case"ArrowUp":e.preventDefault(),n(t=>t>0?t-1:l.length-1);break;case"Enter":{e.preventDefault();const t=l[h];t&&w(t),i(!1),n(-1);break}case"Escape":e.preventDefault(),i(!1),n(-1);break}},D=o.jsxs("div",{ref:m,onKeyDown:v,tabIndex:-1,className:f("bg-white shadow-lg rounded border",c?"fixed inset-0 flex items-center justify-center z-50":"absolute z-50",!c&&p==="bottom"&&"mt-2",!c&&p==="top"&&"mb-2"),style:c?{}:s.current?{left:s.current.getBoundingClientRect().left,top:p==="bottom"?s.current.getBoundingClientRect().bottom+window.scrollY:s.current.getBoundingClientRect().top+window.scrollY-210}:{},children:[c&&o.jsx("div",{className:"absolute top-2 right-2",children:o.jsx("button",{onClick:()=>i(!1),"aria-label":"Close menu",className:"text-gray-700 hover:text-gray-900",children:"Ã—"})}),o.jsx("div",{className:f("overflow-auto",c?"w-[90%] h-[80%] p-4":"p-0"),children:l.map((e,t)=>o.jsx("div",{onClick:()=>{w(e),i(!1),n(-1)},onMouseEnter:()=>n(t),className:f("cursor-pointer px-4 py-2 text-sm hover:bg-gray-100 focus:outline-none",h===t&&"bg-gray-200",{"border-t":!!t}),children:e.label},e.value))}),c&&o.jsx("div",{onClick:()=>i(!1),className:"fixed inset-0 bg-black opacity-30"})]});return o.jsxs(o.Fragment,{children:[o.jsxs("button",{ref:s,type:"button",onClick:E,onKeyDown:v,className:f("relative inline-flex items-center justify-between p-2 text-xs border rounded focus:outline-none focus:ring",j),children:[!!b&&o.jsx("span",{className:"mr-2",children:b}),!y&&o.jsx("span",{className:"mr-2",children:u?u.label:""}),o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),a&&N.createPortal(D,document.body)]})}export{P as S};
