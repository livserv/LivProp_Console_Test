import{r as n,u as Z,e as N,b as v,j as e}from"./index-D9EAXeej.js";import{h as T,s as D}from"./utils-B3TvvZ68.js";import{g as F}from"./integrations-CvlVSduv.js";import{u as A}from"./useSelectedBot-BsZe7P_X.js";import{p as L}from"./ajax-wCsmuh_l.js";import{c as y}from"./Button-DTFiuQ8U.js";import{K as R,g as V}from"./KbDocsList-Crr-2pkp.js";import{S as P,u as I}from"./send-DYCoVWY9.js";import{B as b}from"./Button-C9z3UuRd.js";import{T as W}from"./TextBox-DzsTYOnp.js";/* empty css                */import z from"./index-CgFNuRQW.js";import"./env-CmL5wTXD.js";import"./delete-XozlUeXQ.js";import"./edit-Bb1HVPwL.js";import"./plus-Xu9rY7qE.js";import"./PageHeader-DNq8bGdK.js";import"./organization-D1B1wS2G.js";import"./index-Cpgm9e8l.js";import"./ProgressButton-BBjWnCqI.js";import"./hoist-non-react-statics.cjs-DkdlIQ-e.js";import"./index-C2Z25x6i.js";import"./svg-icons-BHnUf74W.js";import"./env-CBDBHzQq.js";import"./test-chat-utils-DoyuiXkb.js";import"./PopUpDialog-CTv9VEM6.js";const $=["Upload Document","Create Theme","Reviews & Generate"],G=t=>n.createElement("svg",{width:22,height:22,viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},n.createElement("path",{d:"M11.1221 2.43842V2.44444H4.87833C3.54227 2.44444 2.44444 3.54114 2.44444 4.88251V17.1175C2.44444 18.4617 3.53765 19.5556 4.88251 19.5556H17.1175C18.4611 19.5556 19.5556 18.4604 19.5556 17.1116V12.1945C19.5703 11.5323 20.112 11 20.7778 11C21.4435 11 21.985 11.5323 21.9997 12.1945L22 17.1116C22 19.8114 19.8101 22 17.1175 22H4.88251C2.18597 22 0 19.8101 0 17.1175V4.88251C0 2.18597 2.19739 0 4.87833 0H11.1221V0.00602383C11.7398 0.0672926 12.2222 0.588418 12.2222 1.22222C12.2222 1.85603 11.7398 2.37715 11.1221 2.43842ZM14.1857 11.1312L15.6982 12.6436L11.8659 16.4759C10.5074 17.8344 8.15672 17.3902 6.52931 15.7628C4.90897 14.1425 4.45828 11.7842 5.81205 10.4304L9.64854 6.59391L11.1609 8.10634L7.32446 11.9428C6.98082 12.2865 7.18267 13.3426 8.06608 14.2261C8.95597 15.1159 10.0031 15.3138 10.3535 14.9635L14.1857 11.1312ZM17.238 11.1038L15.7256 9.59137L19.5578 5.75914C19.9082 5.40878 19.7103 4.36159 18.8204 3.4717C17.937 2.5883 16.8808 2.38645 16.5372 2.73008L12.7007 6.56657L11.1883 5.05414L15.0248 1.21765C16.3785 -0.136113 18.7369 0.3146 20.3572 1.93494C21.9846 3.56235 22.4288 5.91301 21.0703 7.27155L17.238 11.1038ZM14.2324 6.54731C14.6528 6.12686 15.3294 6.12168 15.7499 6.54223C16.1676 6.95988 16.1746 7.63 15.7448 8.05974L12.6571 11.1474C12.2367 11.5679 11.5602 11.5731 11.1396 11.1525C10.722 10.7349 10.7149 10.0647 11.1447 9.63501L14.2324 6.54731Z",fill:"white"}));function K(){var g;const t=Z(),[a]=A(),s=N(l=>l.botsList),r=v(l=>l.organizationId);n.useEffect(()=>{(async()=>{const o={organizationId:r,botId:a};try{await F(o)}catch{console.error("Error fetching integrations:")}})()},[a,r]);const p=(((g=s.find(l=>l._id===a))==null?void 0:g.integrations)||[]).filter(l=>l.channelName==="Webchat"),d=p.length>0?p[0].scriptTag:"",m=()=>{navigator.clipboard.writeText(d),t("/bots"),T()};return e.jsx("div",{className:"fixed inset-0 bg-opacity-50 p-8 flex justify-center items-center ",children:e.jsxs("div",{className:"relative card bg-white w-[70%] mx-auto p-6 rounded-lg text-center p-8",children:[e.jsx("div",{className:"text-fBlue text-4xl font-thin my-6 text-center",children:"Registration Successfully Completed"}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"text-black font-bold text-lg mb-1",children:"To Activate The Chat Window"}),e.jsxs("p",{className:"text-sm",children:["Copy And Paste The Produced Chat Code Into Your Website's HTML File, Just Above The Closing ",e.jsx("b",{children:"</body>"})," Tag."]})]}),e.jsxs("div",{className:"flex flex-col items-center space-y-6",children:[e.jsx("input",{readOnly:!0,value:d,className:"w-full max-w-xl h-12 shadow-md rounded bg-white px-3 cursor-pointer outline-none border border-gray-200 text-gray-700 text-base",onFocus:l=>l.target.select()}),e.jsx("button",{className:"bg-[#2ED47A] rounded-full w-16 h-16 flex items-center justify-center shadow-md hover:bg-[#24b865] transition",onClick:m,title:"Copy to clipboard",type:"button",children:e.jsx(G,{className:"w-10 h-10"})})]})]})})}function Y({onClose:t,setPhoneNumber:a=()=>{}}){const[s,r]=n.useState(["","","","","","","","","",""]),[i,p]=n.useState(""),d=n.useRef(Array(s.length).fill(null));n.useEffect(()=>{d.current[0]&&d.current[0].focus()},[]);const m=(o,c)=>{var f;if(!/^\d*$/.test(c)||c.length>1)return;const u=[...s];u[o]=c,r(u),a(u.join("")),p(""),c&&o<s.length-1&&((f=d.current[o+1])==null||f.focus())},g=(o,c)=>{var u;if(c.key==="Backspace"&&s[o]===""&&o>0){(u=d.current[o-1])==null||u.focus();const f=[...s];f[o-1]="",r(f),c.preventDefault()}},l=()=>{const o=s.join("");if(s.length<10){p("Please enter a valid 10-digit mobile number.");return}console.log("Entered number:",o),p(""),t()};return e.jsxs("div",{className:"bg-white w-auto text-center  py-4",children:[e.jsxs("p",{className:"text-lg font-semibold text-gray-700",children:["Kindly Help Us To Verify Your Mobile No ",e.jsx("br",{})," Before Generating Code."]}),e.jsxs("div",{className:"flex items-center justify-center mt-4 space-x-2",children:[e.jsxs("div",{className:"flex items-center border px-2 py-2 rounded-md",children:[e.jsx("span",{className:"mr-2",children:"ðŸ‡®ðŸ‡³"}),e.jsx("select",{className:"border-none focus:outline-none",children:e.jsx("option",{value:"+91",children:"+91"})})]}),s.map((o,c)=>e.jsx("input",{type:"text",maxLength:1,value:o,ref:u=>{d.current[c]=u},onChange:u=>m(c,u.target.value),onKeyDown:u=>g(c,u),className:"w-10 h-10 text-center border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",inputMode:"numeric",pattern:"[0-9]*"},c))]}),i&&e.jsx("div",{className:"text-red-500 text-sm mt-2",children:i}),e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsx(b,{icon:e.jsx(P,{}),size:"lg",type:"rounded",className:"bg-green-400 hover:bg-green-500 text-white p-4",onClick:l})})]})}function J({activeIndex:t,onNavigate:a,phoneNumber:s,setPhoneNumber:r}){const[i]=n.useState(!1);return n.useEffect(()=>{!i&&!s&&D(e.jsx(Y,{onClose:()=>T(),setPhoneNumber:r}),{showCloseButton:!0,width:"700px"})},[i,s]),e.jsx("div",{className:"mt-10",children:e.jsx(R,{activeIndex:t,onNavigate:a})})}const O=t=>n.createElement("svg",{width:27,height:24,viewBox:"0 0 27 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.8921 7.00306V15.4789H22.582C25.0193 15.4789 27 13.3967 27 10.8435C27 9.41924 26.3874 8.09586 25.3195 7.21232C24.248 6.32636 22.8715 6.00484 21.5437 6.33383C21.4102 6.36622 21.2768 6.27775 21.2481 6.13694C20.533 2.58072 17.4867 0 14.0054 0C10.8743 0 8.07002 2.07226 7.02592 5.15633C6.98183 5.28967 6.84 5.35945 6.71248 5.31209C3.44442 4.08844 0 6.61674 0 10.2403C0 13.1276 2.23352 15.479 5.01178 15.479H11.1079V7.00312C11.1079 6.86231 11.2176 6.74767 11.3523 6.74767H15.6476C15.7823 6.74767 15.8921 6.86225 15.8921 7.00306ZM15.4034 17.6685C15.4034 17.8093 15.513 17.924 15.6477 17.924H18.3794L13.5001 24L8.6207 17.924H11.3524C11.4871 17.924 11.5967 17.8093 11.5967 17.6685V7.25858H15.4036L15.4034 17.6685Z",fill:"#8B959A"}));async function X(t){const{organizationId:a}=v.getState(),{selectedBotId:s}=N.getState(),r=await L(`/bot/${a}/${s}/add-training-media`,t);r.trainingMedia?s?I(s,{trainingMedia:r.trainingMedia}):console.error("Bot ID is undefined."):console.warn("trainingMedia is null or undefined.")}async function _(t){const{organizationId:a}=v.getState(),{selectedBotId:s}=N.getState(),r=new FormData;if(r.append("file",t),!(!a||!s))try{const i=await L(`/bot/${a}/${s}/add-training-media`,r);I(s,{trainingMedia:i.trainingMedia}),await q(s,a)}catch{throw new Error("File upload failed. Please try again.")}}async function q(t,a){const s=await L(`/bot/${a}/${t}/knowledge-base/train`,{});return v.setState(r=>{const i={...r.kbDocs||{}};return delete i[t],{kbDocs:i}}),V().catch(r=>console.error("Error fetching Knowledge base content:",r)),s}function Q({activeIndex:t,onNavigate:a,selectedFile:s,webPageURL:r,setSelectedFile:i,setWebPageURL:p}){const[,d]=A(),m=d==null?void 0:d.trainingMedia,[g,l]=n.useState(null),[o,c]=n.useState(null),[u,f]=n.useState(null),[S,C]=n.useState(!1),M=()=>{l(null),c(null),f(null)},U=x=>{M(),x.target.files&&x.target.files.length>0&&i(x.target.files[0])},H=async(x,w)=>{if(M(),C(!0),!x&&!(typeof w=="string"&&w.trim())){f("Please provide either a file to upload or a webpage URL."),C(!1);return}try{let h=!1;if(x)if(!m.some(E=>E.originalName===x.name))await _(x),h=!0;else{c("The file already uploaded! Please select another file."),C(!1);return}if(typeof w=="string"&&w.trim()){const j=w.trim();if(!m.some(B=>{var k;return((k=B.url)==null?void 0:k.toLowerCase())===j.toLowerCase()}))await X({url:j,useBrowser:!1}),h=!0;else{l("This URL is already available in the Training Documents! Please add another URL."),C(!1);return}}h&&a(t+1)}catch(h){f((h==null?void 0:h.message)||"Error uploading the document."),a(t)}finally{C(!1)}};return e.jsxs("div",{className:"mt-8 max-w-lg mx-auto py-10 space-y-3",children:[e.jsx(W,{value:r,wrapperClassName:"border-black h-9",label:"Webpage Url",placeholder:"Train Your Bot Using Website Scraping",onChange:x=>p(x.target.value)}),g&&e.jsx("div",{className:"text-xs text-red-500 mt-1",children:g}),e.jsx("div",{className:"text-center text-sm",children:"or"}),e.jsx(ee,{placeholder:"Train Your Bot Using Files (.csv, .pdf, .docx, .txt)",onFileChange:U}),o&&e.jsx("div",{className:"text-xs text-red-500 mt-1",children:o}),e.jsxs("div",{className:"flex justify-between items-center text-xs mt-1",children:[s&&e.jsx("span",{className:"text-left text-gray-700",children:s.name}),e.jsx("span",{className:"text-end",children:"Maximum Size: 30MB"})]}),u&&e.jsx("div",{className:"text-xs text-center text-red-500 mt-1",children:u}),e.jsxs("div",{className:"flex flex-row justify-between items-center border border-dotted border-mildBlueAlt py-2 bg-gray-100 rounded-lg w-full h-12",children:[e.jsx("span",{className:"text-black text-xs ml-2",children:" You can download the attached example file to scrape your own file "}),e.jsx(b,{icon:e.jsx(O,{}),type:"plain",className:"mr-2"})]}),e.jsx("div",{className:"flex mt-12 justify-end",children:e.jsx(b,{label:S?"Uploading...":"NEXT",onClick:()=>H(s,r),disabled:S})})]})}function ee({placeholder:t,onFileChange:a}){const s=n.useRef(null),r=()=>{var i;return(i=s.current)==null?void 0:i.click()};return e.jsxs("div",{className:"border border-dotted border-mildBlueAlt rounded-lg py-2 sm:py-4 bg-mildBlueBG w-full min-h-[80px] flex flex-col items-center justify-center text-center space-y-2 sm:space-y-3",children:[e.jsx("span",{className:"text-pBlack text-sm sm:text-base",children:t}),e.jsx(b,{label:"Select File",type:"secondary",size:"sm",className:"mx-auto block",onClick:r}),e.jsx("input",{type:"file",ref:s,style:{display:"none"},onChange:a,accept:".csv,.txt,.docx,.doc,.pdf,text/plain"})]})}const te=t=>n.createElement("svg",{width:10,height:10,viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},n.createElement("path",{d:"M6.89468 6.20212C6.52917 5.76309 6.06874 5.53811 5.51535 5.42991C5.09131 5.34788 4.84171 4.90846 4.99361 4.50731C5.33063 3.61909 5.04938 2.67734 4.27724 2.10828C3.51143 1.54387 2.52526 1.54543 1.76497 2.11179C-0.0241743 3.4449 -0.547915 5.92013 0.63364 7.86689C1.7515 9.70936 3.97932 10.414 5.8915 9.76166C7.52125 9.20623 7.81829 7.31144 6.89468 6.20212ZM2.20167 7.57543C1.71948 7.4559 1.42557 6.97156 1.54622 6.4954C1.66765 6.01771 2.15934 5.72943 2.63998 5.84818C3.12217 5.9677 3.41608 6.45204 3.29543 6.9282C3.17439 7.40434 2.68388 7.69456 2.20167 7.57543ZM3.1269 3.01364C3.60948 3.13317 3.90339 3.61633 3.78196 4.09367C3.66091 4.56981 3.17041 4.86003 2.6882 4.74089C2.20561 4.62098 1.9117 4.13899 2.03314 3.66087C2.15299 3.18668 2.63836 2.89412 3.1269 3.01364ZM5.20201 8.63945C4.61816 8.63945 4.1842 8.09691 4.32742 7.53253C4.43184 7.12084 4.80526 6.85836 5.20043 6.85836C5.70754 6.85836 6.1039 7.26536 6.1039 7.74735C6.1039 8.24341 5.69567 8.63945 5.20201 8.63945ZM9.86575 7.22235L7.87175 2.76326C7.95363 2.65507 8.02128 2.53476 8.07191 2.40548C8.28077 1.8727 7.88006 1.31175 7.30847 1.28796C6.8508 1.26882 6.47343 0.946959 6.12063 0.274726C5.91138 -0.124076 5.32001 -0.0787693 5.17839 0.346205C4.96084 0.997329 5.05418 1.97029 5.27808 2.47026C5.47111 2.90148 5.84651 3.19794 6.2753 3.31004L8.3251 7.89412C8.91488 9.21393 10.4616 8.55345 9.86584 7.22229L9.86575 7.22235ZM5.54935 2.35239C5.35196 1.9114 5.26691 1.01698 5.45995 0.438425C5.51968 0.259137 5.76889 0.243128 5.8571 0.410302C6.17316 1.01221 6.61262 1.55242 7.29577 1.58092C7.66601 1.59654 7.92946 1.95589 7.79497 2.30001C7.40613 3.29213 5.9861 3.32968 5.54935 2.35239Z",fill:"#107DA6"})),se=t=>n.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},n.createElement("path",{d:"M13 17L18 12L13 6.99998M6 17L11 12L6 6.99998",stroke:"#0074A0",strokeWidth:2.5,strokeLinecap:"round",strokeLinejoin:"round"})),ne=t=>n.createElement("svg",{width:11,height:9,viewBox:"0 0 11 9",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},n.createElement("path",{d:"M9.83366 1.24998L3.87533 7.20832L1.16699 4.49998",stroke:"#0074A0",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})),re=t=>n.createElement("svg",{width:13,height:10,viewBox:"0 0 13 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},n.createElement("path",{d:"M6.5 0C7.46715 0 8.43578 0.367478 9.17369 1.10538C9.79996 1.73165 10.1607 2.52338 10.2555 3.33975C11.7954 3.47956 13 4.77248 13 6.34884C13 8.01852 11.6464 9.37209 9.97674 9.37209H2.56977C1.14612 9.37209 0 8.22598 0 6.80233C0 5.37867 1.14612 4.23256 2.56977 4.23256H2.74927C2.61607 3.12085 2.97789 1.95851 3.83104 1.10538C4.56891 0.367478 5.53285 0 6.5 0ZM6.5 3.17442C6.41976 3.17412 6.36342 3.18919 6.29687 3.25L4.63408 4.76163C4.51579 4.86777 4.49405 5.0749 4.61047 5.19149C4.72275 5.30397 4.92298 5.31753 5.04034 5.21038L6.19767 4.15698V7.40698C6.19767 7.57395 6.333 7.7093 6.5 7.7093C6.667 7.7093 6.80233 7.57395 6.80233 7.40698V4.15698L7.95966 5.21038C8.07702 5.31753 8.28286 5.30929 8.38953 5.19149C8.49619 5.07367 8.49016 4.86977 8.36592 4.76163L6.70313 3.25C6.65993 3.21043 6.58086 3.17593 6.5 3.17442Z",fill:"#107DA6"}));function ae({steps:t,activeIndex:a,completedStep:s,className:r,style:i,onChange:p}){return e.jsx("div",{className:y("w-full",r),style:i,children:e.jsx("div",{className:"flex flex-row flex-wrap justify-center items-center gap-2 sm:gap-4",children:t.map((d,m)=>{const g=m===a,l=y("flex items-center justify-center rounded-full border transition-colors duration-200",{"border-primary bg-primary/10 text-primary":g,"border-gray-300 bg-white text-gray-500":!g}),o=m===0?re:m===1?te:ne;return e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:m<=s?()=>p(m):void 0,type:"button",className:y("flex items-center px-2 py-1 sm:px-4 sm:py-2 m-2 sm:m-4 text-xs sm:text-base",l),children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(o,{className:"w-6 h-6 sm:w-8 sm:h-8 p-1 sm:p-2 border rounded-full"}),e.jsx("span",{className:"truncate max-w-[60px] sm:max-w-none",children:d})]})}),m!==t.length-1&&e.jsx(se,{className:"w-5 h-5 sm:w-7 sm:h-7 text-gray-400"})]},m)})})})}function De(){const[t,a]=n.useState(0),[s,r]=n.useState(0),[i,p]=n.useState(null),[d,m]=n.useState(""),[g,l]=n.useState("");n.useEffect(()=>{t===3&&D(e.jsx(K,{}))},[t]);const o=c=>{a(c),s<c&&r(c)};return e.jsxs("div",{className:"bot-setup",children:[e.jsx(ae,{className:"my-[20px]",steps:$,activeIndex:t,completedStep:s,onChange:a}),!t&&e.jsx(Q,{activeIndex:t,onNavigate:o,selectedFile:i,webPageURL:d,setSelectedFile:p,setWebPageURL:m}),t===1&&e.jsx(z,{activeIndex:t,onNavigate:o}),t===2&&e.jsx(J,{activeIndex:t,onNavigate:o,phoneNumber:g,setPhoneNumber:l})]})}export{De as default};
