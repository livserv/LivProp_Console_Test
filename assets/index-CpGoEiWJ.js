import{R as P,j as E}from"./index-CCQKC7kY.js";import{g as T,h as w}from"./utils-BxUv4Y9r.js";import{S as K}from"./SelectBox-DfR1pBT0.js";import{c as M}from"./Button-DesRcnRR.js";import{L as B}from"./LabelWrapper-DRfKGVWW.js";import{T as R}from"./TextBox-CMb0MYZx.js";const $=P.createContext({}),k=$.Provider;function F(u,r){const{valueFieldProp:n="value",hasErrorFieldProp:m="hasError",errorMessageFieldProp:s="errorMessage",changeHandler:t,defaultProps:c}={};return function(o){const e=P.useContext($),{[n]:i,onChange:f,...p}=o,a=p,d=P.useRef({field:o.field,onChange:f,form:e,changeHandler:t});d.current={field:o.field,onChange:f,form:e,changeHandler:t};const y=P.useCallback((h,g,...b)=>{const{form:x,onChange:v,field:j,changeHandler:C}=d.current;typeof C=="function"&&(h=C(h,g,...b),g=j||g),j&&(x!=null&&x.onChange)&&x.onChange(h,j,...b),v==null||v(h,g,...b)},[]);if(e!=null&&e.getProps&&o.field){const{[n]:h=i,hasError:g,isTouched:b,errorMessage:x,middleware:v}=e.getProps(o,r);d.current.middleware=v,a[n]=P.useMemo(()=>{const{middleware:j,field:C}=d.current;return j?j(h,C,!1):h},[h]),g&&b&&(a[m]=g),x&&b&&(a[s]=x)}else a.value=i;return E.jsx(u,{...c,...a,onChange:y})}}function S({label:u,iconLeft:r,iconRight:n,className:m,wrapperClassName:s,args:t,field:c,onChange:l,value:o,...e}){const i=E.jsx("textarea",{className:M("border-0 w-full h-full rounded-[8px] mt-[-5px] bg-transparent outline-none px-4 placeholder:text-pBlack placeholder:text-sm",m),onChange:f=>l==null?void 0:l(f.currentTarget.value,c,t),...e,children:o});return E.jsx(B,{label:u,iconLeft:r,iconRight:n,className:s,children:i})}function H(u,r){const n={hasError:!1};if(!u)return n;try{const m=u.validateSync(r,{abortEarly:!1});console.log(m)}catch(m){const s=m.inner;n.hasError=!0,n.errors=s.reduce((t,c)=>(t[c.path]=c.message,t),{})}return n}function q(u){const r=P.useRef({props:u,touched:{}});r.current.props=u,r.current.errors=u.errors||r.current.errors;const{value:n}=u,m=P.useMemo(()=>({onChange:(s,t,c)=>{const{field:l,args:o,middleware:e,onChange:i,validator:f}=r.current.props,p=l?`${l}.${t}`:t,a=T(n,p,e?e(s,t,!0):s),d=H(f,a);r.current.errors=d,r.current.touched[t]=!0,i(a,l,{fieldArgs:c,field:t,args:o,errors:d})},getProps:(s,t)=>{var a,d;const{field:c,middleware:l}=r.current.props,{valueFieldProp:o="value"}=t||{},{field:e,[o]:i}=s;if(!e)return{[o]:i};const f=c?`${c}.${e}`:e,p=(d=(a=r.current.errors)==null?void 0:a.errors)==null?void 0:d[e];return{[o]:w(n,f),hasError:!!p,isTouched:r.current.touched[e],middleware:l,errorMessage:p}},setValue:(s,t)=>{if(!s||typeof s!="object")return;const{field:c,args:l,middleware:o,onChange:e,validator:i}=r.current.props,f=Object.keys(s);if(!f.length)return;const p=f.reduce((d,y)=>{const h=s[y],g=c?`${c}.${y}`:y;return T(d,g,o?o(h,y,!0):h)},n),a=i==null?void 0:i.validate(p);r.current.errors=a,e(p,c,{fieldArgs:t,args:l,errors:a})},getErrors:()=>r.current.errors}),[n]);return E.jsx(k,{value:m,children:u.children})}const z=F(K),D=F(S),I=F(R);export{q as F,z as a,I as b,F as c,D as d};
