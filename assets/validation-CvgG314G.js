import{m as E}from"./index-CrvO-MG2.js";const p={STRING:"string",NUMBER:"number",DATE:"date",DATETIME:"datetime",TIME:"time",PHONE_NUMBER:"phone",EMAIL:"email",CUSTOM:"custom"},ne=["GET","POST","PUT"],ce=["text","number","date","param","header"],de=[{value:p.STRING,label:"Any Text"},{value:p.NUMBER,label:"Number"},{value:p.DATE,label:"Date"},{value:p.DATETIME,label:"Date & time"},{value:p.TIME,label:"Time only"},{value:p.PHONE_NUMBER,label:"Phone number"},{value:p.EMAIL,label:"Email Address"},{value:p.CUSTOM,label:"Custom value"}],me=["YYYY-MM-DD","DD-MM-YYYY","MM-DD-YYYY","DD/MM/YYYY","MM/DD/YYYY","YYYY/MM/DD"],R={jpg:"image/*",jpeg:"image/*",png:"image/*",gif:"image/*",mp4:"video/*",avi:"video/*",mov:"video/*",wmv:"video/*",mp3:"audio/*",wav:"audio/*",pdf:"application/pdf"},N=[{id:y(),type:"start",data:{message:"Chat Window Opened"},position:{x:10,y:10}}],W=y(),V=y();function y(e=12){const s="abcdefghijklmnopqrstuvwxyz0123456789";let t="";const r=s.length,a=Date.now().toString(36);for(let o=0;o<e;o++)t+=s.charAt(Math.floor(Math.random()*r));return a+t}const pe=e=>{var s;if(e&&((s=e.flows)==null?void 0:s.length)>0){let t=O(e);const r=X(e);return t=[...N,...t],{flowNodes:t,flowEdges:r}}return{flowNodes:[...N],flowEdges:[]}},O=e=>e.flows.map((t,r)=>({id:t.flowId,type:t.type,data:B(t),position:K(t,r,e)})),B=e=>{var r,a,o,i,n,m,d,l,c,f,T,u,g,h,M,w,I,C,x,L,S,P,k,_;const s={};switch(["message","leadForm","gpt","leadFlow","stop","file","map","question","callConnect","otp","customForm","options"].includes(e.type)&&(s.message=typeof e.content=="string"?e.content:e.content[0]),e.type){case"options":s.fieldLabel=e.fieldLabel,s.fallback=e.fallback?e.fallback:(r=e.meta)==null?void 0:r.fallback,s.dataSource=e.dataSource?e.dataSource:(a=e.meta)==null?void 0:a.dataSource,s.property=e.property,s.subOptions=G(e.children);break;case"file":s.fileType=(o=e.meta)==null?void 0:o.type,(i=e.meta)!=null&&i.media&&(z(e.meta.media,e)||!e.meta.media[0].name)?(s.urls=e.meta.media.map(v=>v.url),s.files=[]):(s.urls=[],s.files=(n=e.meta)!=null&&n.media?e.meta.media:[],s.fileType||(s.fileType=(m=e.meta)!=null&&m.media?ee(e.meta.media):""));break;case"map":s.url=(l=(d=e.meta)==null?void 0:d.url)==null?void 0:l.trim();break;case"question":s.fieldLabel=e.fieldLabel,s.property=e.property,s.dateFormat=((c=e.meta)==null?void 0:c.dateFormat)||"",s.errorMessage=((f=e.meta)==null?void 0:f.errorMessage)||"";const b=e.fieldType?e.fieldType:(T=e.meta)==null?void 0:T.type;s.fieldType=b,(b&&b===p.DATE||b===p.DATETIME)&&(s.min=(u=e.meta)!=null&&u.min?q(e,"min"):s.min,s.max=(g=e.meta)!=null&&g.max?q(e,"max"):s.max),b&&b===p.TIME?(s.min=(h=e.meta)!=null&&h.min?Y((M=e.meta)==null?void 0:M.min):(w=e.meta)==null?void 0:w.min,s.max=(I=e.meta)!=null&&I.min?Y((C=e.meta)==null?void 0:C.max):(x=e.meta)==null?void 0:x.max):(b&&b===p.STRING||b===p.NUMBER)&&(s.min=e.min?e.min:(L=e.meta)==null?void 0:L.min,s.max=e.min?e.min:(S=e.meta)==null?void 0:S.max),b===p.CUSTOM&&(s.custom=e.custom?e.custom:(P=e.meta)==null?void 0:P.custom);break;case"http":if(s.property=e.property||"",e.meta){s.displayText=e.meta.displayText||"",s.requestType=e.meta.requestType||"",s.hideData=e.meta.hideData||!1,s.url=((k=e.meta.url)==null?void 0:k.trim())||"",s.params=e.meta.params||[],s.headers=e.meta.headers||[],s.successFlowId=e.meta.successFlowId?e.meta.successFlowId:y(),s.failureFlowId=e.meta.failureFlowId?e.meta.failureFlowId:y();const v=(_=e.meta.statusWiseFlowId)==null?void 0:_.map(H=>({statusCode:H.statusCode||"",id:H.flowId||""}));s.statusWiseFlow=v||[]}break;case"callConnect":e.meta&&(s.callConnectId=e.meta.callConnectId,s.callAccepted=e.meta.callAccepted,s.callRejected=e.meta.callRejected,s.successMessage=e.meta.successMessage,s.failureMessage=e.meta.failureMessage);break;case"otp":e.meta&&(s.otpType=e.meta.otpType);break;case"customForm":s.property=e.property,e.meta&&(s.customFields=Z(e.meta.customFields));break;case"url":s.fieldLabel=e.fieldLabel,s.property=e.property,s.subUrls=J(e.children);break;case"whatsAppFlow":s.fieldLabel=e.fieldLabel,s.property=e.property,e.meta&&(s.header=e.meta.header,s.body=e.meta.body,s.footer=e.meta.footer,s.flow_token=e.meta.flow_token,s.flow_id=e.meta.flow_id,s.flow_action=e.meta.flow_action,s.flow_cta=e.meta.flow_cta,s.screen=e.meta.screen,s.responsedata=e.meta.responsedata);break}return s},z=(e,s)=>e!=null&&e.files?(s.meta.media=e.files,!0):!1,Z=(e=[])=>e.map(s=>({id:s.id,title:s.title,property:s.property,whatsAppQuestion:s.whatsAppQuestion,fieldType:s.fieldType,dateFormat:s==null?void 0:s.dateFormat,min:s==null?void 0:s.min,max:s==null?void 0:s.max,custom:s==null?void 0:s.custom,isCollapsed:!1})),G=(e=[])=>e.map(s=>({id:s.flowId?s.flowId:s.id,title:s.title,subTitle:s.subTitle,value:s.value,imageUrl:s.imageUrl,category:s.category,isLink:s.isLink,description:s.description,leadEmailTo:s.leadEmailTo?s.leadEmailTo:"",leadEmailCc:s.leadEmailCc?[...s.leadEmailCc]:[],isCollapsed:!1})),J=(e=[])=>e.map(s=>({id:s.flowId?s.flowId:s.id,url:s.url,value:s.value,leadEmailTo:s.leadEmailTo?s.leadEmailTo:"",leadEmailCc:s.leadEmailCc?[...s.leadEmailCc]:[],isCollapsed:!1})),K=(e,s,t)=>{var a;let r={x:s+150,y:s+50};return e.flowId&&t.positions&&(r=((a=t.positions.find(o=>o.nodeId===e.flowId))==null?void 0:a.position)||r),r},X=e=>{let s={};e!=null&&e.startFlowId&&(s={id:N[0].id,source:N[0].id,target:e==null?void 0:e.startFlowId,type:"custom"});const t=e.flows;let r=t.filter(a=>a.nextFlowId).map(a=>({id:`e-${a.flowId}-${a.nextFlowId}`,source:a.flowId,target:a.nextFlowId,type:"custom"}));return t.forEach(a=>{var o;if(a.children&&a.children.length>0&&a.children.forEach(i=>{i.nextFlowId&&r.push({id:`e-${i.flowId?i.flowId:i.id}-${i.nextFlowId}`,source:a.flowId,target:i.nextFlowId,type:"custom",sourceHandle:i.flowId?i.flowId:i.id})}),a.type==="http"&&a.meta){const i=a.meta;i.successFlowId&&r.push({id:`e-${W}-${i.successFlowId}`,source:a.flowId,target:i.successFlowId,type:"custom",sourceHandle:i.successFlowId}),i.failureFlowId&&r.push({id:`e-${V}-${i.failureFlowId}`,source:a.flowId,target:i.failureFlowId,type:"custom",sourceHandle:i.failureFlowId}),(o=i.statusWiseFlowId)==null||o.forEach(n=>{n.nextFlowId&&r.push({id:`e-${n.flowId?n.flowId:""}-${n.nextFlowId}`,source:a.flowId,target:n.nextFlowId,type:"custom",sourceHandle:n.flowId})})}}),t.forEach(a=>{a.children&&a.children.length>0&&a.children.forEach(o=>{o.nextFlowId&&r.push({id:`e-${o.flowId?o.flowId:o.id}-${o.nextFlowId}`,source:a.flowId,target:o.nextFlowId,type:"custom",sourceHandle:o.flowId?o.flowId:o.id})})}),r=Object.keys(s).length>0?[s,...r]:[...r],r},ue=(e,s)=>{const t=e.dataTransfer.getData("application/reactflow");return{id:y(),type:t,position:s,data:{message:""},...t==="options"&&{data:{fieldLabel:"",property:"",message:"",fallback:"",subOptions:[{id:y(),title:"",subTitle:"",value:"",leadEmailTo:"",leadEmailCc:[],category:"",description:"",isCollapsed:!0,isLink:!1}]}},...t==="file"&&{data:{message:"",fileType:"pdf",urls:[],files:[]}},...t==="map"&&{data:{message:"",url:""}},...t==="leadForm"&&{data:{message:"This will display lead form for the visitor"}},...t==="gpt"&&{data:{message:"From here on visitors would be handled by GPT"}},...t==="question"&&{data:{message:"",fieldLabel:"",property:"",type:"",meta:{min:"",max:"",regex:"",errorMessage:""}}},...t==="http"&&{data:{propertyName:"",displayText:"",url:"",requestType:"",hideData:!1,params:[],headers:[],successFlowId:y(),failureFlowId:y(),statusWiseFlow:[]}},...t==="callConnect"&&{data:{message:"",meta:{callConnectId:"",callAccepted:"",callRejected:"",successMessage:"",failureMessage:""},callAcceptedId:y(),callRejectedId:y()}},...t==="otp"&&{data:{message:"",meta:{otpType:""}}},...t==="customForm"&&{data:{property:"",message:"",customFields:[{id:y(),title:"",property:"",fieldType:"",isCollapsed:!0}]}},...t==="url"&&{data:{fieldLabel:"",property:"",subUrls:[{id:y(),url:"Default",value:"NA",leadEmailTo:"",leadEmailCc:[],isCollapsed:!0}]}},...t==="whatsAppFlow"&&{data:{fieldLabel:"",property:"",header:"",body:"",footer:"",flow_token:"",flow_id:"",flow_action:"navigate",flow_cta:"",screen:"",responsedata:""}}}},D=e=>R[e.toLowerCase()]||"",ee=e=>{const s=new Set;for(const t of e){const r=t.name.split(".").pop();if(r){const a=D(r);a&&s.add(a)}}return Array.from(s).join(", ")},se={pdf:"application/pdf",jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",gif:"image/gif",mp4:"video/mp4",mov:"video/mp4",avi:"video/mp4"},fe=e=>e==="application/pdf"||e==="pdf"?"pdf":e.startsWith("image/")?"image":e.startsWith("video/")?"video":"unknown",ge=e=>{const s=te(e);return se[s]||""},re=e=>(new URL(e).pathname.split("/").pop()||"").split("?")[0],te=e=>{const s=re(e),t=s.lastIndexOf(".");return t>-1?s.substring(t+1).toLowerCase():""},q=(e,s)=>{var o;let t=new Date;const r=s==="min"?"min":"max",a=e[r]||((o=e.meta)==null?void 0:o[r]);if(a){const[i,n]=a.split("T");t=new Date(i);const[m,d,l]=n.split(":");t.setHours(m||0),t.setMinutes(d||0),t.setSeconds(l.split(".")[0]||0)}return t||""},Y=e=>{const s=new Date,t=/^([01]\d|2[0-3]):([0-5]\d)$/.test(e);let r;if(t){const[a,o]=e.split(":").map(Number);r=new Date(s),r.setHours(a,o,0,0)}else r=new Date(s),r.setHours(23,59,59,999);return r},he=(e,s,t)=>{const r=c=>c<10?"0"+c:c;s&&e&&(e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0)),t&&(e.setHours(23),e.setMinutes(59),e.setSeconds(59),e.setMilliseconds(99));const a=e.getFullYear(),o=r(e.getMonth()+1),i=r(e.getDate()),n=r(e.getHours()),m=r(e.getMinutes()),d=r(e.getSeconds()),l=(e.getMilliseconds()/1e3).toFixed(3).slice(2,5);return`${a}-${o}-${i}T${n}:${m}:${d}.${l}Z`},ye=e=>{if(e){const s=e.getHours().toString().padStart(2,"0"),t=e.getMinutes().toString().padStart(2,"0");return`${s}:${t}`}return""},j=(e,s,t)=>{const r=[e],a=new Set,o=[];for(;r.length>0;){const i=r.pop();if(a.has(i))continue;a.add(i);const m=s.filter(l=>l.target===i).map(l=>l.source),d=t.filter(l=>m.includes(l.id));o.push(...d),r.push(...m)}return o},Q=(e,s)=>e.filter(o=>s?o.type===s:["options","question","http"].includes(o.type)).map(o=>o.data.property).filter(o=>!o||o.trim()===""?!1:/^[a-zA-Z0-9-_]+$/.test(o.trim())),F=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e);function ae(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Ee=e=>{const s={};return e.errors={},e.message?(e.message.length<3||e.message.length>1500)&&(s.message="Error in Message Node",e.errors.message="Message must be between 3 and 1500 characters"):(s.message="Error in Message Node",e.errors.message="Message is required"),s},Te=(e,s,t,r)=>{const a={};s.errors={};let o=[];const i=j(e.id,r,t);o=Q(i,"http"),d(s.message||"","message",-1,a,s.errors),m("dataSource",s.dataSource||"",-1,o,s.dataSource,a,s.errors),(s.subOptions||[]).forEach((l,c)=>{const f={};m("title",l.title,c,o,null,a,f,(u,g,h,M,w)=>d(u,g,h,M,w)),s.dataSource&&!l.isLink&&m("value",l.value,c,o,null,a,f,(u,g,h,M,w)=>d(u,g,h,M,w));const T=new Set;if(l.leadEmailTo){const u=l.leadEmailTo.trim();F(u)?T.has(u)?(a[`leadEmailTo_${c}`]="Duplicate Lead Email To",f.leadEmailTo="Duplicate Lead Email To"):T.add(u):(a[`leadEmailTo_${c}`]="Lead Email To must be a valid email",f.leadEmailTo="Lead Email To must be a valid email")}l.leadEmailCc&&Array.isArray(l.leadEmailCc)&&l.leadEmailCc.forEach((u,g)=>{const h=u.trim();F(h)?T.has(h)?(a[`subOptions[${c}].leadEmailCc[${g}]`]="Duplicate email in Lead Email Cc",f.leadEmailCc="Duplicate email in Lead Email Cc"):T.add(h):(a[`subOptions[${c}].leadEmailCc[${g}]`]="Invalid email format",f.leadEmailCc="Invalid email format")}),s.subOption=f});function m(l,c,f,T,u,g,h,M){if(!(M&&!M(c,l,f,g,h))&&u){const w=c.indexOf("."),I=w!==-1?c.slice(0,w):c;T.includes(I)||(g[`${l}_${f}`]=`Invalid property: ${I} is not in the properties list`,h[l]=`Invalid property: ${I} is not in the properties list`)}}function d(l,c,f,T,u){if(!l||l.length<1||l.length>500){const g=`${ae(c)} must be between 1 and 500 characters`;return T[`${c}_${f}`]=g,u[c]=g,!1}return!0}return a},we=e=>{const s={};e.errors={};const t=e.subUrls||[];return t.forEach((r,a)=>{const o={};if(a!==t.length-1&&!$(r.url)){const n="Url must be a valid URL (starting with http, https, or ftp)";s[`url_${a}`]=n,o.url=n}const i=new Set;if(r.leadEmailTo){const n=r.leadEmailTo.trim();F(n)?i.has(n)?(s[`leadEmailTo_${a}`]="Duplicate Lead Email To",r.leadEmailTo="Duplicate Lead Email To"):i.add(n):(s[`leadEmailTo_${a}`]="Lead Email To must be a valid email",o.leadEmailTo="Lead Email To must be a valid email")}r.leadEmailCc&&Array.isArray(r.leadEmailCc)&&r.leadEmailCc.forEach((n,m)=>{const d=n.trim();F(d)?i.has(d)?(s[`subUrls[${a}].leadEmailCc[${m}]`]="Duplicate email in Lead Email Cc",o.leadEmailCc="Duplicate email in Lead Email Cc"):i.add(d):(s[`subUrls[${a}].leadEmailCc[${m}]`]="Invalid email format",o.leadEmailCc="Invalid email format")}),e.subUrl=o}),s},be=e=>{var a;const s={};e.errors={},e.message?(e.message.length<3||e.message.length>1500)&&(s.message="Error in File Node",e.errors.message="Message must be between 3 and 1500 characters"):(s.message="Error in File Node",e.errors.message="Message is required");const t=Array.isArray(e.urls)&&e.urls.every(o=>$(o));t||(s.message="Error in File Node",e.errors.urls="Invalid image URL"),e.fileType||(s.message="Error in File Node",e.errors.fileType="File type is required");const r=e.files&&oe(e.files,e.fileType);return(t&&((a=e.urls)==null?void 0:a.length)===0&&!r||!t&&!r)&&(s.message="Error in File Node",e.errors.fileOrUrl="Either valid URLs or valid files must be provided"),s},Me=e=>{const s={};return e.errors={},e.message?(e.message.length<3||e.message.length>500)&&(s.message="Error in Maps Node",e.errors.message="Message must be between 3 and 500 characters"):(s.message="Error in Maps Node",e.errors.message="Message is required"),(!e.url||!$(e.url))&&(s.message="Error in Maps Node",e.errors.url="URL must be valid"),s},oe=(e,s)=>{if(!e||e.length===0)return!1;const r={pdf:["pdf","application/pdf"],"application/pdf":["pdf","application/pdf"],images:["jpg","jpeg","png","gif"],"image/*":["jpg","jpeg","png","gif"],video:["mp4","avi","mov"],"video/*":["mp4","avi","mov"]}[s];return e.every(a=>{var i;const o=(i=a.name.split(".").pop())==null?void 0:i.toLowerCase();return Array.isArray(r)?r.includes(o||""):o===r})},$=e=>/^(http|https|ftp):\/\/[^\s/$.?#].[^\s]*$/i.test(e),Ie=(e,s)=>{switch(s=s==null?void 0:s.trim(),e){case"message":if(!s)return"Message is required";if(s.length<3)return"Message must be at least 3 characters";if(s.length>500)return"Message must be at most 500 characters";break;case"title":if(!s)return"Title is required";if(s.length<1)return"Title must be at least 1 characters";if(s.length>500)return"Title must be at most 500 characters";break;case"leadEmailTo":if(s&&!/\S+@\S+\.\S+/.test(s))return"Lead Email To is invalid";break;case"leadEmailCc":if(s&&!/\S+@\S+\.\S+/.test(s))return"Lead Email CC is invalid";break}return""},Ne=e=>{const s={};switch(e.errors={},e.message||(s.message="Error in Question Node",e.errors.message="A message is required"),e.fieldType||(s.message="Error in Question Node",e.errors.fieldType="Question Type is required"),e.property&&(/^[a-zA-Z0-9-_]+$/.test(e.property.trim())||(s.message="Error in Question Node",e.errors.property="Property can only contain alphanumeric characters, hyphens (-), and underscores (_), and should not have spaces.")),e.fieldType){case p.DATE:{const t=E().startOf("day"),r=E().add(3,"months").endOf("day"),a=e.min?E(e.min).startOf("day"):t,o=e.max?E(e.max).endOf("day"):r;a&&a.isBefore(t)&&(s.message="Error in Question Node",e.errors.min="Min date cannot be before today."),o&&o.isAfter(r)&&(s.message="Error in Question Node",e.errors.max="Max date cannot be more than 3 months from today."),a&&o&&a.isAfter(o)&&(s.message="Error in Question Node",e.errors.min="Min date cannot be after Max date.");break}case p.DATETIME:{const t=e.min?E(e.min):null,r=e.max?E(e.max):null,a=E().startOf("day"),o=E().add(3,"months").endOf("day");t&&t.isBefore(a)&&(s.message="Error in Question Node",e.errors.min="Min datetime cannot be before today."),r&&r.isAfter(o)&&(s.message="Error in Question Node",e.errors.max="Max datetime cannot be more than 3 months from today."),t&&r&&t.isAfter(r)&&(s.message="Error in Question Node",e.errors.min="Min datetime cannot be after Max datetime.");break}case p.TIME:{const t=e.min?E(e.min):null,r=e.max?E(e.max):null,a=E().startOf("day"),o=E().endOf("day");t&&t.isBefore(a)&&(s.message="Error in Question Node",e.errors.min="Min time cannot be before today."),r&&r.isAfter(o)&&(s.message="Error in Question Node",e.errors.max="Max time cannot be after today."),t&&r&&t.isAfter(r)&&(s.message="Error in Question Node",e.errors.min="Min time cannot be after Max time.");break}case"custom":e.custom||(s.message="Error in Question Node",e.errors.custom="A custom regex is required.");break;case"string":case"number":case"age":{const t=e.min?parseInt(e.min,10):void 0,r=e.max?parseInt(e.max,10):void 0,a=ie(t,r,e.fieldType);a&&(s.message="Error in Question Node",e.errors.answer=a);break}}return s},Fe=e=>{var t,r,a,o,i;const s={};if(e.errors={},e.property&&(/^[a-zA-Z0-9-_]+$/.test(e.property.trim())||(s.message="Error in WhatsApp Flow Node",e.errors.property="Property can only contain alphanumeric characters, hyphens (-), and underscores (_), and should not have spaces.")),(t=e.body)!=null&&t.trim()||(s.message="Error in WhatsApp Flow Node",e.errors.body="Body is required"),(r=e.flow_id)!=null&&r.trim()||(s.message="Error in WhatsApp Flow Node",e.errors.flow_id="Flow ID is required"),(a=e.flow_action)!=null&&a.trim()||(s.message="Error in WhatsApp Flow Node",e.errors.flow_action="Flow Action is required"),(o=e.screen)!=null&&o.trim()||(s.message="Error in WhatsApp Flow Node",e.errors.screen="First Screen is required"),(i=e.flow_cta)!=null&&i.trim()?e.flow_cta.length>30&&(s.message="Error in WhatsApp Flow Node",e.errors.flow_cta="Submit Button text must be at most 30 characters"):(s.message="Error in WhatsApp Flow Node",e.errors.flow_cta="Submit Button text is required"),!e.responsedata)s.message="Error in WhatsApp Flow Node",e.errors.responsedata="Response Data is required";else try{const n=typeof e.responsedata=="string"?JSON.parse(e.responsedata):e.responsedata;(typeof n!="object"||n===null)&&(s.message="Error in WhatsApp Flow Node",e.errors.responsedata="Must be a valid JSON object")}catch{s.message="Error in WhatsApp Flow Node",e.errors.responsedata="Invalid JSON format"}return s},ie=(e,s,t)=>{if(e&&typeof e!="number"||s&&typeof s!="number")return`Both min and max values must be valid numbers for ${t}.`;if(e&&s&&e>s)return`Min value cannot be greater than Max value for ${t}.`;if(t==="string"){if(e&&e<3)return"Min length for string must be at least 3.";if(s&&s>2500)return"Max length for string must not exceed 500."}if(t==="number"){if(e&&(e<1||e>9999999999))return`Min value for ${t} must be between 1 and ${9999999999}.`;if(s&&(s<1||s>9999999999))return`Max value for ${t} must be between 1 and ${9999999999}.`}return""},Ae=e=>{const s={};return e.errors={},["message","successMessage","failureMessage"].forEach(t=>A(e[t],t,s,"Call Connect",e)),["callConnectId","callAccepted","callRejected"].forEach(t=>A(e[t],t,s,"Call Connect",e,!1)),s},ve=e=>{const s={};return e.errors={},A(e.message,"message",s,"OTP",e),A(e.otpType,"otpType",s,"OTP",e,!1),s},$e=(e,s,t,r,a)=>{let o="";switch(e){case"message":s?s.length<3?o="Message must be at least 3 characters":s.length>500&&(o="Message must be at most 500 characters"):o="Message is required";break;case"property":s?s.length<3?o="Property must be at least 3 characters":s.length>500?o="Property must be at most 500 characters":/^[A-Za-z][\w]*$/.test(s)?a!=null&&a.has(s)&&(o="Property name must be unique"):o='Property must start with a letter, cannot contain spaces, or special characters like "@", and should not start with a number':o="Property is required";break;case"title":s?s.length<3?o="Title must be at least 1 character":s.length>500&&(o="Title must be at most 500 characters"):o="Title is required";break;case"whatsAppQuestion":s?s.length<3?o="whatsAppQuestion must be at least 1 character":s.length>500&&(o="whatsAppQuestion must be at most 500 characters"):o="whatsAppQuestion is required";break;case"fieldType":s||(o="Field Type is required");break;case"custom":t===e&&(s||(o="A custom regex is required."));break}return o};function A(e,s,t,r,a,o=!0){e?o&&(e.length<3||e.length>500)&&(t.message=`Error in ${s} Node`,a.errors[s]=`${s} must be between 3 and 500 characters`):(t.message=`Error in ${r} Node`,a.errors[s]=`${s} is required`)}const Ce=(e,s,t)=>{var m;const r=e.data,a={},o={};r.errors={};let i=[];const n=j(e.id,t,s);if(i=Q(n),!r.url||r.url.length===0)a.message="Error in HTTP Node";else{const d=r.url.match(/\{(.*?)\}/);if(d){const l=(m=d[1])==null?void 0:m.trim();(!/^[a-zA-Z0-9-_]+$/.test(l)||i.length==0||!i.includes(l))&&(o.url="HTTP Node - Property can only contain alphanumeric characters, hyphens (-), and underscores (_), and should not have spaces.")}}return(!r.requestType||r.requestType.length===0)&&(a.message="Error in HTTP Node"),r.statusWiseFlow.length&&r.statusWiseFlow.forEach(d=>{d.statusCode||(a.message="Error in HTTP Node")}),r.params.length&&(r.errors.params=[],r.params.forEach((d,l)=>{const c=U(d,l,i,"Param",a);c&&Object.keys(c).length>0&&r.errors.params.push({index:l,errors:c.errors})})),r.headers.length&&(r.errors.headers=[],r.headers.forEach((d,l)=>{const c=U(d,l,i,"Header",a);c&&Object.keys(c).length>0&&r.errors.headers.push({index:l,errors:c.errors})})),r.successFlowId||(a.message="Error in HTTP Node",r.errors.successFlowStatusCode="HTTP Node - Success flow statusCode is mandatory"),r.failureFlowId||(a.message="Error in HTTP Node",r.errors.failureFlowStatusCode="HTTP Node - Failure flow statusCode is mandatory"),r.statusWiseFlow&&r.statusWiseFlow.length>0&&(r.errors.statusWiseFlow=[],r.statusWiseFlow.forEach((d,l)=>{d.statusCode||r.errors.statusWiseFlow.push({index:l,message:"HTTP Node - Status code is mandatory"})})),{newErrors:a,newWarnings:o}},U=(e,s,t,r,a)=>{var d;const o={},{key:i,valueType:n,value:m}=e;if(i||(o.key=`${r} - Key is mandatory`,a.message="Error in HTTP Node"),n||(o.valueType=`${r} - ValueType is mandatory`,a.message="Error in HTTP Node"),m?n==="number"&&isNaN(Number(m))?(o.value=`${r} - Value is not a valid Number`,a.message="Error in HTTP Node"):n==="date"&&!(m instanceof Date)&&(o.value=`${r} - Value is not a valid Date`,a.message="Error in HTTP Node"):(o.value=`${r} - Value is mandatory`,a.message="Error in HTTP Node"),(n=="param"||n=="header")&&((d=Object.keys(o))==null?void 0:d.length)===0){const l=m.trim();l?(!/^[A-Za-z][\w]*$/.test(l)||t.length===0||!t.includes(l))&&(o.property=`${r} - Property must contain only alphanumeric characters, hyphens (-), underscores (_), and no spaces.`,a.message="Error in HTTP Node"):(o.property=`${r} - Property must contain only alphanumeric characters, hyphens (-), underscores (_), and no spaces.`,a.message="Error in HTTP Node")}return Object.keys(o).length>0?{index:s,errors:o}:null};export{p as F,ce as H,me as S,de as a,Q as b,ne as c,Ie as d,F as e,j as f,y as g,fe as h,$ as i,ge as j,ye as k,pe as l,ue as m,Ee as n,Te as o,we as p,Fe as q,be as r,Me as s,he as t,Ne as u,$e as v,Ae as w,ve as x,Ce as y};
