import{q as B,r as f,p,t as h}from"./ajax-Dg5qCVW5.js";import{c,e as r}from"./index-DuC4Mltx.js";async function x(t){const{organization:{websiteUrl:n,_id:e}}=c.getState(),o={organizationId:e,websiteUrl:n,botName:t,botDesign:{visitorMessageLogo:{name:"",url:""},botMessageLogo:{name:"",url:""},botChatButton:{name:"",url:""},botLogo:{name:"",url:""},backgroundColor:"#e7a654",textColor:"#ffffff",dimensions:{heightInPixel:"500px",heightInPercent:"70%",widthInPixel:"350px",widthInPercent:"25%"},botLogoDimensions:{heightInPixel:"30px",heightInPercent:"100%",widthInPixel:"30px",widthInPercent:"100%"}},botSettings:{botCreationStatus:{step:0,status:!1}}},s=await p(`/bot/${e}`,o);g(s,!0)}async function u(t,n,e=!0){const{organizationId:o}=c.getState();if(!o||!t)throw new Error("Bot details not found");const s=await B(`/bot/${o}/${t}`,n);return g(s,e),s}function $(t,n){return u(t,{botName:n})}async function m(t){const{organizationId:n}=c.getState(),{selectedBotId:e}=r.getState(),o=await f(`/bot/${n}/${e}/update-logo/${t}`,null);return b(e,o),o[`botDesign.${t}`]}async function P(t){var s;const{organizationId:n,selectedBotId:e}=c.getState();if(!n||!t)throw new Error("Bot details not found");const{deleted:o}=await f(`/bot/${n}/${t}`,null);if(o){let{botsMap:a,botsList:i}=r.getState();a={...a},i=[...i],delete a[o];const d=i.findIndex(S=>S._id===o);d>=0&&i.splice(d,1);const l={botsMap:a,botsList:i};e===o&&(l.selectedBotId=((s=i[0])==null?void 0:s._id)||null),r.setState(l)}return!!o}function L(t,n){let{botDesign:e}=c.getState();return e={...e,...n},u(t,{botDesign:e})}function D(t,n){const{botsMap:e}=r.getState(),s={...((e==null?void 0:e[t])||{}).botSettings,...n};return u(t,{botSettings:s})}async function z(t,n){const{organizationId:e}=c.getState(),{selectedBotId:o}=r.getState(),s=new FormData;s.append("file",n);const a=await p(`/bot/${e}/${o}/update-logo/${t}`,s);return b(o,a),a[`botDesign.${t}`]}function g(t,n=!0){const e=t._id;let{botsMap:o,botsList:s}=r.getState();o={...o,[e]:t},s=[...s];const a=s.findIndex(d=>d._id===e);a>=0?s[a]=t:s.push(t);const i={botsMap:o,botsList:s};n&&(i.selectedBotId=e),r.setState(i)}function b(t,n){if(!t)return;const{botsMap:e}=r.getState(),o=e[t];if(!o)return;const s=Object.keys(n).reduce((a,i)=>h(a,i,n[i]),o);g(s)}export{u as a,$ as b,x as c,m as d,z as e,L as f,P as r,D as s,b as u};
