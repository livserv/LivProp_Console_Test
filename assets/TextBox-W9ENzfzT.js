import{j as r,r as l}from"./index-CKFRWpiY.js";import{c as p}from"./Button-DPlmeEM7.js";import{R as V}from"./ajax-Dnb_jTyI.js";function C({label:a,iconLeft:u,iconRight:s,children:f,className:h,...o}){const n=r.jsxs(r.Fragment,{children:[!!u&&r.jsx(u,{className:"absolute left-2 top-1/2 transform -translate-y-1/2"}),f,!!s&&r.jsx(s,{className:"absolute right-2 top-1/2 transform -translate-y-1/2"})]});return r.jsxs("div",{className:p("relative w-full ",h,{"border border-1 border-gray-300 rounded min-h-[30px] pt-[1px]":!a,"rounded-[8px] min-h-[55px]":!!a}),...o,children:[!a&&n,!!a&&r.jsxs("fieldset",{className:"relative border rounded-[8px] h-full w-full bg-white",children:[r.jsx("legend",{className:"text-labelBlue font-bold text-13px ms-3 px-1",children:a}),n]})]})}function $({label:a,placeholder:u="Choose here...",options:s=[],showFilter:f=s.length>10,showClear:h=!0,onChange:o=()=>{},value:n,className:j,multiple:c=!1}){const[i,w]=l.useState(!1),[x,E]=l.useState(""),[d,b]=l.useState(-1),[m,O]=l.useState(null),g=l.useRef(null),y=l.useRef(null),A=l.useRef(null),v=x?s.filter(e=>e.label.toString().toLowerCase().includes(x.toLowerCase())):s,P=s.find(e=>e.value===n),F=()=>w(e=>!e),D=()=>{w(!1),E(""),b(-1)},L=e=>c&&Array.isArray(n)?n.includes(e):n===e,R=e=>{if(c){let t=Array.isArray(n)?[...n]:[];t.includes(e.value)?t=t.filter(N=>N!==e.value):t.push(e.value),o(t)}else o(e.value),D()},H=e=>{e.stopPropagation(),o(c?[]:null)},z=()=>{if(c&&Array.isArray(n))return n.length===0?r.jsx("span",{className:"text-gray-400",children:u}):r.jsx("span",{children:s.filter(t=>n.includes(t.value)).map(t=>r.jsx("span",{className:"inline-block bg-gray-200 rounded px-2 py-1 mr-1 text-xs",children:t.label},t.value))});const e=s.find(t=>t.value===n);return e?e.label:r.jsx("span",{className:"text-gray-400",children:u})},S=()=>{if(g.current){const e=g.current.getBoundingClientRect(),t=200,N=window.innerHeight-e.bottom,B=e.top,k=N<t&&B>t,I=window.innerWidth<=640?window.innerWidth*.9:e.width,K=window.innerWidth<=640?window.innerHeight*.8:k?B:N;O({top:k?e.top-(k?t:0)+window.scrollY:e.bottom+window.scrollY,left:window.innerWidth<=640?window.innerWidth*.05:e.left+window.scrollX,maxHeight:K,width:I,dropUp:k})}};l.useEffect(()=>{const e=t=>{g.current&&!g.current.contains(t.target)&&y.current&&!y.current.contains(t.target)&&D()};return i?(document.addEventListener("mousedown",e),S(),b(-1)):(document.removeEventListener("mousedown",e),E("")),()=>{document.removeEventListener("mousedown",e)}},[i]),l.useEffect(()=>{const e=()=>{i&&S()};return window.addEventListener("resize",e),window.addEventListener("scroll",e,!0),()=>{window.removeEventListener("resize",e),window.removeEventListener("scroll",e,!0)}},[i]),l.useEffect(()=>{i&&A.current&&A.current.focus()},[i,f]),l.useEffect(()=>{if(d>=0&&y.current){const t=y.current.children[d];t&&t.scrollIntoView({block:"nearest"})}},[d]);const M=e=>{if(!i){(e.key==="ArrowDown"||e.key==="Enter")&&(w(!0),e.preventDefault());return}switch(e.key){case"ArrowDown":b(t=>Math.min(t+1,v.length-1)),e.preventDefault();break;case"ArrowUp":b(t=>Math.max(t-1,0)),e.preventDefault();break;case"Enter":d>=0&&d<v.length&&R(v[d]),e.preventDefault();break;case"Escape":D(),e.preventDefault();break}},W=r.jsxs(r.Fragment,{children:[r.jsxs("div",{ref:g,className:p("flex items-center justify-between cursor-pointer mt-[-4px]",!/h-\[?.*?\]?/g.test(j||"")&&"h-full w-full",j),onClick:F,onKeyDown:M,tabIndex:0,"aria-haspopup":"listbox","aria-expanded":i,children:[r.jsx("span",{className:p("flex-1 px-4 text-sm",c&&Array.isArray(n)&&n.length>0||P?"text-black":"text-pBlack"),children:z()}),h&&(c&&Array.isArray(n)&&n.length>0||!c&&n)&&r.jsx("button",{onClick:H,className:"ml-2 text-gray-500 hover:text-gray-700 focus:outline-none","aria-label":"Clear selection",children:"Ã—"}),r.jsx("div",{className:"w-0 h-0 me-3 border-t-[6px] border-b-0 border-l-[3.5px] border-r-[3.5px] border-transparent border-t-labelBlue"})]}),i&&m&&V.createPortal(r.jsxs("div",{className:p("absolute z-[11020] bg-white border border-gray-300 rounded shadow-lg",window.innerWidth<=640?"fixed top-0 left-0 right-0 bottom-0 m-auto":""),style:{top:window.innerWidth<=640?"10%":m.top,left:window.innerWidth<=640?"5%":m.left,width:window.innerWidth<=640?"90%":m.width,maxHeight:window.innerWidth<=640?"80%":m.maxHeight,overflow:"auto"},role:"listbox","aria-activedescendant":d>=0?`selectbox-option-${d}`:void 0,children:[f&&r.jsx("div",{className:"p-2 border-b border-gray-200",children:r.jsx("input",{ref:A,type:"text",value:x,onChange:e=>E(e.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring bg-white",placeholder:"Filter...",onKeyDown:e=>e.stopPropagation(),"aria-label":"Filter options"})}),r.jsx("div",{className:"max-h-60 overflow-auto",ref:y,role:"presentation",children:v.length>0?v.map((e,t)=>r.jsxs("div",{id:`selectbox-option-${t}`,onClick:()=>R(e),onMouseEnter:()=>b(t),className:p("px-4 py-2 cursor-pointer text-black text-xs",L(e.value)?"bg-blue-500 text-white":"",d===t?"bg-gray-200":"","border-b border-gray-100 last:border-b-0"),role:"option","aria-selected":L(e.value),children:[c&&r.jsx("input",{type:"checkbox",checked:L(e.value),readOnly:!0,className:"mr-2"}),e.label]},e.value)):r.jsx("div",{className:"px-4 py-2 text-gray-500",children:"No options found"})})]}),document.body)]});return a?r.jsx(C,{label:a,children:W}):W}function X({label:a,iconLeft:u,iconRight:s,className:f,wrapperClassName:h,onChange:o,field:n,args:j,...c}){const i=x=>{o&&o.length>1?o(x.target.value,n,j):o&&o(x)},w=r.jsx("input",{className:p("border-0 w-full h-full rounded-[8px] mt-[-5px] bg-transparent outline-none px-4 placeholder:text-pBlack placeholder:text-sm",f),onChange:i,...c});return r.jsx(C,{label:a,iconLeft:u,iconRight:s,className:h,children:w})}export{C as L,$ as S,X as T};
