import{j,R as x}from"./AlertSnackbar-BBOi9bHj.js";import{c as w,k as T,l as K}from"./index-B4Pd27tI.js";import{S as M}from"./SelectBox-SgIxSiS9.js";import{L as k}from"./LabelWrapper-O3YM8ZQf.js";import{T as B}from"./TextBox-DU8s_y0c.js";function R({label:c,iconLeft:e,iconRight:n,className:g,wrapperClassName:s,args:r,field:a,onChange:d,value:o,...t}){const h=j.jsx("textarea",{className:w("border-0 w-full h-full rounded-[8px] mt-[-5px] bg-transparent outline-none px-4 placeholder:text-pBlack placeholder:text-sm",g),onChange:u=>d?.(u.currentTarget.value,a,r),...t,children:o});return j.jsx(k,{label:c,iconLeft:e,iconRight:n,className:s,children:h})}const $=x.createContext({}),S=$.Provider;function F(c,e){const{valueFieldProp:n="value",hasErrorFieldProp:g="hasError",errorMessageFieldProp:s="errorMessage",changeHandler:r,defaultProps:a}={};return function(o){const t=x.useContext($),{[n]:h,onChange:u,...f}=o,l=f,m=x.useRef({field:o.field,onChange:u,form:t,changeHandler:r});m.current={field:o.field,onChange:u,form:t,changeHandler:r};const C=x.useCallback((i,p,...v)=>{const{form:y,onChange:E,field:P,changeHandler:b}=m.current;typeof b=="function"&&(i=b(i,p,...v),p=P||p),P&&y?.onChange&&y.onChange(i,P,...v),E?.(i,p,...v)},[]);if(t?.getProps&&o.field){const{[n]:i=h,hasError:p,isTouched:v,errorMessage:y,middleware:E}=t.getProps(o,e);m.current.middleware=E,l[n]=x.useMemo(()=>{const{middleware:P,field:b}=m.current;return P?P(i,b,!1):i},[i]),p&&v&&(l[g]=p),y&&v&&(l[s]=y)}else l.value=h;return j.jsx(c,{...a,...l,onChange:C})}}function H(c,e){const n={hasError:!1};if(!c)return n;try{c.validateSync(e,{abortEarly:!1})}catch(g){const s=g.inner;n.hasError=!0,n.errors=s.reduce((r,a)=>(r[a.path]=a.message,r),{})}return n}function G(c){const e=x.useRef({props:c,touched:{}});e.current.props=c,e.current.errors=c.errors||e.current.errors;const{value:n}=c,g=x.useMemo(()=>({onChange:(s,r,a)=>{const{field:d,args:o,middleware:t,onChange:h,validator:u}=e.current.props,f=d?`${d}.${r}`:r,l=T(n,f,t?t(s,r,!0):s),m=H(u,l);e.current.errors=m,e.current.touched[r]=!0,h(l,d,{fieldArgs:a,field:r,args:o,errors:m})},getProps:(s,r)=>{const{field:a,middleware:d}=e.current.props,{valueFieldProp:o="value"}=r||{},{field:t,[o]:h}=s;if(!t)return{[o]:h};const u=a?`${a}.${t}`:t,f=e.current.errors?.errors?.[t];return{[o]:K(n,u),hasError:!!f,isTouched:e.current.touched[t],middleware:d,errorMessage:f}},setValue:(s,r)=>{if(!s||typeof s!="object")return;const{field:a,args:d,middleware:o,onChange:t,validator:h}=e.current.props,u=Object.keys(s);if(!u.length)return;const f=u.reduce((m,C)=>{const i=s[C],p=a?`${a}.${C}`:C;return T(m,p,o?o(i,C,!0):i)},n),l=h?.validate(f);e.current.errors=l,t(f,a,{fieldArgs:r,args:d,errors:l})},getErrors:()=>e.current.errors}),[n]);return j.jsx(S,{value:g,children:c.children})}const q=F(M),z=F(R),D=F(B);export{G as F,D as a,q as b,F as c,z as d};
