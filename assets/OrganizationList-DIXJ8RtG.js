import{j as e,r as l,R as o,b as A}from"./index-CCZiGm67.js";import{c as g}from"./Button-6LZIOUqR.js";import{F as _,c as m,P as E,a as f}from"./ProgressButton-BjrUUPwm.js";import{o as W,a as G,f as Q}from"./ajax-CEEwK_dl.js";import{T as d}from"./Toggle-Cf4R096q.js";import{b as y}from"./organization-C7O-oI-r.js";import{S as V}from"./settings-Dpr_m6k1.js";/* empty css                */import{T as q}from"./Table-DNFgwUp4.js";import{B as z}from"./Button-DbPSeC0i.js";import{S}from"./SelectButton-DXLbC8G1.js";import{T as J}from"./TextBox-DxOTgkjt.js";import{s as X}from"./utils-B3TvvZ68.js";import{P as Y,S as Z}from"./PageHeader-BPx02xDn.js";import{S as $}from"./download-BBKikWVH.js";import"./hoist-non-react-statics.cjs-85-FKMmz.js";import"./env-CmL5wTXD.js";import"./useSelectedBot-VuxPS6at.js";function D({organizationId:u,consoleDisplaySettings:t={},onDone:c}){const T={hideTrainingTab:(t==null?void 0:t.hideTrainingTab)||!1,hideSettingsTab:(t==null?void 0:t.hideSettingsTab)||!1,hideKBTab:(t==null?void 0:t.hideKBTab)||!1,hideMediaTab:(t==null?void 0:t.hideMediaTab)||!1,hideDesignTab:(t==null?void 0:t.hideDesignTab)||!1,hideFlowDesignTab:(t==null?void 0:t.hideFlowDesignTab)??!0},j=async i=>{try{await y({settings:i},u),f(!0,"Console display settings updated successfully","success"),c()}catch{f(!0,"Not able to update the console display settings. Try after sometime!","error")}};return e.jsx(_,{initialValues:T,onSubmit:j,children:({values:i,handleChange:r,isSubmitting:n,handleSubmit:w})=>e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsx("div",{className:"text-lg font-semibold border-b pb-2",children:"Console Settings"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Hide Training Tab"}),e.jsx(m,{as:d,name:"hideTrainingTab",checked:i.hideTrainingTab,onChange:()=>r({target:{name:"hideTrainingTab",value:!i.hideTrainingTab}})})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Hide Settings Tab"}),e.jsx(m,{as:d,name:"hideSettingsTab",checked:i.hideSettingsTab,onChange:()=>r({target:{name:"hideSettingsTab",value:!i.hideSettingsTab}})})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Hide FAQ / Knowledge base"}),e.jsx(m,{as:d,name:"hideKBTab",checked:i.hideKBTab,onChange:()=>r({target:{name:"hideKBTab",value:!i.hideKBTab}})})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Hide Conversation Media"}),e.jsx(m,{as:d,name:"hideMediaTab",checked:i.hideMediaTab,onChange:()=>r({target:{name:"hideMediaTab",value:!i.hideMediaTab}})})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Hide Design Tab"}),e.jsx(m,{as:d,name:"hideDesignTab",checked:i.hideDesignTab,onChange:()=>r({target:{name:"hideDesignTab",value:!i.hideDesignTab}})})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Hide Flow Designer"}),e.jsx(m,{as:d,name:"hideFlowDesignTab",checked:i.hideFlowDesignTab,onChange:()=>r({target:{name:"hideFlowDesignTab",value:!i.hideFlowDesignTab}})})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx(E,{isLoading:n,disabled:n,type:"submit",children:"Update"})})]})})}const k=[{value:0,label:"Organization List"},{value:1,label:"Organization Invoice"}],ee=[{value:"today",label:"Today"},{value:"week",label:"Week"},{value:"month",label:"Month"},{value:"custom",label:"Custom"}];function je(){const[u,t]=l.useState(1),[c,T]=l.useState(10),j=[{field:"name",title:"Name",sortable:!0},{field:"websiteUrl",title:"Website",cellClassName:g("max-w-[250px]"),hideBelow:"lg",template:a=>!!a.websiteUrl&&e.jsx("a",{href:a.websiteUrl,target:"_blank",title:a.websiteUrl,rel:"noreferrer noopener",children:W(a.websiteUrl)})},{field:"email",title:"Email",cellClassName:g("max-w-[250px]"),hideBelow:"sm"},{field:"registeredAt",title:"Registered Date",hideBelow:"xl",sortable:!0},{field:"credits",title:"Credits",hideBelow:"lg",sortable:!0},{field:"managed",title:"Managed",cellClassName:g("text-center"),hideBelow:"md",template:a=>e.jsx(d,{checked:a.handledByLivServ,containerClassName:"mx-auto",onChange:s=>I(s,a._id)})},{field:"",title:"",cellClassName:g("text-center"),template:a=>e.jsx(z,{icon:e.jsx(V,{}),type:"plain",onClick:()=>U(a._id,a.settings)})}],[i,r]=l.useState(""),[n,w]=o.useState(k[0]),[F,M]=o.useState(),N=A(a=>a.organizationList),[p,O]=o.useState(),[,B]=l.useState(!1),[P,R]=l.useState();l.useEffect(()=>{p&&H(p)},[p]);const v=o.useMemo(()=>N.map(a=>({_id:a._id,name:a.organizationName,websiteUrl:a.websiteUrl,email:a.admins.map(s=>s.email).join(", "),registeredAt:Q(a.registeredAt),credits:G(a.availableCredits),handledByLivServ:a.handledByLivServ,settings:a.settings})),[N]),U=(a,s)=>{O(a),R(s),B(!0)},H=a=>X(e.jsx(D,{organizationId:a,consoleDisplaySettings:P,onDone:()=>B(!1)}),{showCloseButton:!0,width:"700px"}),I=async(a,s)=>{const b=a,x=s;try{await y({handledByLivServ:b},x),f(!0,"Handled by LivServ updated successfully","success")}catch{f(!0,"Not able to update the Handled by LivServ. Try after sometime!","error")}},h=o.useMemo(()=>{var s;const a=(s=i==null?void 0:i.toLowerCase())==null?void 0:s.trim();return a?v.filter(b=>{var x,C,L;return((x=b.name)==null?void 0:x.toLowerCase().includes(a))||((C=b.email)==null?void 0:C.toLowerCase().includes(a))||((L=b.websiteUrl)==null?void 0:L.toLowerCase().includes(a))}):v},[i,v]),K=o.useMemo(()=>{const a=(u-1)*c,s=a+c;return h.slice(a,s)},[h,u,c]);return e.jsxs("div",{children:[e.jsx(Y,{title:"Organizations"}),e.jsxs("div",{className:"flex flex-col gap-3 pt-6",children:[e.jsxs("div",{className:"flex justify-between py-4",children:[e.jsxs("div",{className:"pt-2",children:[!(n!=null&&n.value)&&e.jsx("span",{className:"text-sm font-semibold",children:"Organization List"}),!!(n!=null&&n.value)&&e.jsx("span",{className:"text-sm font-semibold",children:"Organization Invoice"}),e.jsx(S,{value:n,onChange:w,items:k,iconOnly:!0,className:"bg-primary pt-0 ps-0 pb-0 pr-0 text-white ms-2 align-middle"})]}),e.jsxs("div",{className:"flex",children:[e.jsx(J,{value:i,placeholder:"Search",onChange:a=>r(a.target.value),iconRight:Z,className:"py-5"}),e.jsx(z,{icon:e.jsx($,{}),size:"sm",type:"secondary",className:"mr-2 align-middle"}),e.jsx(S,{value:F,items:ee,prefix:"Group by:",onChange:M,className:"bg-[#323131] text-white align-middle"})]})]}),e.jsx(q,{rows:K,columns:j,totalRows:h==null?void 0:h.length,pagination:!0,onChange:({pageNumber:a,count:s})=>{t(a),T(s)}})]})]})}export{je as default};
