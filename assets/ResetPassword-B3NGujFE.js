import{d as N,r as l,j as s,h,e as b}from"./AlertSnackbar-lBoJjy_c.js";import{c as v}from"./index-DDVnIUkz.js";import{F as y}from"./formik.esm-CUDIF_J_.js";import{c as S,a as f,b as C}from"./index.esm-f3KrK5uW.js";import{s as k,a as R}from"./password-strength-CoL6PLjI.js";import{A as E}from"./AnimateButton-CXxZV9uM.js";import{P as F}from"./ProgressButton-CoLcqq_z.js";import{r as L}from"./resetPassword-CLcDo8Mt.js";import{S as $}from"./SignUp-BEcmU35O.js";import{l as q,a as A,F as B}from"./Footer-BSTtGGQs.js";import"./ajax-C92vMgMI.js";import"./env-CmL5wTXD.js";const O=({email:d,code:o})=>{const c=N(),[t,p]=l.useState(),[P]=l.useState(!1),[j]=l.useState(!1),w=e=>{const a=k(e);p(R(a))};l.useEffect(()=>{w("")},[]);const g=async(e,{setErrors:a,setStatus:i,setSubmitting:n,resetForm:m})=>{try{if(!d||!o)throw new Error("Invalid reset link");await L(e.newPassword,d,o),i({success:!0}),n(!1),h(!0,"Password updated","success"),m(),c("/")}catch(r){i({success:!1}),a({submit:r.message}),n(!1),h(!0,"Not able to update the password. Try after sometime!","error")}};return s.jsx(y,{initialValues:{newPassword:"",confirmPassword:""},validationSchema:S().shape({newPassword:f().max(30).required("New Password is required"),confirmPassword:f().oneOf([C("newPassword")],"Passwords must match").max(30).required("Confirm Password is required")}),onSubmit:g,children:({errors:e,handleBlur:a,handleChange:i,handleSubmit:n,isSubmitting:m,touched:r,values:x})=>s.jsx("form",{noValidate:!0,onSubmit:n,children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"new-password",className:"block text-sm font-medium text-gray-700",children:"New Password"}),s.jsx("div",{className:"relative",children:s.jsx("input",{id:"new-password",type:P?"text":"password",value:x.newPassword,name:"newPassword",onBlur:a,onChange:u=>{i(u),w(u.target.value)},placeholder:"******",autoComplete:"off",className:`w-full px-3 py-2 pr-10 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900 bg-white placeholder-gray-400 ${r.newPassword&&e.newPassword?"border-red-500":"border-gray-300"}`})}),r.newPassword&&e.newPassword&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:e.newPassword})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),s.jsx("div",{className:"relative",children:s.jsx("input",{id:"confirm-password",type:j?"text":"password",value:x.confirmPassword,name:"confirmPassword",onBlur:a,onChange:i,placeholder:"******",autoComplete:"off",className:`w-full px-3 py-2 pr-10 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900 bg-white placeholder-gray-400 ${r.confirmPassword&&e.confirmPassword?"border-red-500":"border-gray-300"}`})}),r.confirmPassword&&e.confirmPassword&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:e.confirmPassword})]}),e.submit&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:s.jsx("p",{className:"text-red-600 text-sm",children:e.submit})}),t&&s.jsxs("div",{className:"flex items-center space-x-3 mt-2",children:[s.jsx("div",{className:"h-2 rounded-full transition-all duration-300",style:{backgroundColor:t.color,width:"85px"}}),s.jsx("span",{className:"text-xs text-gray-600",children:t.label})]}),s.jsx("div",{className:"mt-6",children:s.jsx(E,{children:s.jsx(F,{isLoading:m,className:"w-full",type:"submit",children:"Update Password"})})})]})})})},M=()=>{const d=b(),o=new URLSearchParams(d.search),c=o.get("email"),t=o.get("code");return s.jsxs("div",{className:"auth-layout",children:[s.jsxs("header",{children:[s.jsx("img",{src:q,alt:"",className:"bg-white inline-block",width:"40",height:"42"}),s.jsx("img",{src:A,alt:"Livserv",className:"inline-block ms-2"})]}),s.jsx("section",{children:s.jsxs("div",{className:"content",children:[s.jsx("div",{className:"banner",children:s.jsx($,{})}),s.jsxs("div",{className:"main",children:[s.jsx("div",{className:"welcome",children:"RESET YOUR PASSWORD"}),s.jsx("div",{className:"fields",children:s.jsx(O,{email:c,code:t})})]})]})}),s.jsx(B,{fontColor:v("text-white")})]})};export{M as default};
