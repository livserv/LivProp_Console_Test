import{R as j,j as E}from"./AlertSnackbar-Cu3h0plZ.js";import{P as b}from"./index-CVcrBw65.js";import{j as p,k as $}from"./ajax-C92vMgMI.js";function K(c,r){const s={hasError:!1};if(!c)return s;try{c.validateSync(r,{abortEarly:!1})}catch(g){const t=g.inner;s.hasError=!0,s.errors=t.reduce((e,o)=>(e[o.path]=o.message,e),{})}return s}function x(c){const r=j.useRef({props:c,touched:{}});r.current.props=c,r.current.errors=c.errors||r.current.errors;const{value:s}=c,g=j.useMemo(()=>({onChange:(t,e,o)=>{const{field:u,args:a,middleware:n,onChange:d,validator:l}=r.current.props,i=u?`${u}.${e}`:e,h=p(s,i,n?n(t,e,!0):t),f=K(l,h);r.current.errors=f,r.current.touched[e]=!0,d(h,u,{fieldArgs:o,field:e,args:a,errors:f})},getProps:(t,e)=>{const{field:o,middleware:u}=r.current.props,{valueFieldProp:a="value"}=e||{},{field:n,[a]:d}=t;if(!n)return{[a]:d};const l=o?`${o}.${n}`:n,i=r.current.errors?.errors?.[n];return{[a]:$(s,l),hasError:!!i,isTouched:r.current.touched[n],middleware:u,errorMessage:i}},setValue:(t,e)=>{if(!t||typeof t!="object")return;const{field:o,args:u,middleware:a,onChange:n,validator:d}=r.current.props,l=Object.keys(t);if(!l.length)return;const i=l.reduce((f,m)=>{const y=t[m],v=o?`${o}.${m}`:m;return p(f,v,a?a(y,m,!0):y)},s),h=d?.validate(i);r.current.errors=h,n(i,o,{fieldArgs:e,args:u,errors:h})},getErrors:()=>r.current.errors}),[s]);return E.jsx(b,{value:g,children:c.children})}export{x as F};
