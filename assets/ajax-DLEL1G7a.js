import{j as E}from"./utils-BxUv4Y9r.js";const y="https://devbackend.livhousing.com:444";async function w(t,e,n={}){return a("GET",t,e,n)}async function $(t,e,n={}){return a("POST",t,e,n)}async function v(t,e,n={}){return a("PUT",t,e,n)}async function h(t,e,n={}){return a("DELETE",t,e,n)}async function a(t,e,n,{headers:o,noAuth:i,...f}={}){var l;const s=t==="POST"||t==="PUT"||t==="DELETE";e=P(e,s?void 0:n);const u=n instanceof FormData;if(u||(n&&typeof n=="object"&&s?n=JSON.stringify(n):n=void 0),o||(o={}),u||(o["Content-Type"]="application/json"),o.Accept="application/json",i!==!1){const r=sessionStorage.getItem("token");r&&(o.Authorization=`Bearer ${r}`)}try{const r=await fetch(e,{...f,headers:o,body:n,method:t}),c=await r.json();if(r.ok){const{data:g,...p}=c;return delete p.status,g&&!Object.keys(p).length?g:c}else throw c.message?new Error(c.message):c}catch(r){throw console.error("Error calling API: ",r),(l=r.message)!=null&&l.includes("fetch")?new Error("Unable to reach server. Please check your network connectivity and try again."):new Error(r.message)}}const b={get:w,post:$,put:v,remove:h,request:a},j=E(y,"/");function P(t,e){if(!t)return t;const n=e?Object.keys(e):null;if(n!=null&&n.length){const o=n.reduce((i,f)=>{let s=e[f];return s==null?i:(s=`${f}=${encodeURIComponent(s)}`,i?`${i}&${s}`:s)},"");o&&(t=`${t}${t.includes("?")?"&":"?"}${o}`)}return t.startsWith("https://")?t:`${j}${t}`}export{v as a,b,w as g,$ as p,h as r};
