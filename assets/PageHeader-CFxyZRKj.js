import{u as L,e as I,d as B,g as S,R as l,j as e,c as u}from"./AlertSnackbar-BBOi9bHj.js";import"./index-B4Pd27tI.js";import"./Button-htJsKnEd.js";import{S as z}from"./SelectBox-SgIxSiS9.js";import{s as N,c as P}from"./organization-B9OzZuX7.js";import{u as C}from"./useSelectedBot-CTuACohy.js";function v(){const i=L(a=>a.botsList),{pathname:o}=I(),s=B(),{botId:n}=S(),[p]=C(n),c=l.useRef({});c.current.botId=p,c.current.pathname=o,l.useEffect(()=>{n&&n!==c.current.botId&&N(n)},[n,p,i]);const x=(i||[]).map(a=>({label:a.botName,value:a._id})),h=l.useCallback(a=>{const d=a&&typeof a=="object"&&"value"in a?a.value:a;if(!d||typeof d!="string")return;const{pathname:m,botId:t}=c.current;if(m&&t&&m.includes(t)){const r=m.replace(t,d);s(r)}N(d)},[s]);return e.jsx("div",{style:{width:"100%",marginLeft:0},children:e.jsx("div",{className:"flex items-center",children:e.jsx(z,{options:x,value:p,onChange:h,showClear:!1,placeholder:"Select Bot",className:"border border-gray-300 rounded px-2 py-2"})})})}function w(){const i=u(t=>t.isSuperUser),o=u(t=>t.organizationId),s=u(t=>t.organizationList),n=l.useRef({}),{pathname:p}=I(),c=B(),{botId:x}=S();n.current.navigate=c,n.current.pathname=p,n.current.botId=x;const h=l.useMemo(()=>s?.filter(t=>t._id===o)[0],[o,s]),a=i&&s?.length>0,d=l.useCallback(async t=>{const r=t&&typeof t=="object"&&"value"in t?t.value:t;if(!r||typeof r!="string")return;const f=s.find(_=>_._id===r);if(!f)return;u.setState({organization:f,organizationId:r,selectedBotId:void 0}),sessionStorage.setItem("orgId",r);const g=await P(r),{botId:b,pathname:j,navigate:y}=n.current;g?b&&j&&y(j.replace(b,g)):y("/")},[s]),m=(s||[]).map(t=>({label:t.organizationName,value:t._id}));return a?e.jsx(z,{options:m,value:h?._id,onChange:d,showClear:!1,placeholder:"Select organization",className:"w-full border border-gray-300 rounded px-2 py-2"}):null}function $({title:i,icon:o,onClick:s}){return e.jsxs("div",{className:"w-full rounded-md bg-white shadow-[0px_1px_4px_0px_#5653534D]",children:[e.jsxs("div",{className:"hidden md:flex justify-between items-center h-[50px]",children:[e.jsx("span",{className:"text-primary uppercase font-bold text-md ps-4 py-3",children:i}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"mx-2",children:e.jsx(w,{})}),e.jsx("div",{className:"mx-2",children:e.jsx(v,{})})]}),!!o&&e.jsx("button",{onClick:s,className:"btn bg-primary h-full w-[50px] rounded-r-[4px] hover:opacity-80",children:e.jsx(o,{className:"m-auto"})})]}),e.jsxs("div",{className:"md:hidden",children:[e.jsxs("div",{className:"flex justify-between items-center h-[50px] border-b border-gray-100",children:[e.jsx("span",{className:"text-primary uppercase font-bold text-sm ps-4 flex-1",children:i}),!!o&&e.jsx("button",{onClick:s,className:"btn bg-primary h-[40px] w-[40px] rounded hover:opacity-80",children:e.jsx(o,{className:"m-auto"})})]}),e.jsxs("div",{className:"px-4 py-3 space-y-2",children:[e.jsx(w,{}),e.jsx(v,{})]})]})]})}export{$ as P};
