import{f as _,c as I,u as y,a as S,R as p,j as t,b as f,r as x}from"./index-BUi7dVI-.js";import"./Button-B8BZ1MfC.js";import{S as N,T as P}from"./TextBox-C36CaT4K.js";import"./ajax-trSxn-SP.js";import{s as j,b as L}from"./organization-Dp69GUXH.js";import{u as R}from"./useSelectedBot-Bo-n9yUo.js";function k(){const i=_(o=>o.botsList),{pathname:c}=I(),s=y(),{botId:a}=S(),[l]=R(a),n=p.useRef({});n.current.botId=l,n.current.pathname=c,p.useEffect(()=>{a&&a!==n.current.botId&&(console.log("BotPicker useEffect botId changed",{botId:a,currentBotId:n.current.botId}),j(a))},[a]);const m=(i||[]).map(o=>({label:o.botName,value:o._id})),h=p.useCallback(o=>{const d=o&&typeof o=="object"&&"value"in o?o.value:o;if(!d||typeof d!="string")return;const{pathname:u,botId:e}=n.current;if(u&&e&&u.includes(e)){const r=u.replace(e,d);s(r)}j(d)},[s]);return t.jsx("div",{style:{width:"100%",marginLeft:0},children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{style:{color:"#2f7ce9",fontSize:20,marginRight:8},children:"ðŸ¤–"}),t.jsx(N,{options:m,value:l,onChange:h,showClear:!1,placeholder:"Select Bot",className:"w-full border border-gray-300 rounded px-2 py-2"})]})})}function E(){const i=f(e=>e.isSuperUser),c=f(e=>e.organizationId),s=f(e=>e.organizationList),a=p.useRef({}),{pathname:l}=I(),n=y(),{botId:m}=S();a.current.navigate=n,a.current.pathname=l,a.current.botId=m;const h=p.useMemo(()=>s==null?void 0:s.filter(e=>e._id===c)[0],[c,s]),o=i&&(s==null?void 0:s.length)>0,d=p.useCallback(async e=>{const r=e&&typeof e=="object"&&"value"in e?e.value:e;if(!r||typeof r!="string")return;const g=s.find(B=>B._id===r);if(!g)return;f.setState({organization:g,organizationId:r,selectedBotId:void 0}),sessionStorage.setItem("orgId",r);const b=await L(r),{botId:C,pathname:w,navigate:v}=a.current;b?C&&w&&v(w.replace(C,b)):v("/")},[s]),u=(s||[]).map(e=>({label:`${e.organizationName||`(${e._id})`}  $${e.availableCredits?e.availableCredits.toFixed(1):0}`,value:e._id}));return t.jsx("div",{style:{width:"100%",marginLeft:0},children:o&&t.jsx("div",{className:"flex items-center",children:t.jsx(N,{options:u,value:h==null?void 0:h._id,onChange:d,showClear:!1,placeholder:"Select organization",className:"w-full border border-gray-300 rounded px-2 py-2"})})})}const $=i=>x.createElement("svg",{width:18,height:18,viewBox:"0 0 18 18",fill:"#A5A8A9",xmlns:"http://www.w3.org/2000/svg",...i},x.createElement("path",{d:"M16.6 18L10.3 11.7C9.8 12.1 9.225 12.4167 8.575 12.65C7.925 12.8833 7.23333 13 6.5 13C4.68333 13 3.14583 12.3708 1.8875 11.1125C0.629167 9.85417 0 8.31667 0 6.5C0 4.68333 0.629167 3.14583 1.8875 1.8875C3.14583 0.629167 4.68333 0 6.5 0C8.31667 0 9.85417 0.629167 11.1125 1.8875C12.3708 3.14583 13 4.68333 13 6.5C13 7.23333 12.8833 7.925 12.65 8.575C12.4167 9.225 12.1 9.8 11.7 10.3L18 16.6L16.6 18ZM6.5 11C7.75 11 8.8125 10.5625 9.6875 9.6875C10.5625 8.8125 11 7.75 11 6.5C11 5.25 10.5625 4.1875 9.6875 3.3125C8.8125 2.4375 7.75 2 6.5 2C5.25 2 4.1875 2.4375 3.3125 3.3125C2.4375 4.1875 2 5.25 2 6.5C2 7.75 2.4375 8.8125 3.3125 9.6875C4.1875 10.5625 5.25 11 6.5 11Z",fill:"inherit"}));function U({title:i,icon:c,onClick:s,search:a}){const[l,n]=x.useState("");return t.jsxs("div",{className:"w-full rounded-md bg-white flex justify-between h-[50px] shadow-[0px_1px_4px_0px_#5653534D]",children:[t.jsx("span",{className:"text-primary uppercase font-bold text-md ps-4 py-3",children:i}),t.jsxs("div",{className:"mx-4 mt-2",children:[" ",t.jsx(E,{})," "]}),t.jsxs("div",{className:"mx-4 mt-2 ",children:[" ",t.jsx(k,{})," "]}),a&&t.jsx("div",{className:"mx-4 mt-2",children:t.jsx(P,{placeholder:"Search",wrapperClassName:"h-9",className:"py-5",iconRight:$,value:l,onChange:m=>n(m)})}),!!c&&t.jsx("button",{onClick:s,className:"btn bg-primary h-full w-[50px] rounded-[4px] hover:opacity-80",children:t.jsx(c,{className:"m-auto"})})]})}export{U as P,$ as S};
