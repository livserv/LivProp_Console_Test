import{j as e,r as f,R as E,b as I,e as V}from"./index-BUi7dVI-.js";import{F as ee,u as oe}from"./formik.esm-D-Rn-31I.js";import{S as X}from"./TextBox-C36CaT4K.js";import{P as D,a as B}from"./ProgressButton-D4Q0VgBI.js";import{B as L}from"./Button-DZ2Bo7Yd.js";import"./Button-B8BZ1MfC.js";import{g as Z}from"./ajax-trSxn-SP.js";import{b as j,a as P}from"./index-CEextgYE.js";import{e as O,f as U,s as se}from"./send-BgFbAndD.js";import{a as z,S as te,b as ae,c as le,d as re}from"./upload-Cxe9eVAt.js";import{a as ne}from"./index-D9KHyo9R.js";import{u as _}from"./useSelectedBot-Bo-n9yUo.js";import{C as ie,h as ce,g as Y}from"./test-chat-utils-CqYCuTmf.js";import{P as de}from"./PopUpDialog-D-80gBa0.js";import{u as me}from"./organization-Dp69GUXH.js";import{a as ge,K as he}from"./KbDocsList-DwTY7ycH.js";import{P as xe}from"./PageHeader-BoAGOlEn.js";import"./hoist-non-react-statics.cjs-DkrjUEfj.js";import"./env-CmL5wTXD.js";import"./svg-icons-BXbzvg0z.js";import"./env-CBDBHzQq.js";import"./delete-CU4Ib-lD.js";import"./edit-DxIHDvo_.js";import"./plus-YfVPyVyP.js";import"./utils-B3TvvZ68.js";function ue({values:o,handleChange:s}){return e.jsxs("div",{className:"mb-4",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-thin text-primary mb-4",children:"Legal requirements"}),e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Chat Disclaimer"}),e.jsx("input",{type:"text",name:"chatDisclaimer",value:o.chatDisclaimer,onChange:s,maxLength:260,placeholder:"Provide the disclaimer to be shown in chat window",className:"border rounded-md h-12 w-full px-4"})]})}const S=({name:o,value:s,onChange:a,className:i})=>{const l=[{value:"yes",label:"Yes"},{value:"no",label:"No"}],n=m=>a(o,m==="yes");return e.jsx(X,{className:i,options:l,onChange:m=>n(m),value:s?"yes":"no",showClear:!1,placeholder:""})};function be({values:o,setFieldValue:s}){return e.jsxs("div",{className:"mb-4",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-thin text-primary mb-4",children:"Hide Livserv branding"}),e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Hide Livserv branding"}),e.jsx(S,{name:"hideLivservBranding",value:o.hideLivservBranding,onChange:(a,i)=>s(a,i),className:"border h-12 rounded-md w-full"})]})}const M=({name:o,value:s,onChange:a,onBlur:i,placeholder:l="#000000",className:n="",inputClassName:m="",colorInputClassName:c=""})=>e.jsxs("div",{className:`relative w-full ${n}`,children:[e.jsx("input",{type:"text",name:o,value:s,onChange:a,onBlur:i,className:`w-full border border-gray-300 rounded-md py-2 pl-3 pr-10 text-sm ${m}`,placeholder:l,autoComplete:"off"}),e.jsx("input",{type:"color",value:s,onChange:a,className:`absolute right-2 top-1/2 -translate-y-1/2 w-6 h-6 border-0 p-0 bg-transparent cursor-pointer ${c}`,tabIndex:-1,"aria-label":"Choose color"})]}),k=({error:o,children:s})=>o?e.jsx("div",{className:"text-red-500 text-xs",children:s}):null,pe=E.forwardRef((o,s)=>e.jsx("input",{ref:s,...o,style:{clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1,...o.style||{}}}));function Q({imageUrl:o,imageName:s,maxImageSize:a=25e4,onChange:i,bgColor:l}){const[n,m]=f.useState(null),[c,b]=f.useState(o),r=E.useRef(null),t=l&&(c!=null&&c.endsWith(".png"))?l:"transparent",u=!!n,g=!u&&o,h=c?"Replace image":"Select image",x=p=>{try{const v=p.target.files[0];if(!v)return;const C=v.size;if(v.type.startsWith("image/")&&C<=a){m(v),b(URL.createObjectURL(v));const w=new FileReader;w.onloadend=()=>{b(w.result)},w.readAsDataURL(v),i==null||i(s,v)}else alert("Please upload valid image file and size is <= "+a/1e3+" kb"),m(null),p.target.value=""}catch(v){console.log("Error uploading the image ::",v),alert("Please select the image file"),p.target.value=""}},N=async()=>{try{await O(s),i(s,null),b(null),m(null),B(!0,"Logo deleted successfully.","success")}catch(p){console.log("Deleting logo failed. Please try again later.",p)}},d=async()=>{try{const p=await U(s,n);i(s,p),m(null),B(!0,"Logo uploaded successfully.","success")}catch(p){console.log("File upload failed. Please try again later.",p)}};return e.jsxs("div",{className:"flex flex-col gap-3",children:[c&&e.jsx("div",{className:"h-20 w-20 flex items-center justify-center",children:e.jsx("img",{src:c,alt:"headerLogo",height:20,style:{backgroundColor:t}})}),e.jsxs("div",{className:"flex flex-row gap-2",children:[e.jsx(L,{label:h,type:"secondary",onClick:()=>r.current&&r.current.click()}),e.jsx(pe,{ref:r,name:s,type:"file",onChange:x},n?n.name:""),g&&e.jsx(L,{label:"Delete",type:"secondary",onClick:N}),u&&e.jsx(D,{color:"primary",variant:"contained",onClick:d,ml:5,children:"Upload"})]}),n&&e.jsxs("div",{className:"text-xs",children:["File Name : ",n.name," "]})]})}function fe({values:o,touched:s,errors:a,handleBlur:i,setFieldValue:l}){var n,m;return e.jsxs("div",{className:"mb-8 border-y py-6",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-thin text-primary mb-4",children:"Message Bubble Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-2",children:"Show Message Bubble Logo"}),e.jsx(S,{name:"messageBubbleLogo",value:o.messageBubbleLogo,onChange:(c,b)=>l(c,b),className:"border h-12 rounded-md w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Font Size"}),e.jsx(j,{field:"fontSize",placeholder:"12px",value:o.fontSize,onChange:c=>l("fontSize",c),wrapperClassName:"border rounded-md h-12 w-full"})]})]}),e.jsx("div",{className:"text-xs uppercase tracking-wider mt-8 mb-2 text-purple-700 font-bold",children:"Visitor Bubble Settings"}),o.messageBubbleLogo&&e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Upload Visitor Logo"}),e.jsx(Q,{imageUrl:(n=o.visitorMessageLogo)==null?void 0:n.url,imageName:"visitorMessageLogo",maxImageSize:5e4,onChange:l})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Background Color"}),e.jsx(M,{name:"visitorBackgroundColor",value:o.visitorBackgroundColor,onChange:c=>l("visitorBackgroundColor",c.target.value),onBlur:i,placeholder:"#ffffff",inputClassName:"h-12"}),e.jsx(k,{error:s.visitorBackgroundColor&&a.visitorBackgroundColor,children:a.visitorBackgroundColor})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Font Color"}),e.jsx(M,{name:"visitorFontColor",value:o.visitorFontColor,onChange:c=>l("visitorFontColor",c.target.value),onBlur:i,placeholder:"#000000",inputClassName:"h-12"}),s.visitorFontColor&&a.visitorFontColor&&e.jsx("p",{className:"text-xs text-red-500",children:a.visitorFontColor})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Border Color"}),e.jsx(M,{name:"visitorBorderColor",value:o.visitorBorderColor,onChange:c=>l("visitorBorderColor",c.target.value),onBlur:i,placeholder:"#000000",inputClassName:"h-12"}),e.jsx(k,{error:s.visitorBorderColor&&a.visitorBorderColor,children:a.visitorBorderColor})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Border Radius"}),e.jsx(j,{field:"visitorBubbleBorderCurve",placeholder:"border: 1px 2px 3px 4px",value:o.visitorBubbleBorderCurve,onChange:c=>l("visitorBubbleBorderCurve",c),wrapperClassName:"border rounded-md h-12 w-full"}),e.jsx(k,{error:s.visitorBubbleBorderCurve&&a.visitorBubbleBorderCurve,children:a.visitorBubbleBorderCurve})]})]}),e.jsx("div",{className:"text-xs uppercase tracking-wider mt-8 mb-2 text-purple-700 font-bold",children:"Bot Bubble Settings"}),o.messageBubbleLogo&&e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Upload Bot Logo"}),e.jsx(Q,{imageUrl:(m=o.botMessageLogo)==null?void 0:m.url,imageName:"botMessageLogo",maxImageSize:5e4,onChange:l})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Background Color"}),e.jsx(M,{name:"botBackgroundColor",value:o.botBackgroundColor,onChange:c=>l("botBackgroundColor",c.target.value),onBlur:i,placeholder:"#ffffff",inputClassName:"h-12"}),e.jsx(k,{error:s.botBackgroundColor&&a.botBackgroundColor,children:a.botBackgroundColor})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Font Color"}),e.jsx(M,{name:"botFontColor",value:o.botFontColor,onChange:c=>l("botFontColor",c.target.value),onBlur:i,placeholder:"#000000",inputClassName:"h-12"}),e.jsx(k,{error:s.botFontColor&&a.botFontColor,children:a.botFontColor})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Border Color"}),e.jsx(M,{name:"botBorderColor",value:o.botBorderColor,onChange:c=>l("botBorderColor",c.target.value),onBlur:i,placeholder:"#000000",inputClassName:"h-12"}),e.jsx(k,{error:s.botBorderColor&&a.botBorderColor,children:a.botBorderColor})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Border Radius"}),e.jsx(j,{field:"botBubbleBorderCurve",placeholder:"border: 1px 2px 3px 4px",value:o.botBubbleBorderCurve,onChange:c=>l("botBubbleBorderCurve",c),wrapperClassName:"border rounded-md h-12 w-full"}),e.jsx(k,{error:s.botBubbleBorderCurve&&a.botBubbleBorderCurve,children:a.botBubbleBorderCurve})]})]})]})}function je(o){const s=I(a=>a.isSuperUser);return e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"mt-8 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 gap-6 sm:gap-8 lg:gap-12",children:[e.jsx(ue,{...o}),s&&e.jsx(be,{...o})]}),e.jsx(fe,{...o})]})}const ve=({values:o,setFieldValue:s})=>{const a=l=>o.launcherType===l,i=I(l=>l.isSuperUser);return e.jsxs("div",{className:"mt-12 border-y py-4",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-thin text-primary mb-4",children:"Choose Type"}),e.jsxs("div",{className:"mb-12",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-3 sm:gap-4",children:[e.jsx(L,{icon:e.jsx(z,{className:"w-6 h-6 sm:w-8 sm:h-8"}),type:"rounded",onClick:()=>s("launcherType","icon"),className:`border rounded-full w-12 h-12 sm:w-16 sm:h-16 flex items-center justify-center
                            ${a("icon")?"border-blue-500 ring-2 ring-blue-200":"border-gray-300 hover:bg-gray-100"}`}),e.jsxs("div",{className:`flex items-center w-36 sm:w-48 bg-gray-200 rounded-full shadow-md cursor-pointer
                            ${a("bar")?"border-blue-500 ring-2 ring-blue-200":"border-gray-300 hover:bg-gray-100"}`,onClick:()=>s("launcherType","bar"),children:[e.jsx("div",{className:"bg-white w-10 h-10 sm:w-16 sm:h-16 flex items-center justify-center rounded-full",children:e.jsx(z,{className:"w-6 h-6 sm:w-8 sm:h-8"})}),e.jsx("span",{className:"ml-2 sm:ml-4 text-gray-600 font-medium text-xs sm:text-base",children:"Live Chat"})]}),e.jsxs("div",{className:`flex items-center justify-end w-36 sm:w-48 bg-gray-200 rounded-full shadow-md cursor-pointer
                            ${a("expand")?"border-blue-500 ring-2 ring-blue-200":"border-gray-300 hover:bg-gray-100"}`,onClick:()=>s("launcherType","expand"),children:[e.jsx("span",{className:"mr-2 sm:mr-4 text-gray-600 font-medium text-xs sm:text-base",children:"Live Chat"}),e.jsx("div",{className:"bg-white w-10 h-10 sm:w-16 sm:h-16 flex items-center justify-center rounded-full",children:e.jsx(z,{className:"w-6 h-6 sm:w-8 sm:h-8"})})]})]}),e.jsxs("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-2 gap-6 lg:gap-12",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Spacing on corner"}),e.jsx(j,{field:"launcherSpacingCorner",placeholder:"0px",onChange:l=>s("launcherSpacingCorner",l),value:o.launcherSpacingCorner,wrapperClassName:"border rounded-md h-12 w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Spacing on Bottom "}),e.jsx(j,{field:"launcherSpacingBottom",placeholder:"0px",onChange:l=>s("launcherSpacingBottom",l),value:o.launcherSpacingBottom,wrapperClassName:"border rounded-md h-12 w-full"})]})]}),e.jsxs("div",{className:"mt-8 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8 lg:gap-12",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Button on Mobile"}),e.jsx(S,{name:"buttonOnMobile",value:o.buttonOnMobile,onChange:(l,n)=>s(l,n),className:"border h-12 rounded-md w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Show We are online bubble"}),e.jsx(S,{name:"showMinimizeButtonToolTip",value:o.showMinimizeButtonToolTip,onChange:(l,n)=>s(l,n),className:"border h-12 rounded-md w-full"})]}),i&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Activate Voice Bot"}),e.jsx(S,{name:"activateVoiceBot",value:o.activateVoiceBot,onChange:(l,n)=>s(l,n),className:"border h-12 rounded-md w-full"})]})]})]})]})},Ce=[{value:"regular",label:"Regular"},{value:"remote",label:"Remote"}];function Ne({values:o,touched:s,errors:a,handleBlur:i,setFieldValue:l}){return e.jsxs("div",{className:"mb-8 border-y",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-thin text-primary mb-4",children:"Composer Settings"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6 sm:gap-8 mb-4",children:[e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Placeholder Text *"}),e.jsx(j,{field:"placeholder",placeholder:"Type your message...",maxLength:50,onBlur:i,onChange:n=>l&&l("placeholder",n),value:o.placeholder,wrapperClassName:"border rounded-md h-12 w-full"}),s.placeholder&&a.placeholder&&e.jsx("div",{className:"text-red-500 text-xs",children:a.placeholder})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Font source"}),e.jsx("div",{className:"flex flex-row space-x-4",children:Ce.map(n=>e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"fontType",value:n.value,checked:o.fontType===n.value,onChange:m=>l&&l("fontType",m.target.value),className:"mr-2"}),n.label]},n.value))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6 sm:gap-8 mb-4",children:[e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Font name"}),e.jsx(j,{field:"fontName",placeholder:"Provide Font Name",onChange:n=>l&&l("fontName",n),value:o.fontName,wrapperClassName:"border rounded-md h-12 w-full"})]}),o.fontType==="remote"&&e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Paste Remote Font Link"}),e.jsx(j,{field:"remoteFontLink",placeholder:"Ex: https://fonts.googleapis.com",onChange:n=>l&&l("remoteFontLink",n),value:o.remoteFontLink,wrapperClassName:"border rounded-md h-12 w-full"})]})]})]})}const we=({values:o,setFieldValue:s})=>{const a=[{value:"bottomRight",label:"Bottom Right"},{value:"bottomLeft",label:"Bottom Left"}],i=[{value:"sm",label:"Small"},{value:"md",label:"Medium"},{value:"lg",label:"Large"}],l={sm:{width:"300px",height:"400px"},md:{width:"380px",height:"500px"},lg:{width:"420px",height:"600px"}},n={sm:{width:"200px",height:"300px"},md:{width:"280px",height:"400px"},lg:{width:"320px",height:"450px"}},c=[{code:"en",name:"English",native:"English"},{code:"ar",name:"Arabic",native:"العربية"},{code:"af",name:"Afrikaans",native:"Afrikaans"},{code:"ml",name:"Malayalam",native:"മലയാളം"},{code:"kn",name:"Kannada",native:"ಕನ್ನಡ"},{code:"ta",name:"Tamil",native:"தமிழ்"},{code:"gu",name:"Gujarati",native:"Gujarati"},{code:"ig",name:"Igbo",native:"Igbo"},{code:"yo",name:"Yoruba",native:"Yoruba"}].map(r=>({label:`${r.name}`,value:r.code,full:r})),b=(r,t,u)=>{let g,h;const x=u==="dimension"?l:n;x[r]&&(g=x[r].width,h=x[r].height),t(u,r),t(`${u}Width`,g),t(`${u}Height`,h)};return e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-thin text-primary mb-4",children:" Choose Position And Size"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-2 sm:gap-4 lg:gap-8 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:" Dimension (Desktop)"}),e.jsx(P,{field:"dimension",options:i,onChange:r=>b(r,s,"dimension"),showClear:!1,value:o.dimension||"",className:"border rounded-md h-12 w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:" Position"}),e.jsx(P,{field:"windowAlign",options:a,onChange:r=>s("windowAlign",r),showClear:!1,value:o.windowAlign||"",className:"border rounded-md h-12 w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Spacing on corner"}),e.jsx(j,{field:"paddingLeft",placeholder:"0px",onChange:r=>s("paddingLeft",r),value:o.paddingLeft,wrapperClassName:"border rounded-md h-12 w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Spacing on Bottom"}),e.jsx(j,{field:"paddingBottom",placeholder:"0px",onChange:r=>s("paddingBottom",r),value:o.paddingBottom,wrapperClassName:"border rounded-md h-12 w-full"})]})]}),e.jsxs("div",{className:"mt-8 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8 lg:gap-12",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:" Dimension (Mobile)"}),e.jsx(P,{field:"mobileDimension",options:i,onChange:r=>b(r,s,"mobileDimension"),showClear:!1,value:o.mobileDimension||"",className:"border rounded-md h-12 w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Desktop proactive window"}),e.jsx(S,{name:"autoLaunch",value:o.autoLaunch,onChange:(r,t)=>s(r,t),className:"border h-12 rounded-md w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Mobile proactive window"}),e.jsx(S,{name:"mobileAutoLaunch",value:o.mobileAutoLaunch,onChange:(r,t)=>s(r,t),className:"border h-12 rounded-md w-full"})]})]}),e.jsxs("div",{className:"mt-8 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8 lg:gap-12",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Choose Language"}),e.jsx(P,{field:"translateLanguages",options:c,onChange:r=>{const t=c.filter(u=>r.includes(u.value)).map(u=>u.full);s("translateLanguages",t)},showClear:!1,value:(o.translateLanguages||[]).map(r=>r.code),className:"border rounded-md w-full h-12",multiple:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Select default languages"}),e.jsx(P,{field:"defaultLanguage",options:c,onChange:r=>{const t=c.filter(u=>r.includes(u.value)).map(u=>u.full);s("defaultLanguage",t)},disabled:!o.multiLanguageChat||o.multiLanguageChat==="No",showClear:!1,value:(o.defaultLanguage||[]).map(r=>r.code),className:"border h-12 rounded-md w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:" Enable Multilingual Support?"}),e.jsxs("div",{className:"flex flex-row items-center space-x-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"multiLanguageChat",value:"true",checked:o.multiLanguageChat===!0,onChange:()=>s("multiLanguageChat",!0),className:"mr-2"})," ","Yes"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"multiLanguageChat",value:"false",checked:o.multiLanguageChat===!1,onChange:()=>s("multiLanguageChat",!1),className:"mr-2"})," ","No"]})]})]})]})]})};function ye({values:o,setFieldValue:s}){return e.jsxs("div",{className:"mb-8  border-y",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-thin text-primary mb-4",children:"Choose Position And Size"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8 lg:gap-12 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Background Color *"}),e.jsx(j,{field:"bgColor",placeholder:"#000000",onChange:a=>s("bgColor",a),value:o.bgColor,wrapperClassName:"border rounded-md h-12 w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Font Color *"}),e.jsx(j,{field:"fontColor",placeholder:"#000000",onChange:a=>s("fontColor",a),value:o.fontColor,wrapperClassName:"border rounded-md h-12 w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Font Size"}),e.jsx(j,{field:"fontSize",placeholder:"16px",onChange:a=>s("fontSize",a),value:o.fontSize,wrapperClassName:"border rounded-md h-12 w-full"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8 lg:gap-12 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Chat Window Title *"}),e.jsx(j,{field:"titleText",placeholder:"Provide your chat window title",onChange:a=>s("titleText",a),value:o.titleText,wrapperClassName:"border rounded-md h-12 w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Chat Window Header Padding"}),e.jsx(j,{field:"headerPadding",placeholder:"padding: 2px 5px 2px 5px",onChange:a=>s("headerPadding",a),value:o.headerPadding,wrapperClassName:"border rounded-md h-12 w-full"})]})]})]})}const q=200*1024,Be=({values:o,setFieldValue:s})=>{const[a,i]=f.useState(null),[l,n]=f.useState(null),m=f.useRef(null),c=g=>{var h,x,N;try{const d=(h=g.target.files)==null?void 0:h[0];if(!d)return;const p=d.size;d.type.startsWith("image/")&&p<=q?(s("botLogo",d),i(URL.createObjectURL(d)),n(d)):((x=B)==null||x(!0,"Please upload valid image file and size is <= "+q/1e3+" kb","error"),s("botLogo",null),i(null),n(null),g.target.value="")}catch(d){console.log("Error selecting the image ::",d),(N=B)==null||N(!0,"Please select the image file","error"),s("botLogo",null),i(null),n(null),g.target.value=""}},b=async(g,h)=>{try{const x=document.createElement("div");document.body.appendChild(x);const N=V.createRoot(x);N.render(g),setTimeout(()=>{const d=x.querySelector("svg");if(d){const p=d.outerHTML,v=new Blob([p],{type:"image/svg+xml"}),C=new File([v],`bot-icon-${h+1}.svg`,{type:"image/svg+xml"});s("botLogo",C),i(URL.createObjectURL(C)),n(C)}else console.log("SVG element not found.");N.unmount(),document.body.removeChild(x)},100)}catch(x){console.log("Error processing SVG icon.",x)}},r=async()=>{var g,h;try{if(!l)return;let x=l;U&&(x=await U("botChatButton",l)),s("botLogo",x),(g=B)==null||g(!0,"Logo uploaded successfully.","success"),n(null)}catch(x){console.log("File upload failed. Please try again later.",x),(h=B)==null||h(!0,"File upload failed. Please try again later.","error")}},t=async()=>{var g,h;try{O&&await O("botLogo"),s("botLogo",null),i(null),n(null),(g=B)==null||g(!0,"Logo deleted successfully.","success")}catch(x){console.log("Deleting logo failed. Please try again later.",x),(h=B)==null||h(!0,"Deleting logo failed. Please try again later.","error")}},u=[e.jsx(z,{},"default"),e.jsx(z,{},"v1"),e.jsx(ae,{},"v2"),e.jsx(le,{},"v3"),e.jsx(re,{},"v4")];return e.jsxs("div",{className:"mt-12 border-y py-4",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-thin text-primary mb-4",children:"Chat Launcher Setting"}),e.jsxs("div",{className:"mb-12",children:[e.jsx("label",{className:"block text-sm text-gray-600 my-4",children:"Choose Icon"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 sm:gap-4",children:[u.map((g,h)=>e.jsx(L,{icon:g,type:"rounded",className:"border border-gray-300 hover:bg-gray-100 p-2 sm:p-4 rounded-full w-12 h-12 sm:w-16 sm:h-16 flex items-center justify-center",onClick:()=>b(g,h)},h)),e.jsxs("span",{className:"relative",children:[e.jsx(L,{icon:a?e.jsx("img",{src:a,alt:"Bot Icon Preview",className:"w-10 h-10 sm:w-12 sm:h-12 rounded-full object-cover"}):e.jsx(te,{}),type:"rounded",className:"border border-gray-300 text-primary p-2 sm:p-4 rounded-full w-12 h-12 sm:w-16 sm:h-16 flex items-center justify-center",onClick:()=>{var g;return(g=m.current)==null?void 0:g.click()}}),e.jsx("input",{ref:m,type:"file",accept:"image/*",style:{display:"none"},onChange:c})]})]}),e.jsx("div",{className:"flex gap-2 mt-5",children:l&&e.jsxs(e.Fragment,{children:[e.jsx(L,{label:"Upload",type:"primary",onClick:r}),e.jsx(L,{label:"Delete",type:"secondary",onClick:t})]})}),l&&e.jsxs("div",{className:"text-xs mt-2",children:["File Name : ",l.name]})]}),e.jsxs("div",{className:"mt-8 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8 lg:gap-12",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Header Logo Margin"}),e.jsx(j,{field:"headerLogoMargin",placeholder:"0px",onChange:g=>s("headerLogoMargin",g),value:o==null?void 0:o.headerLogoMargin,wrapperClassName:"border rounded-md h-12 w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Width"}),e.jsx(j,{field:"logoWidth",placeholder:"0px",onChange:g=>s("logoWidth",g),value:o==null?void 0:o.logoWidth,wrapperClassName:"border rounded-md h-12 w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Height"}),e.jsx(j,{field:"logoHeight",placeholder:"0px",onChange:g=>s("logoHeight",g),value:o==null?void 0:o.logoHeight,wrapperClassName:"border rounded-md h-12 w-full"})]})]})]})};async function Le(o){return await Z(`/organization/organization-props/${o}`,{},{noAuth:!0})}const y={BOT:"bot",ADVANCE:"advance"};function ke({onChange:o}){var h,x,N;const[s,a]=_(),[i,l]=f.useState(y.BOT),n=I(d=>{var p;return(p=d.organization)==null?void 0:p.organizationPropId}),[m,c]=f.useState(null);if(f.useEffect(()=>{n&&(async()=>{try{const d=await Le(n);c(d)}catch(d){c(null),console.error("Failed to fetch organization props:",d)}})()},[n]),!a)return null;const{botName:b,botDesign:r={}}=a,t=r,u={bgColor:(t==null?void 0:t.backgroundColor)||"#484a49",botBorderColor:(t==null?void 0:t.botBorderColor)||"#484a49",botBackgroundColor:(t==null?void 0:t.botBackgroundColor)||"#dfd9df",botFontColor:(t==null?void 0:t.botFontColor)||"#000000",visitorBorderColor:(t==null?void 0:t.visitorBorderColor)||"#000000",visitorBackgroundColor:(t==null?void 0:t.visitorBackgroundColor)||"#ffffff",visitorFontColor:(t==null?void 0:t.visitorFontColor)||"#000000",fontType:(t==null?void 0:t.fontType)||"normal-font",windowAlign:(t==null?void 0:t.windowAlign)||"bottomRight",fontColor:(t==null?void 0:t.textColor)||"#484a49",titleText:b,placeholder:"Type your message...",launcherType:"bar",messageBubbleLogo:!0,botLogo:(t==null?void 0:t.botLogo)||{},visitorMessageLogo:(t==null?void 0:t.visitorMessageLogo)||{},botMessageLogo:(t==null?void 0:t.botMessageLogo)||{},botChatButton:(t==null?void 0:t.botChatButton)||{},hideLivservBranding:(t==null?void 0:t.hideLivservBranding)||!1,showMinimizeButtonToolTip:(t==null?void 0:t.showMinimizeButtonToolTip)||!0,...t};m&&(u.domainSettings={domain:(h=m==null?void 0:m.consoleSettings)==null?void 0:h.domain,website:(x=m==null?void 0:m.consoleSettings)==null?void 0:x.website,displayName:(N=m==null?void 0:m.consoleSettings)==null?void 0:N.displayName});const g=async(d,{setErrors:p,setStatus:v,setSubmitting:C})=>{var w,R,T,A,H,F,$,W;try{((w=d.botChatButton)==null?void 0:w.name)!==((R=t.botChatButton)==null?void 0:R.name)&&(d.botChatButton=t.botChatButton),((T=d.botLogo)==null?void 0:T.name)!==((A=t.botLogo)==null?void 0:A.name)&&(d.botLogo=t.botLogo),((H=d.visitorMessageLogo)==null?void 0:H.name)!==((F=t.visitorMessageLogo)==null?void 0:F.name)&&(d.visitorMessageLogo=t.visitorMessageLogo),(($=d.botMessageLogo)==null?void 0:$.name)!==((W=t.botMessageLogo)==null?void 0:W.name)&&(d.botMessageLogo=t.botMessageLogo),await se(s,d),v({success:!1}),C(!1)}catch(K){console.error(K),v({success:!1}),p({submit:K.message}),C(!1)}};return e.jsx(e.Fragment,{children:e.jsx(ee,{initialValues:u,validationSchema:void 0,onSubmit:g,children:d=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-full h-full bg-white rounded-lg shadow-lg p-14",children:[e.jsxs("div",{className:"flex items-center space-x-4 border-b pb-4 mb-4",children:[e.jsxs("div",{className:"relative flex items-center justify-center",children:[e.jsx("button",{className:`px-4 py-2 text-black ${i===y.BOT?"text-orange-600 bg-white border border-[#FB9F37] rounded-md shadow-md transition":""}`,onClick:()=>l(y.BOT),children:"Bot Setting"}),i===y.BOT&&e.jsx("div",{className:"absolute bottom-[-8px] w-4 h-4 bg-white border-l border-b border-[#FB9F37]",style:{transform:"rotate(-46deg)"}})]}),e.jsxs("div",{className:"relative flex items-center justify-center",children:[e.jsx("button",{className:`px-4 py-2 text-black ${i===y.ADVANCE?"text-orange-600 bg-white border border-[#FB9F37] rounded-md shadow-md transition":""}`,onClick:()=>l(y.ADVANCE),children:"Advance Setting"}),i===y.ADVANCE&&e.jsx("div",{className:"absolute bottom-[-8px] w-4 h-4 bg-white border-l border-b border-[#FB9F37]",style:{transform:"rotate(-46deg)"}})]})]}),e.jsxs("form",{noValidate:!0,onSubmit:d.handleSubmit,children:[i===y.BOT&&e.jsxs(e.Fragment,{children:[e.jsx(we,{...d}),e.jsx(Be,{...d}),e.jsx(ve,{...d}),e.jsx(ye,{...d}),e.jsx(Ne,{...d})]}),i===y.ADVANCE&&e.jsx(je,{...d})]}),e.jsx(Se,{onChange:o}),e.jsx("div",{className:"flex mt-12 justify-end",children:e.jsx(L,{label:"Save Changes",onClick:()=>d.handleSubmit()})})]})})})})}function Se({onChange:o}){const{values:s}=oe();return f.useEffect(()=>{s&&o(ne(s))},[s,o]),null}const G=[{value:"gpt-4o-mini",label:"GPT 4o Mini Latest (default)",description:"Current Latest Mini model of GPT 4o. Cheaper and faster than GPT 4o."},{value:"gpt-4.1-mini-2025-04-14",label:"gpt-4.1-mini",description:"3 times costly than GPT 4o."},{value:"gpt-4.1-nano-2025-04-14",label:"gpt-4.1-nano",description:"Cheaper and faster than GPT 4o"},{value:"gpt-4o-mini-2024-07-18",label:"GPT 4o Mini (July 2024)",description:"Mini model of GPT 4o. Cheaper and faster than GPT 4o."},{value:"gpt-4o",label:"GPT 4o Latest",description:"Latest model of GPT 4o. More capable, cheaper and faster than GPT 4 Turbo."},{value:"gpt-4o-2024-08-06",label:"GPT 4o (Aug 2024)",description:"May 2024 Release of GPT 4o. More capable, cheaper and faster than GPT 4 Turbo."},{value:"gpt-4",label:"GPT 4 Turbo",description:"Latest stable model of GPT 4. More capable, but is 5 times costly then 3.5 models."},{value:"gpt-4-1106-preview",label:"GPT 4 Latest Preview",description:"Latest preview model of GPT 4. Most capable model, but is 3 times costly then 3.5 models."},{value:"gpt-3.5-turbo-0125",label:"GPT 3.5 Latest Stable",description:"Latest stable model of GPT 3.5. More performant. Random minor inconsistency observed sometimes."},{value:"gpt-3.5-turbo-1106",label:"GPT 3.5 Latest Preview",description:"Latest preview model of GPT 3.5. This is more accurate than latest stable, but some times non responsive while on peek loads."}],J=G.reduce((o,s)=>(o[s.value]=s,o),{});function Te({value:o,hideDescription:s=!1,onChange:a,className:i,...l}){const n=G.map(r=>({label:r.label,value:r.value}));o&&!J[o]&&n.push({label:o,value:o});const m=J[o]||G[0],c=o||G[0].value,b=r=>{a&&a(r)};return e.jsxs(e.Fragment,{children:[e.jsx(X,{...l,className:i||"w-full border border-gray-300 rounded px-2 py-2",value:c,options:n,onChange:r=>b(r),showClear:!1,placeholder:"Select a model..."}),!s&&e.jsx("div",{className:"text-xs text-gray-600 mt-1",id:"bot-model-description",children:m.description})]})}function Me({message:o,isSuperUser:s,onReplay:a}){const{content:i,searchQuery:l,passedDocIds:n,index:m,model:c}=o,[b,r]=f.useState([]),[t,u]=f.useState(c);f.useEffect(()=>{(async()=>{const h=await ge(n);r(h)})()},[n]),f.useEffect(()=>{u(o.model)},[o]);const g=E.useCallback(h=>u(h),[]);return e.jsxs("div",{className:"kb-docs-editor",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("strong",{children:"Selected Bot:"}),e.jsx("div",{className:"min-w-[200px]",children:e.jsx(Te,{value:t,hideDescription:!0,onChange:g})})]}),e.jsx(D,{style:{marginLeft:8},variant:"contained",color:"primary",size:"medium",onClick:()=>a&&a(m,t),children:"Replay"})]}),e.jsxs("div",{className:"ellipsis",children:[e.jsx("strong",{children:"Message: "}),e.jsx("span",{title:i,children:i})]}),s&&l&&e.jsxs("div",{className:"ellipsis",children:[e.jsx("strong",{children:"Search Query: "}),e.jsx("span",{children:l})]}),e.jsx("div",{children:e.jsx(he,{docsList:b})})]})}function so(){var v;const[o,s]=f.useState(null),[a,i]=f.useState(!1),[l,n]=f.useState({}),[m,c]=f.useState(),[b,r]=_(),{organizationId:t}=r,u=C=>me(C.organization),[g,h]=f.useState(!1),{isSuperUser:x}=I(),N=()=>h(!0);if(f.useEffect(()=>{if(!t||!b)return;(async()=>{try{const w=await Z(`/bot/${t}/${b}/chat/startup-flow`,{recipientId:Y()});c(w||!1)}catch(w){c(!1),console.error("Failed to fetch startup flow:",w)}})()},[b,t]),m===void 0)return null;const d=C=>{const{role:w,type:R,passedDocIds:T,searchQuery:A}=C||{};if(w!=="assistant"||R!=="text"||!(T!=null&&T.length)&&!A)return null;const H=()=>e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{d:"M19 2H8c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h11c.55 0 1-.45 1-1V3c0-.55-.45-1-1-1zm0 17H8V4h11v15zm-2-7H10v2h7v-2zm0-4H10v2h7V8zm-9 9H5V5c0-1.1.9-2 2-2h1v2H7v12zm0 2v-2h1v2H7z"})});return e.jsx("span",{className:"ml-2 cursor-pointer",onClick:()=>p(C),children:e.jsx(H,{})})},p=C=>{console.log("Clicked on KB icon",C),s(C),i(!0)};return e.jsxs("div",{className:"w-full p-8",children:[e.jsx("div",{className:"mb-4",children:e.jsx(xe,{title:"Chat Window Design"})}),e.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-8"}),e.jsxs("div",{children:[e.jsx("div",{className:"w-full mb-4",children:e.jsx(ke,{onChange:n})}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx(D,{isLoading:g,disabled:g,variant:"contained",color:"success",size:"large",onClick:N,children:"Deploy Bot"})}),e.jsxs("div",{className:"w-full",children:[e.jsx(ie,{botDetails:r,botDesign:l,startupFlow:m,autoLaunch:(v=r==null?void 0:r.botDesign)==null?void 0:v.autoLaunch,recipientId:Y(),onReceiveChatResponse:u,onCallback:ce,optionsRenderer:d}),e.jsx(de,{openPopUpDialog:a,setPopUpDialog:i,title:"View and update Knowledge base",children:o&&e.jsx(Me,{message:o,isSuperUser:x})})]})]})]})}export{so as default};
