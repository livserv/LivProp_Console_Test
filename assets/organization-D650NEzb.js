import{g as d,p as s,t as S}from"./ajax-C92vMgMI.js";import{c as i,u as f}from"./AlertSnackbar-C1aUMYU1.js";async function b(t,a){const e=await l(),{organizationId:n}=i.getState();return t?t!==n&&i.setState({organizationId:t}):t=n,t&&(e||await z(t),await p(t,a)),!0}async function l(){const t=i.getState();let{organizationList:a,organizationId:e,organization:n}=t;if(!(!t.isSuperUser||Array.isArray(a))){if(a=await s("/organization/list",null),a?.length)if(e=e||sessionStorage.getItem("orgId"),e)n||(n=a?.filter(o=>o._id===e)[0]);else{const o=a[0];e=o._id,n=o}return i.setState({organizationList:a,organizationId:e,organization:n}),!0}}async function w(t,a){a||(a=i.getState().organizationId);const e=await S(`/organization/${a}`,t);i.setState(n=>{const{organizationList:o,organizationId:r,organization:u}=n,c={};return r===a&&(c.organization={...u,...e}),o&&(c.organizationList=o.map(g=>g._id===a?{...g,...e}:g)),c})}function O(t){if(!t||typeof t!="object")return;let{organization:a}=i.getState();a&&(a={...a,...t},i.setState({organization:a}))}async function p(t,a){const e=await d(`/bot/${t}/list`),n=a||e[0]?._id,o=e.reduce((r,u)=>(r[u._id]=u,r),{});return i.setState({organizationId:t}),f.setState({botsList:e,botsMap:o,selectedBotId:n}),n}async function z(t){const a=await s("/organization/get-organization-by-id",{organizationId:t});i.setState({organization:a})}function h(t){f.setState({selectedBotId:t})}async function L(t,a){const{organizationId:e}=i.getState(),n={countryCode:t,phoneNumber:a};return await s(`/organization/${e}/add-phone-number`,n)}async function v(t,a,e){const{organizationId:n}=i.getState(),o={countryCode:t,phoneNumber:a,otp:e};return await s(`/organization/${n}/validate-phone-number`,o)}async function I(t,a){const{organizationId:e}=i.getState(),n={countryCode:t,phoneNumber:a};return await s(`/organization/${e}/resend-phone-number-otp`,n)}async function B(){const t=await d("/organization/invoice/list");i.setState({organizationsInvoiceList:t})}export{L as a,O as b,p as c,B as g,b as l,I as r,h as s,w as u,v};
