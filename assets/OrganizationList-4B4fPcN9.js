import{j as t,h as b,r,R as o,c as I}from"./AlertSnackbar-BBOi9bHj.js";import{c as g,u as H,f as K,j as _}from"./index-CUzqN5ta.js";import{F as A,b as m}from"./formik.esm-WsGY0UtP.js";import"./Button-htJsKnEd.js";import{T as d}from"./Toggle-Dkzm6auk.js";import{P as E}from"./ProgressButton-DbRXTBvR.js";import{b as N}from"./organization-4CNJ-QOP.js";import{S as W}from"./settings-CIYTS2AL.js";/* empty css                */import{T as G}from"./Table-CDeL5VqL.js";import{B as v}from"./Button-Cjbknt0d.js";import{S}from"./SelectButton-DG4ibJE8.js";import{T as V}from"./TextBox-vTD9KzNe.js";import{s as q}from"./utils-BPLOM7gE.js";import{P as J}from"./PageHeader-BsmArPDS.js";import{S as Q}from"./download-CJnziux0.js";import{S as X}from"./search-DFPqfhni.js";import"./env-CmL5wTXD.js";import"./SelectBox-zddttI4M.js";import"./LabelWrapper-C5GcLzYW.js";import"./useSelectedBot-D0BiDtF-.js";function Y({organizationId:h,consoleDisplaySettings:i={},onDone:c}){const u={hideTrainingTab:i?.hideTrainingTab||!1,hideSettingsTab:i?.hideSettingsTab||!1,hideKBTab:i?.hideKBTab||!1,hideMediaTab:i?.hideMediaTab||!1,hideDesignTab:i?.hideDesignTab||!1,hideFlowDesignTab:i?.hideFlowDesignTab??!0},p=async a=>{try{await N({settings:a},h),b(!0,"Console display settings updated successfully","success"),c()}catch{b(!0,"Not able to update the console display settings. Try after sometime!","error")}};return t.jsx(A,{initialValues:u,onSubmit:p,children:({values:a,handleChange:n,isSubmitting:l,handleSubmit:x})=>t.jsxs("form",{onSubmit:x,className:"space-y-4",children:[t.jsx("div",{className:"text-lg font-semibold border-b pb-2",children:"Console Settings"}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{children:"Hide Settings"}),t.jsx(m,{as:d,name:"hideSettingsTab",checked:a.hideSettingsTab,onChange:()=>n({target:{name:"hideSettingsTab",value:!a.hideSettingsTab}})})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{children:"Hide Knowledge Base"}),t.jsx(m,{as:d,name:"hideKBTab",checked:a.hideKBTab,onChange:()=>n({target:{name:"hideKBTab",value:!a.hideKBTab}})})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{children:"Hide Conversation Media"}),t.jsx(m,{as:d,name:"hideMediaTab",checked:a.hideMediaTab,onChange:()=>n({target:{name:"hideMediaTab",value:!a.hideMediaTab}})})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{children:"Hide Bot Design"}),t.jsx(m,{as:d,name:"hideDesignTab",checked:a.hideDesignTab,onChange:()=>n({target:{name:"hideDesignTab",value:!a.hideDesignTab}})})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{children:"Hide Bot Flow"}),t.jsx(m,{as:d,name:"hideFlowDesignTab",checked:a.hideFlowDesignTab,onChange:()=>n({target:{name:"hideFlowDesignTab",value:!a.hideFlowDesignTab}})})]}),t.jsx("div",{className:"flex justify-end pt-4",children:t.jsx(E,{isLoading:l,disabled:l,type:"submit",children:"Update"})})]})})}const C=[{value:0,label:"Organization List"},{value:1,label:"Organization Invoice"}],Z=[{value:"today",label:"Today"},{value:"week",label:"Week"},{value:"month",label:"Month"},{value:"custom",label:"Custom"}];function we(){const[h,i]=r.useState(1),[c,u]=r.useState(10),p=[{field:"name",title:"Name",sortable:!0},{field:"websiteUrl",title:"Website",cellClassName:g("max-w-[250px]"),hideBelow:"lg",template:e=>!!e.websiteUrl&&t.jsx("a",{href:e.websiteUrl,target:"_blank",title:e.websiteUrl,rel:"noreferrer noopener",children:H(e.websiteUrl)})},{field:"email",title:"Email",cellClassName:g("max-w-[250px]"),hideBelow:"sm"},{field:"registeredAt",title:"Registered Date",hideBelow:"xl",sortable:!0},{field:"credits",title:"Credits",hideBelow:"lg",sortable:!0},{field:"managed",title:"Managed",cellClassName:g("text-center"),hideBelow:"md",template:e=>t.jsx(d,{checked:e.handledByLivServ,containerClassName:"mx-auto",onChange:s=>O(s,e._id)})},{field:"",title:"",cellClassName:g("text-center"),template:e=>t.jsx(v,{icon:t.jsx(W,{}),type:"plain",onClick:()=>M(e._id,e.settings)})}],[a,n]=r.useState(""),[l,x]=o.useState(C[0]),[B,D]=o.useState(),w=I(e=>e.organizationList),[f,L]=o.useState(),[,y]=r.useState(!1),[z,k]=r.useState();r.useEffect(()=>{f&&F(f)},[f]);const j=o.useMemo(()=>w.map(e=>({_id:e._id,name:e.organizationName,websiteUrl:e.websiteUrl,email:e.admins.map(s=>s.email).join(", "),registeredAt:_(e.registeredAt),credits:K(e.availableCredits),handledByLivServ:e.handledByLivServ,settings:e.settings})),[w]),M=(e,s)=>{L(e),k(s),y(!0)},F=e=>q(t.jsx(Y,{organizationId:e,consoleDisplaySettings:z,onDone:()=>y(!1)}),{showCloseButton:!0,width:"700px"}),O=async(e,s)=>{const R=e,U=s;try{await N({handledByLivServ:R},U),b(!0,"Handled by LivServ updated successfully","success")}catch{b(!0,"Not able to update the Handled by LivServ. Try after sometime!","error")}},T=o.useMemo(()=>{const e=a?.toLowerCase()?.trim();return e?j.filter(s=>s.name?.toLowerCase().includes(e)||s.email?.toLowerCase().includes(e)||s.websiteUrl?.toLowerCase().includes(e)):j},[a,j]),P=o.useMemo(()=>{const e=(h-1)*c,s=e+c;return T.slice(e,s)},[T,h,c]);return t.jsxs("div",{children:[t.jsx(J,{title:"Organizations"}),t.jsxs("div",{className:"flex flex-col gap-3 pt-6",children:[t.jsxs("div",{className:"flex justify-between py-4",children:[t.jsxs("div",{className:"pt-2",children:[!l?.value&&t.jsx("span",{className:"text-sm font-semibold",children:"Organization List"}),!!l?.value&&t.jsx("span",{className:"text-sm font-semibold",children:"Organization Invoice"}),t.jsx(S,{value:l,onChange:x,items:C,iconOnly:!0,className:"bg-primary pt-0 ps-0 pb-0 pr-0 text-white ms-2 align-middle"})]}),t.jsxs("div",{className:"flex",children:[t.jsx(V,{value:a,placeholder:"Search",onChange:e=>n(e.target.value),iconRight:X,className:"py-5"}),t.jsx(v,{icon:t.jsx(Q,{}),size:"sm",type:"secondary",className:"mr-2 align-middle"}),t.jsx(S,{value:B,items:Z,prefix:"Group by:",onChange:D,className:"bg-[#323131] text-white align-middle"})]})]}),t.jsx(G,{rows:P,columns:p,totalRows:T?.length,pagination:!0,onChange:({pageNumber:e,count:s})=>{i(e),u(s)}})]})]})}export{we as default};
