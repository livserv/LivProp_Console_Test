import{j as r,r as l}from"./index-DO8LqdQC.js";import{c as b}from"./Button-N1_BEumt.js";import{R as $}from"./ajax-0v7BZX0O.js";function P({label:a,iconLeft:f,iconRight:s,children:p,className:m,...i}){const n=r.jsxs(r.Fragment,{children:[!!f&&r.jsx(f,{className:"absolute left-2 top-1/2 transform -translate-y-1/2"}),p,!!s&&r.jsx(s,{className:"absolute right-2 top-1/2 transform -translate-y-1/2"})]});return r.jsxs("div",{className:b("relative w-full ",m,{"border border-1 border-gray-300 rounded min-h-[30px] pt-[1px]":!a,"rounded-[8px] min-h-[55px]":!!a}),...i,children:[!a&&n,!!a&&r.jsxs("fieldset",{className:"relative border rounded-[8px] h-full w-full bg-white",children:[r.jsx("legend",{className:"text-labelBlue font-bold text-13px ms-3 px-1",children:a}),n]})]})}function J({label:a,placeholder:f="Choose here...",options:s=[],showFilter:p=s.length>10,showClear:m=!0,onChange:i=()=>{},value:n,className:j,multiple:c=!1}){const[d,g]=l.useState(!1),[x,A]=l.useState(""),[o,h]=l.useState(-1),[y,O]=l.useState(null),v=l.useRef(null),R=l.useRef(null),w=l.useRef(null),L=l.useRef(null),u=x?s.filter(e=>e.label!=null&&e.label.toString().toLowerCase().includes(x.toLowerCase())):s,H=s.find(e=>e.value===n),z=()=>g(e=>!e),k=()=>{g(!1),A(""),h(-1)},S=e=>c&&Array.isArray(n)?n.includes(e):n===e,N=e=>{if(c){let t=Array.isArray(n)?[...n]:[];t.includes(e.value)?t=t.filter(E=>E!==e.value):t.push(e.value),i(t)}else i(e.value),k()},K=e=>{e.stopPropagation(),i(c?[]:null)},M=e=>{e.stopPropagation(),w.current&&document.activeElement!==w.current&&w.current.focus()},I=e=>{e.stopPropagation(),h(-1)},T=()=>{if(c&&Array.isArray(n))return n.length===0?r.jsx("span",{className:"text-gray-400",children:f}):r.jsx("span",{children:s.filter(t=>n.includes(t.value)).map(t=>r.jsx("span",{className:"inline-block bg-gray-200 rounded px-2 py-1 mr-1 text-xs",children:t.label},t.value))});const e=s.find(t=>t.value===n);return e?e.label:r.jsx("span",{className:"text-gray-400",children:f})},W=()=>{if(v.current){const e=v.current.getBoundingClientRect(),t=200,E=window.innerHeight-e.bottom,B=e.top,D=E<t&&B>t,V=window.innerWidth<=640?window.innerWidth*.9:e.width,Y=window.innerWidth<=640?window.innerHeight*.8:D?B:E;O({top:D?e.top-(D?t:0)+window.scrollY:e.bottom+window.scrollY,left:window.innerWidth<=640?window.innerWidth*.05:e.left+window.scrollX,maxHeight:Y,width:V,dropUp:D})}};l.useEffect(()=>{const e=t=>{v.current&&!v.current.contains(t.target)&&L.current&&!L.current.contains(t.target)&&k()};return d?(document.addEventListener("mousedown",e),W(),h(-1),p&&w.current&&setTimeout(()=>{var t;(t=w.current)==null||t.focus()},10)):(document.removeEventListener("mousedown",e),A("")),()=>{document.removeEventListener("mousedown",e)}},[d,p]),l.useEffect(()=>{const e=()=>{d&&W()};return window.addEventListener("resize",e),window.addEventListener("scroll",e,!0),()=>{window.removeEventListener("resize",e),window.removeEventListener("scroll",e,!0)}},[d]),l.useEffect(()=>{if(o>=0&&R.current){const t=R.current.children[o];t&&t.scrollIntoView({block:"nearest"})}},[o]);const C=e=>{if(!d){(e.key==="ArrowDown"||e.key==="Enter")&&(g(!0),e.preventDefault());return}switch(e.key){case"ArrowDown":h(t=>Math.min(t+1,u.length-1)),e.preventDefault();break;case"ArrowUp":h(t=>Math.max(t-1,0)),e.preventDefault();break;case"Enter":o>=0&&o<u.length&&N(u[o]),e.preventDefault();break;case"Escape":k(),e.preventDefault();break}},U=e=>{e.key==="ArrowDown"||e.key==="ArrowUp"?C(e):e.key==="Enter"?u.length===1?(N(u[0]),e.preventDefault()):o>=0&&o<u.length&&(N(u[o]),e.preventDefault()):e.key==="Escape"&&(k(),e.preventDefault())},F=r.jsxs(r.Fragment,{children:[r.jsxs("div",{ref:v,className:b("flex items-center justify-between cursor-pointer mt-[-4px]",!/h-\[?.*?\]?/g.test(j||"")&&"h-full w-full min-w-[150px]",j),onClick:z,onKeyDown:C,tabIndex:0,"aria-haspopup":"listbox","aria-expanded":d,children:[r.jsx("span",{className:b("flex-1 px-4 text-sm",c&&Array.isArray(n)&&n.length>0||H?"text-black":"text-pBlack"),children:T()}),m&&(c&&Array.isArray(n)&&n.length>0||!c&&n)&&r.jsx("button",{onClick:K,className:"ml-2 text-gray-500 hover:text-gray-700 focus:outline-none","aria-label":"Clear selection",children:"Ã—"}),r.jsx("div",{className:"w-0 h-0 me-3 border-t-[6px] border-b-0 border-l-[3.5px] border-r-[3.5px] border-transparent border-t-labelBlue"})]}),d&&y&&$.createPortal(r.jsxs("div",{ref:L,className:b("absolute z-[11020] bg-white border border-gray-300 rounded shadow-lg",window.innerWidth<=640?"fixed top-0 left-0 right-0 bottom-0 m-auto":""),style:{top:window.innerWidth<=640?"10%":y.top,left:window.innerWidth<=640?"5%":y.left,width:window.innerWidth<=640?"90%":y.width,maxHeight:window.innerWidth<=640?"80%":y.maxHeight,overflow:"auto"},role:"listbox","aria-activedescendant":o>=0?`selectbox-option-${o}`:void 0,children:[p&&r.jsx("div",{className:"p-2 border-b border-gray-200",children:r.jsx("input",{ref:w,type:"text",value:x,onChange:e=>A(e.target.value),onClick:M,onFocus:I,onKeyDown:U,className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",placeholder:"Filter...","aria-label":"Filter options"})}),r.jsx("div",{className:"max-h-60 overflow-auto",ref:R,role:"presentation",children:u.length>0?u.map((e,t)=>r.jsxs("div",{id:`selectbox-option-${t}`,onClick:()=>N(e),onMouseEnter:()=>h(t),className:b("px-4 py-2 cursor-pointer text-black text-xs",S(e.value)?"bg-blue-500 text-white":"",o===t?"bg-gray-200":"","border-b border-gray-100 last:border-b-0"),role:"option","aria-selected":S(e.value),children:[c&&r.jsx("input",{type:"checkbox",checked:S(e.value),readOnly:!0,className:"mr-2"}),e.label]},e.value)):r.jsx("div",{className:"px-4 py-2 text-gray-500",children:"No options found"})})]}),document.body)]});return a?r.jsx(P,{label:a,children:F}):F}function Q({label:a,iconLeft:f,iconRight:s,className:p,wrapperClassName:m,onChange:i,field:n,args:j,...c}){const d=x=>{i&&i.length>1?i(x.target.value,n,j):i&&i(x)},g=r.jsx("input",{className:b("border-0 w-full h-full rounded-[8px] mt-[-5px] bg-transparent outline-none px-4 placeholder:text-pBlack placeholder:text-sm",p),onChange:d,...c});return r.jsx(P,{label:a,iconLeft:f,iconRight:s,className:m,children:g})}export{P as L,J as S,Q as T};
