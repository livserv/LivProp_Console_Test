import{j as a,f,r as d,R as l,c as _}from"./index-B6XUfh06.js";import{c as g,u as A,f as E,j as W}from"./ajax-BG6yagJp.js";import{F as G,b}from"./formik.esm-DLJFn_2m.js";import{T as o}from"./Toggle-BSnpVmUJ.js";import{P as V}from"./ProgressButton-D56BWUGB.js";import{b as y}from"./organization-C4BlQy8U.js";import{S as q}from"./settings-DFKCyzPl.js";/* empty css                */import{T as J}from"./Table-BEDn45FY.js";import{B as z}from"./Button-B05095K0.js";import{S}from"./SelectButton-DQdN_4N9.js";import{T as Q}from"./TextBox-CG_4tkVA.js";import{s as X}from"./utils-B3TvvZ68.js";import{P as Y,S as Z}from"./PageHeader-DzF7qJ6Y.js";import{S as $}from"./download-uiEoSgaJ.js";import"./env-CmL5wTXD.js";import"./useSelectedBot-BbpacNjs.js";function D({organizationId:u,consoleDisplaySettings:t={},onDone:m}){const j={hideTrainingTab:(t==null?void 0:t.hideTrainingTab)||!1,hideSettingsTab:(t==null?void 0:t.hideSettingsTab)||!1,hideKBTab:(t==null?void 0:t.hideKBTab)||!1,hideMediaTab:(t==null?void 0:t.hideMediaTab)||!1,hideDesignTab:(t==null?void 0:t.hideDesignTab)||!1,hideFlowDesignTab:(t==null?void 0:t.hideFlowDesignTab)??!0},w=async s=>{try{await y({settings:s},u),f(!0,"Console display settings updated successfully","success"),m()}catch{f(!0,"Not able to update the console display settings. Try after sometime!","error")}};return a.jsx(G,{initialValues:j,onSubmit:w,children:({values:s,handleChange:n,isSubmitting:r,handleSubmit:T})=>a.jsxs("form",{onSubmit:T,className:"space-y-4",children:[a.jsx("div",{className:"text-lg font-semibold border-b pb-2",children:"Console Settings"}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:"Hide Settings"}),a.jsx(b,{as:o,name:"hideSettingsTab",checked:s.hideSettingsTab,onChange:()=>n({target:{name:"hideSettingsTab",value:!s.hideSettingsTab}})})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:"Hide Knowledge Base"}),a.jsx(b,{as:o,name:"hideKBTab",checked:s.hideKBTab,onChange:()=>n({target:{name:"hideKBTab",value:!s.hideKBTab}})})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:"Hide Conversation Media"}),a.jsx(b,{as:o,name:"hideMediaTab",checked:s.hideMediaTab,onChange:()=>n({target:{name:"hideMediaTab",value:!s.hideMediaTab}})})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:"Hide Bot Design"}),a.jsx(b,{as:o,name:"hideDesignTab",checked:s.hideDesignTab,onChange:()=>n({target:{name:"hideDesignTab",value:!s.hideDesignTab}})})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:"Hide Bot Flow"}),a.jsx(b,{as:o,name:"hideFlowDesignTab",checked:s.hideFlowDesignTab,onChange:()=>n({target:{name:"hideFlowDesignTab",value:!s.hideFlowDesignTab}})})]}),a.jsx("div",{className:"flex justify-end pt-4",children:a.jsx(V,{isLoading:r,disabled:r,type:"submit",children:"Update"})})]})})}const k=[{value:0,label:"Organization List"},{value:1,label:"Organization Invoice"}],ee=[{value:"today",label:"Today"},{value:"week",label:"Week"},{value:"month",label:"Month"},{value:"custom",label:"Custom"}];function je(){const[u,t]=d.useState(1),[m,j]=d.useState(10),w=[{field:"name",title:"Name",sortable:!0},{field:"websiteUrl",title:"Website",cellClassName:g("max-w-[250px]"),hideBelow:"lg",template:e=>!!e.websiteUrl&&a.jsx("a",{href:e.websiteUrl,target:"_blank",title:e.websiteUrl,rel:"noreferrer noopener",children:A(e.websiteUrl)})},{field:"email",title:"Email",cellClassName:g("max-w-[250px]"),hideBelow:"sm"},{field:"registeredAt",title:"Registered Date",hideBelow:"xl",sortable:!0},{field:"credits",title:"Credits",hideBelow:"lg",sortable:!0},{field:"managed",title:"Managed",cellClassName:g("text-center"),hideBelow:"md",template:e=>a.jsx(o,{checked:e.handledByLivServ,containerClassName:"mx-auto",onChange:i=>H(i,e._id)})},{field:"",title:"",cellClassName:g("text-center"),template:e=>a.jsx(z,{icon:a.jsx(q,{}),type:"plain",onClick:()=>U(e._id,e.settings)})}],[s,n]=d.useState(""),[r,T]=l.useState(k[0]),[M,F]=l.useState(),N=_(e=>e.organizationList),[p,O]=l.useState(),[,B]=d.useState(!1),[P,R]=d.useState();d.useEffect(()=>{p&&I(p)},[p]);const v=l.useMemo(()=>N.map(e=>({_id:e._id,name:e.organizationName,websiteUrl:e.websiteUrl,email:e.admins.map(i=>i.email).join(", "),registeredAt:W(e.registeredAt),credits:E(e.availableCredits),handledByLivServ:e.handledByLivServ,settings:e.settings})),[N]),U=(e,i)=>{O(e),R(i),B(!0)},I=e=>X(a.jsx(D,{organizationId:e,consoleDisplaySettings:P,onDone:()=>B(!1)}),{showCloseButton:!0,width:"700px"}),H=async(e,i)=>{const h=e,x=i;try{await y({handledByLivServ:h},x),f(!0,"Handled by LivServ updated successfully","success")}catch{f(!0,"Not able to update the Handled by LivServ. Try after sometime!","error")}},c=l.useMemo(()=>{var i;const e=(i=s==null?void 0:s.toLowerCase())==null?void 0:i.trim();return e?v.filter(h=>{var x,C,L;return((x=h.name)==null?void 0:x.toLowerCase().includes(e))||((C=h.email)==null?void 0:C.toLowerCase().includes(e))||((L=h.websiteUrl)==null?void 0:L.toLowerCase().includes(e))}):v},[s,v]),K=l.useMemo(()=>{const e=(u-1)*m,i=e+m;return c.slice(e,i)},[c,u,m]);return a.jsxs("div",{children:[a.jsx(Y,{title:"Organizations"}),a.jsxs("div",{className:"flex flex-col gap-3 pt-6",children:[a.jsxs("div",{className:"flex justify-between py-4",children:[a.jsxs("div",{className:"pt-2",children:[!(r!=null&&r.value)&&a.jsx("span",{className:"text-sm font-semibold",children:"Organization List"}),!!(r!=null&&r.value)&&a.jsx("span",{className:"text-sm font-semibold",children:"Organization Invoice"}),a.jsx(S,{value:r,onChange:T,items:k,iconOnly:!0,className:"bg-primary pt-0 ps-0 pb-0 pr-0 text-white ms-2 align-middle"})]}),a.jsxs("div",{className:"flex",children:[a.jsx(Q,{value:s,placeholder:"Search",onChange:e=>n(e.target.value),iconRight:Z,className:"py-5"}),a.jsx(z,{icon:a.jsx($,{}),size:"sm",type:"secondary",className:"mr-2 align-middle"}),a.jsx(S,{value:M,items:ee,prefix:"Group by:",onChange:F,className:"bg-[#323131] text-white align-middle"})]})]}),a.jsx(J,{rows:K,columns:w,totalRows:c==null?void 0:c.length,pagination:!0,onChange:({pageNumber:e,count:i})=>{t(e),j(i)}})]})]})}export{je as default};
