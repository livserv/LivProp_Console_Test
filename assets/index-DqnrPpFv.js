import{j as b,R as x}from"./AlertSnackbar-lBoJjy_c.js";import{j as T,k as w}from"./ajax-C92vMgMI.js";import{S as K}from"./SelectBox-CsK0tKl_.js";import{c as M}from"./index-DDVnIUkz.js";import{L as k}from"./LabelWrapper-DJDIkEgu.js";import{T as B}from"./TextBox-Byl1ojPW.js";function R({label:c,iconLeft:e,iconRight:n,className:g,wrapperClassName:s,args:r,field:a,onChange:d,value:o,...t}){const f=b.jsx("textarea",{className:M("border-0 w-full h-full rounded-[8px] mt-[-5px] bg-transparent outline-none px-4 placeholder:text-pBlack placeholder:text-sm",g),onChange:u=>d?.(u.currentTarget.value,a,r),...t,children:o});return b.jsx(k,{label:c,iconLeft:e,iconRight:n,className:s,children:f})}const $=x.createContext({}),S=$.Provider;function F(c,e){const{valueFieldProp:n="value",hasErrorFieldProp:g="hasError",errorMessageFieldProp:s="errorMessage",changeHandler:r,defaultProps:a}={};return function(o){const t=x.useContext($),{[n]:f,onChange:u,...h}=o,l=h,m=x.useRef({field:o.field,onChange:u,form:t,changeHandler:r});m.current={field:o.field,onChange:u,form:t,changeHandler:r};const C=x.useCallback((i,p,...v)=>{const{form:j,onChange:E,field:P,changeHandler:y}=m.current;typeof y=="function"&&(i=y(i,p,...v),p=P||p),P&&j?.onChange&&j.onChange(i,P,...v),E?.(i,p,...v)},[]);if(t?.getProps&&o.field){const{[n]:i=f,hasError:p,isTouched:v,errorMessage:j,middleware:E}=t.getProps(o,e);m.current.middleware=E,l[n]=x.useMemo(()=>{const{middleware:P,field:y}=m.current;return P?P(i,y,!1):i},[i]),p&&v&&(l[g]=p),j&&v&&(l[s]=j)}else l.value=f;return b.jsx(c,{...a,...l,onChange:C})}}function H(c,e){const n={hasError:!1};if(!c)return n;try{c.validateSync(e,{abortEarly:!1})}catch(g){const s=g.inner;n.hasError=!0,n.errors=s.reduce((r,a)=>(r[a.path]=a.message,r),{})}return n}function q(c){const e=x.useRef({props:c,touched:{}});e.current.props=c,e.current.errors=c.errors||e.current.errors;const{value:n}=c,g=x.useMemo(()=>({onChange:(s,r,a)=>{const{field:d,args:o,middleware:t,onChange:f,validator:u}=e.current.props,h=d?`${d}.${r}`:r,l=T(n,h,t?t(s,r,!0):s),m=H(u,l);e.current.errors=m,e.current.touched[r]=!0,f(l,d,{fieldArgs:a,field:r,args:o,errors:m})},getProps:(s,r)=>{const{field:a,middleware:d}=e.current.props,{valueFieldProp:o="value"}=r||{},{field:t,[o]:f}=s;if(!t)return{[o]:f};const u=a?`${a}.${t}`:t,h=e.current.errors?.errors?.[t];return{[o]:w(n,u),hasError:!!h,isTouched:e.current.touched[t],middleware:d,errorMessage:h}},setValue:(s,r)=>{if(!s||typeof s!="object")return;const{field:a,args:d,middleware:o,onChange:t,validator:f}=e.current.props,u=Object.keys(s);if(!u.length)return;const h=u.reduce((m,C)=>{const i=s[C],p=a?`${a}.${C}`:C;return T(m,p,o?o(i,C,!0):i)},n),l=f?.validate(h);e.current.errors=l,t(h,a,{fieldArgs:r,args:d,errors:l})},getErrors:()=>e.current.errors}),[n]);return b.jsx(S,{value:g,children:c.children})}const z=F(K),D=F(R),I=F(B);export{q as F,I as a,z as b,F as c,D as d};
