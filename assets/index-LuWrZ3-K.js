import{j as e,r as b,R as U,f as H,d as oe}from"./index-BjyquQqj.js";import{F as te,u as se}from"./formik.esm-B0MMKUlQ.js";import{S as _}from"./TextBox-CU_W52Of.js";import{P as F,a as L}from"./ProgressButton-6xkmWtq3.js";import{B}from"./Button-xWVoz13c.js";import{c as J}from"./Button-6bMBa1_B.js";import{g as V}from"./ajax-O4xclg-c.js";import{b as j,a as P}from"./index-CwwbquBK.js";import{e as G,f as D,s as ae}from"./bots-5vfAEm_0.js";import{h as le,C as re,a as ne,g as Q}from"./test-chat-utils-CRKUE6ke.js";import{a as z,S as ie,b as ce,c as de,d as me}from"./upload-DjBoohY6.js";import{a as ge,c as he}from"./index-BYZP91N-.js";import{u as ee}from"./useSelectedBot-CLgcYbP9.js";import{u as xe}from"./organization-DDg6GkQH.js";import{a as ue,K as be}from"./KbDocsList-Jk_21mJW.js";import{P as pe}from"./PageHeader-Bs-rHxpU.js";import"./hoist-non-react-statics.cjs-Hp8kthgL.js";import"./env-CBDBHzQq.js";import"./delete-BGuu1s6X.js";import"./edit-CCuXvpOl.js";import"./plus-DjIalJJv.js";import"./utils-B3TvvZ68.js";import"./send-7nrGp45X.js";function fe({values:o,handleChange:t}){return e.jsxs("div",{className:"mb-4",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-thin text-primary mb-4",children:"Legal requirements"}),e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Chat Disclaimer"}),e.jsx("input",{type:"text",name:"chatDisclaimer",value:o.chatDisclaimer,onChange:t,maxLength:260,placeholder:"Provide the disclaimer to be shown in chat window",className:"border rounded-md h-12 w-full px-4"})]})}const S=({name:o,value:t,onChange:a,className:i})=>{const l=[{value:"yes",label:"Yes"},{value:"no",label:"No"}],n=m=>a(o,m==="yes");return e.jsx(_,{className:i,options:l,onChange:m=>n(m),value:t?"yes":"no",showClear:!1,placeholder:""})};function je({values:o,setFieldValue:t}){return e.jsxs("div",{className:"mb-4",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-thin text-primary mb-4",children:"Hide Livserv branding"}),e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Hide Livserv branding"}),e.jsx(S,{name:"hideLivservBranding",value:o.hideLivservBranding,onChange:(a,i)=>t(a,i),className:"border h-12 rounded-md w-full"})]})}const M=({name:o,value:t,onChange:a,onBlur:i,placeholder:l="#000000",className:n="",inputClassName:m="",colorInputClassName:c=""})=>e.jsxs("div",{className:`relative w-full ${n}`,children:[e.jsx("input",{type:"text",name:o,value:t,onChange:a,onBlur:i,className:`w-full border border-gray-300 rounded-md py-2 pl-3 pr-10 text-sm ${m}`,placeholder:l,autoComplete:"off"}),e.jsx("input",{type:"color",value:t,onChange:a,className:`absolute right-2 top-1/2 -translate-y-1/2 w-6 h-6 border-0 p-0 bg-transparent cursor-pointer ${c}`,tabIndex:-1,"aria-label":"Choose color"})]}),k=({error:o,children:t})=>o?e.jsx("div",{className:"text-red-500 text-xs",children:t}):null,ve=U.forwardRef((o,t)=>e.jsx("input",{ref:t,...o,style:{clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1,...o.style||{}}}));function q({imageUrl:o,imageName:t,maxImageSize:a=25e4,onChange:i,bgColor:l}){const[n,m]=b.useState(null),[c,p]=b.useState(o),r=U.useRef(null),s=l&&(c!=null&&c.endsWith(".png"))?l:"transparent",u=!!n,g=!u&&o,h=c?"Replace image":"Select image",x=f=>{try{const v=f.target.files[0];if(!v)return;const C=v.size;if(v.type.startsWith("image/")&&C<=a){m(v),p(URL.createObjectURL(v));const N=new FileReader;N.onloadend=()=>{p(N.result)},N.readAsDataURL(v),i==null||i(t,v)}else alert("Please upload valid image file and size is <= "+a/1e3+" kb"),m(null),f.target.value=""}catch(v){console.log("Error uploading the image ::",v),alert("Please select the image file"),f.target.value=""}},y=async()=>{try{await G(t),i(t,null),p(null),m(null),L(!0,"Logo deleted successfully.","success")}catch(f){console.log("Deleting logo failed. Please try again later.",f)}},d=async()=>{try{const f=await D(t,n);i(t,f),m(null),L(!0,"Logo uploaded successfully.","success")}catch(f){console.log("File upload failed. Please try again later.",f)}};return e.jsxs("div",{className:"flex flex-col gap-3",children:[c&&e.jsx("div",{className:"h-20 w-20 flex items-center justify-center",children:e.jsx("img",{src:c,alt:"headerLogo",height:20,style:{backgroundColor:s}})}),e.jsxs("div",{className:"flex flex-row gap-2",children:[e.jsx(B,{label:h,type:"secondary",onClick:()=>r.current&&r.current.click()}),e.jsx(ve,{ref:r,name:t,type:"file",onChange:x},n?n.name:""),g&&e.jsx(B,{label:"Delete",type:"secondary",onClick:y}),u&&e.jsx(F,{color:"primary",variant:"contained",onClick:d,ml:5,children:"Upload"})]}),n&&e.jsxs("div",{className:"text-xs",children:["File Name : ",n.name," "]})]})}function Ce({values:o,touched:t,errors:a,handleBlur:i,setFieldValue:l}){var n,m;return e.jsxs("div",{className:"mb-8 border-y py-6",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-thin text-primary mb-4",children:"Message Bubble Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-2",children:"Show Message Bubble Logo"}),e.jsx(S,{name:"messageBubbleLogo",value:o.messageBubbleLogo,onChange:(c,p)=>l(c,p),className:"border h-12 rounded-md w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Font Size"}),e.jsx(j,{field:"fontSize",placeholder:"12px",value:o.fontSize,onChange:c=>l("fontSize",c),wrapperClassName:"border rounded-md h-12 w-full"})]})]}),e.jsx("div",{className:"text-xs uppercase tracking-wider mt-8 mb-2 text-purple-700 font-bold",children:"Visitor Bubble Settings"}),o.messageBubbleLogo&&e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Upload Visitor Logo"}),e.jsx(q,{imageUrl:(n=o.visitorMessageLogo)==null?void 0:n.url,imageName:"visitorMessageLogo",maxImageSize:5e4,onChange:l})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Background Color"}),e.jsx(M,{name:"visitorBackgroundColor",value:o.visitorBackgroundColor,onChange:c=>l("visitorBackgroundColor",c.target.value),onBlur:i,placeholder:"#ffffff",inputClassName:"h-12"}),e.jsx(k,{error:t.visitorBackgroundColor&&a.visitorBackgroundColor,children:a.visitorBackgroundColor})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Font Color"}),e.jsx(M,{name:"visitorFontColor",value:o.visitorFontColor,onChange:c=>l("visitorFontColor",c.target.value),onBlur:i,placeholder:"#000000",inputClassName:"h-12"}),t.visitorFontColor&&a.visitorFontColor&&e.jsx("p",{className:"text-xs text-red-500",children:a.visitorFontColor})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Border Color"}),e.jsx(M,{name:"visitorBorderColor",value:o.visitorBorderColor,onChange:c=>l("visitorBorderColor",c.target.value),onBlur:i,placeholder:"#000000",inputClassName:"h-12"}),e.jsx(k,{error:t.visitorBorderColor&&a.visitorBorderColor,children:a.visitorBorderColor})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Border Radius"}),e.jsx(j,{field:"visitorBubbleBorderCurve",placeholder:"border: 1px 2px 3px 4px",value:o.visitorBubbleBorderCurve,onChange:c=>l("visitorBubbleBorderCurve",c),wrapperClassName:"border rounded-md h-12 w-full"}),e.jsx(k,{error:t.visitorBubbleBorderCurve&&a.visitorBubbleBorderCurve,children:a.visitorBubbleBorderCurve})]})]}),e.jsx("div",{className:"text-xs uppercase tracking-wider mt-8 mb-2 text-purple-700 font-bold",children:"Bot Bubble Settings"}),o.messageBubbleLogo&&e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Upload Bot Logo"}),e.jsx(q,{imageUrl:(m=o.botMessageLogo)==null?void 0:m.url,imageName:"botMessageLogo",maxImageSize:5e4,onChange:l})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Background Color"}),e.jsx(M,{name:"botBackgroundColor",value:o.botBackgroundColor,onChange:c=>l("botBackgroundColor",c.target.value),onBlur:i,placeholder:"#ffffff",inputClassName:"h-12"}),e.jsx(k,{error:t.botBackgroundColor&&a.botBackgroundColor,children:a.botBackgroundColor})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Font Color"}),e.jsx(M,{name:"botFontColor",value:o.botFontColor,onChange:c=>l("botFontColor",c.target.value),onBlur:i,placeholder:"#000000",inputClassName:"h-12"}),e.jsx(k,{error:t.botFontColor&&a.botFontColor,children:a.botFontColor})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Border Color"}),e.jsx(M,{name:"botBorderColor",value:o.botBorderColor,onChange:c=>l("botBorderColor",c.target.value),onBlur:i,placeholder:"#000000",inputClassName:"h-12"}),e.jsx(k,{error:t.botBorderColor&&a.botBorderColor,children:a.botBorderColor})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Border Radius"}),e.jsx(j,{field:"botBubbleBorderCurve",placeholder:"border: 1px 2px 3px 4px",value:o.botBubbleBorderCurve,onChange:c=>l("botBubbleBorderCurve",c),wrapperClassName:"border rounded-md h-12 w-full"}),e.jsx(k,{error:t.botBubbleBorderCurve&&a.botBubbleBorderCurve,children:a.botBubbleBorderCurve})]})]})]})}H(()=>({openItem:["dashboard"],defaultId:"dashboard",openComponent:"buttons",drawerOpen:!1,componentDrawerOpen:!0}));const O=H(ye);function ye(){const o=Ne();return{organizationId:null,organization:null,selectedBotId:null,botsList:[],botsMap:{},userDetails:null,userName:null,trainingMediaUpdate:!1,conversationMediaUpdate:!1,organizationSettings:null,organizationsInvoiceList:null,...o}}function Ne(){const o=we();if(!o)return;const{organizationId:t,un:a,role:i}=o,l={isAuthenticated:!0,userName:a,isSuperUser:i==="SUPER"?!0:void 0};return t&&(l.organizationId=t),l}function we(){const o=sessionStorage.getItem("token");if(!o||!o.includes("."))return;const t=o.split(".")[1];if(t)try{return JSON.parse(atob(t))}catch{console.error("Invalid token found in session store")}}H(()=>({snackbar:{open:!1,message:"",severity:"success"}}));H(()=>Be());function Be(o,t){const a=new Date;return{fromDate:new Date(le().endOf("day").add(-1,"month").add(1,"day").toDate()),toDate:a,organizationId:o,botId:t}}function Le(o){const t=O(a=>a.isSuperUser);return e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"mt-8 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 gap-6 sm:gap-8 lg:gap-12",children:[e.jsx(fe,{...o}),t&&e.jsx(je,{...o})]}),e.jsx(Ce,{...o})]})}const ke=({values:o,setFieldValue:t})=>{const a=l=>o.launcherType===l,i=O(l=>l.isSuperUser);return e.jsxs("div",{className:"mt-12 border-y py-4",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-thin text-primary mb-4",children:"Choose Type"}),e.jsxs("div",{className:"mb-12",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-3 sm:gap-4",children:[e.jsx(B,{icon:e.jsx(z,{className:"w-6 h-6 sm:w-8 sm:h-8"}),type:"rounded",onClick:()=>t("launcherType","icon"),className:`border rounded-full w-12 h-12 sm:w-16 sm:h-16 flex items-center justify-center
                            ${a("icon")?"border-blue-500 ring-2 ring-blue-200":"border-gray-300 hover:bg-gray-100"}`}),e.jsxs("div",{className:`flex items-center w-36 sm:w-48 bg-gray-200 rounded-full shadow-md cursor-pointer
                            ${a("bar")?"border-blue-500 ring-2 ring-blue-200":"border-gray-300 hover:bg-gray-100"}`,onClick:()=>t("launcherType","bar"),children:[e.jsx("div",{className:"bg-white w-10 h-10 sm:w-16 sm:h-16 flex items-center justify-center rounded-full",children:e.jsx(z,{className:"w-6 h-6 sm:w-8 sm:h-8"})}),e.jsx("span",{className:"ml-2 sm:ml-4 text-gray-600 font-medium text-xs sm:text-base",children:"Live Chat"})]}),e.jsxs("div",{className:`flex items-center justify-end w-36 sm:w-48 bg-gray-200 rounded-full shadow-md cursor-pointer
                            ${a("expand")?"border-blue-500 ring-2 ring-blue-200":"border-gray-300 hover:bg-gray-100"}`,onClick:()=>t("launcherType","expand"),children:[e.jsx("span",{className:"mr-2 sm:mr-4 text-gray-600 font-medium text-xs sm:text-base",children:"Live Chat"}),e.jsx("div",{className:"bg-white w-10 h-10 sm:w-16 sm:h-16 flex items-center justify-center rounded-full",children:e.jsx(z,{className:"w-6 h-6 sm:w-8 sm:h-8"})})]})]}),e.jsxs("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-2 gap-6 lg:gap-12",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Spacing on corner"}),e.jsx(j,{field:"launcherSpacingCorner",placeholder:"0px",onChange:l=>t("launcherSpacingCorner",l),value:o.launcherSpacingCorner,wrapperClassName:"border rounded-md h-12 w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Spacing on Bottom "}),e.jsx(j,{field:"launcherSpacingBottom",placeholder:"0px",onChange:l=>t("launcherSpacingBottom",l),value:o.launcherSpacingBottom,wrapperClassName:"border rounded-md h-12 w-full"})]})]}),e.jsxs("div",{className:"mt-8 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8 lg:gap-12",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Button on Mobile"}),e.jsx(S,{name:"buttonOnMobile",value:o.buttonOnMobile,onChange:(l,n)=>t(l,n),className:"border h-12 rounded-md w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Show We are online bubble"}),e.jsx(S,{name:"showMinimizeButtonToolTip",value:o.showMinimizeButtonToolTip,onChange:(l,n)=>t(l,n),className:"border h-12 rounded-md w-full"})]}),i&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Activate Voice Bot"}),e.jsx(S,{name:"activateVoiceBot",value:o.activateVoiceBot,onChange:(l,n)=>t(l,n),className:"border h-12 rounded-md w-full"})]})]})]})]})},Se=[{value:"regular",label:"Regular"},{value:"remote",label:"Remote"}];function Te({values:o,touched:t,errors:a,handleBlur:i,setFieldValue:l}){return e.jsxs("div",{className:"mb-8 border-y",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-thin text-primary mb-4",children:"Composer Settings"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6 sm:gap-8 mb-4",children:[e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Placeholder Text *"}),e.jsx(j,{field:"placeholder",placeholder:"Type your message...",maxLength:50,onBlur:i,onChange:n=>l&&l("placeholder",n),value:o.placeholder,wrapperClassName:"border rounded-md h-12 w-full"}),t.placeholder&&a.placeholder&&e.jsx("div",{className:"text-red-500 text-xs",children:a.placeholder})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Font source"}),e.jsx("div",{className:"flex flex-row space-x-4",children:Se.map(n=>e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"fontType",value:n.value,checked:o.fontType===n.value,onChange:m=>l&&l("fontType",m.target.value),className:"mr-2"}),n.label]},n.value))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6 sm:gap-8 mb-4",children:[e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Font name"}),e.jsx(j,{field:"fontName",placeholder:"Provide Font Name",onChange:n=>l&&l("fontName",n),value:o.fontName,wrapperClassName:"border rounded-md h-12 w-full"})]}),o.fontType==="remote"&&e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Paste Remote Font Link"}),e.jsx(j,{field:"remoteFontLink",placeholder:"Ex: https://fonts.googleapis.com",onChange:n=>l&&l("remoteFontLink",n),value:o.remoteFontLink,wrapperClassName:"border rounded-md h-12 w-full"})]})]})]})}const Me=({values:o,setFieldValue:t})=>{const a=[{value:"bottomRight",label:"Bottom Right"},{value:"bottomLeft",label:"Bottom Left"}],i=[{value:"sm",label:"Small"},{value:"md",label:"Medium"},{value:"lg",label:"Large"}],l={sm:{width:"300px",height:"400px"},md:{width:"380px",height:"500px"},lg:{width:"420px",height:"600px"}},n={sm:{width:"200px",height:"300px"},md:{width:"280px",height:"400px"},lg:{width:"320px",height:"450px"}},c=[{code:"en",name:"English",native:"English"},{code:"ar",name:"Arabic",native:"العربية"},{code:"af",name:"Afrikaans",native:"Afrikaans"},{code:"ml",name:"Malayalam",native:"മലയാളം"},{code:"kn",name:"Kannada",native:"ಕನ್ನಡ"},{code:"ta",name:"Tamil",native:"தமிழ்"},{code:"gu",name:"Gujarati",native:"Gujarati"},{code:"ig",name:"Igbo",native:"Igbo"},{code:"yo",name:"Yoruba",native:"Yoruba"}].map(r=>({label:`${r.name}`,value:r.code,full:r})),p=(r,s,u)=>{let g,h;const x=u==="dimension"?l:n;x[r]&&(g=x[r].width,h=x[r].height),s(u,r),s(`${u}Width`,g),s(`${u}Height`,h)};return e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-thin text-primary mb-4",children:" Choose Position And Size"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-2 sm:gap-4 lg:gap-8 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:" Dimension (Desktop)"}),e.jsx(P,{field:"dimension",options:i,onChange:r=>p(r,t,"dimension"),showClear:!1,value:o.dimension||"",className:"border rounded-md h-12 w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:" Position"}),e.jsx(P,{field:"windowAlign",options:a,onChange:r=>t("windowAlign",r),showClear:!1,value:o.windowAlign||"",className:"border rounded-md h-12 w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Spacing on corner"}),e.jsx(j,{field:"paddingLeft",placeholder:"0px",onChange:r=>t("paddingLeft",r),value:o.paddingLeft,wrapperClassName:"border rounded-md h-12 w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Spacing on Bottom"}),e.jsx(j,{field:"paddingBottom",placeholder:"0px",onChange:r=>t("paddingBottom",r),value:o.paddingBottom,wrapperClassName:"border rounded-md h-12 w-full"})]})]}),e.jsxs("div",{className:"mt-8 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8 lg:gap-12",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:" Dimension (Mobile)"}),e.jsx(P,{field:"mobileDimension",options:i,onChange:r=>p(r,t,"mobileDimension"),showClear:!1,value:o.mobileDimension||"",className:"border rounded-md h-12 w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Desktop proactive window"}),e.jsx(S,{name:"autoLaunch",value:o.autoLaunch,onChange:(r,s)=>t(r,s),className:"border h-12 rounded-md w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Mobile proactive window"}),e.jsx(S,{name:"mobileAutoLaunch",value:o.mobileAutoLaunch,onChange:(r,s)=>t(r,s),className:"border h-12 rounded-md w-full"})]})]}),e.jsxs("div",{className:"mt-8 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8 lg:gap-12",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Choose Language"}),e.jsx(P,{field:"translateLanguages",options:c,onChange:r=>{const s=c.filter(u=>r.includes(u.value)).map(u=>u.full);t("translateLanguages",s)},showClear:!1,value:(o.translateLanguages||[]).map(r=>r.code),className:"border rounded-md w-full h-12",multiple:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Select default languages"}),e.jsx(P,{field:"defaultLanguage",options:c,onChange:r=>{const s=c.filter(u=>r.includes(u.value)).map(u=>u.full);t("defaultLanguage",s)},disabled:!o.multiLanguageChat||o.multiLanguageChat==="No",showClear:!1,value:(o.defaultLanguage||[]).map(r=>r.code),className:"border h-12 rounded-md w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:" Enable Multilingual Support?"}),e.jsxs("div",{className:"flex flex-row items-center space-x-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"multiLanguageChat",value:"true",checked:o.multiLanguageChat===!0,onChange:()=>t("multiLanguageChat",!0),className:"mr-2"})," ","Yes"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"multiLanguageChat",value:"false",checked:o.multiLanguageChat===!1,onChange:()=>t("multiLanguageChat",!1),className:"mr-2"})," ","No"]})]})]})]})]})};function Pe({values:o,setFieldValue:t}){return e.jsxs("div",{className:"mb-8  border-y",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-thin text-primary mb-4",children:"Choose Position And Size"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8 lg:gap-12 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Background Color *"}),e.jsx(j,{field:"bgColor",placeholder:"#000000",onChange:a=>t("bgColor",a),value:o.bgColor,wrapperClassName:"border rounded-md h-12 w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Font Color *"}),e.jsx(j,{field:"fontColor",placeholder:"#000000",onChange:a=>t("fontColor",a),value:o.fontColor,wrapperClassName:"border rounded-md h-12 w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Font Size"}),e.jsx(j,{field:"fontSize",placeholder:"16px",onChange:a=>t("fontSize",a),value:o.fontSize,wrapperClassName:"border rounded-md h-12 w-full"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8 lg:gap-12 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Chat Window Title *"}),e.jsx(j,{field:"titleText",placeholder:"Provide your chat window title",onChange:a=>t("titleText",a),value:o.titleText,wrapperClassName:"border rounded-md h-12 w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Chat Window Header Padding"}),e.jsx(j,{field:"headerPadding",placeholder:"padding: 2px 5px 2px 5px",onChange:a=>t("headerPadding",a),value:o.headerPadding,wrapperClassName:"border rounded-md h-12 w-full"})]})]})]})}const X=200*1024,ze=({values:o,setFieldValue:t})=>{const[a,i]=b.useState(null),[l,n]=b.useState(null),m=b.useRef(null),c=g=>{var h,x,y;try{const d=(h=g.target.files)==null?void 0:h[0];if(!d)return;const f=d.size;d.type.startsWith("image/")&&f<=X?(t("botLogo",d),i(URL.createObjectURL(d)),n(d)):((x=L)==null||x(!0,"Please upload valid image file and size is <= "+X/1e3+" kb","error"),t("botLogo",null),i(null),n(null),g.target.value="")}catch(d){console.log("Error selecting the image ::",d),(y=L)==null||y(!0,"Please select the image file","error"),t("botLogo",null),i(null),n(null),g.target.value=""}},p=async(g,h)=>{try{const x=document.createElement("div");document.body.appendChild(x);const y=oe.createRoot(x);y.render(g),setTimeout(()=>{const d=x.querySelector("svg");if(d){const f=d.outerHTML,v=new Blob([f],{type:"image/svg+xml"}),C=new File([v],`bot-icon-${h+1}.svg`,{type:"image/svg+xml"});t("botLogo",C),i(URL.createObjectURL(C)),n(C)}else console.log("SVG element not found.");y.unmount(),document.body.removeChild(x)},100)}catch(x){console.log("Error processing SVG icon.",x)}},r=async()=>{var g,h;try{if(!l)return;let x=l;D&&(x=await D("botChatButton",l)),t("botLogo",x),(g=L)==null||g(!0,"Logo uploaded successfully.","success"),n(null)}catch(x){console.log("File upload failed. Please try again later.",x),(h=L)==null||h(!0,"File upload failed. Please try again later.","error")}},s=async()=>{var g,h;try{G&&await G("botLogo"),t("botLogo",null),i(null),n(null),(g=L)==null||g(!0,"Logo deleted successfully.","success")}catch(x){console.log("Deleting logo failed. Please try again later.",x),(h=L)==null||h(!0,"Deleting logo failed. Please try again later.","error")}},u=[e.jsx(z,{},"default"),e.jsx(z,{},"v1"),e.jsx(ce,{},"v2"),e.jsx(de,{},"v3"),e.jsx(me,{},"v4")];return e.jsxs("div",{className:"mt-12 border-y py-4",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-thin text-primary mb-4",children:"Chat Launcher Setting"}),e.jsxs("div",{className:"mb-12",children:[e.jsx("label",{className:"block text-sm text-gray-600 my-4",children:"Choose Icon"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 sm:gap-4",children:[u.map((g,h)=>e.jsx(B,{icon:g,type:"rounded",className:"border border-gray-300 hover:bg-gray-100 p-2 sm:p-4 rounded-full w-12 h-12 sm:w-16 sm:h-16 flex items-center justify-center",onClick:()=>p(g,h)},h)),e.jsxs("span",{className:"relative",children:[e.jsx(B,{icon:a?e.jsx("img",{src:a,alt:"Bot Icon Preview",className:"w-10 h-10 sm:w-12 sm:h-12 rounded-full object-cover"}):e.jsx(ie,{}),type:"rounded",className:"border border-gray-300 text-primary p-2 sm:p-4 rounded-full w-12 h-12 sm:w-16 sm:h-16 flex items-center justify-center",onClick:()=>{var g;return(g=m.current)==null?void 0:g.click()}}),e.jsx("input",{ref:m,type:"file",accept:"image/*",style:{display:"none"},onChange:c})]})]}),e.jsx("div",{className:"flex gap-2 mt-5",children:l&&e.jsxs(e.Fragment,{children:[e.jsx(B,{label:"Upload",type:"primary",onClick:r}),e.jsx(B,{label:"Delete",type:"secondary",onClick:s})]})}),l&&e.jsxs("div",{className:"text-xs mt-2",children:["File Name : ",l.name]})]}),e.jsxs("div",{className:"mt-8 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8 lg:gap-12",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Header Logo Margin"}),e.jsx(j,{field:"headerLogoMargin",placeholder:"0px",onChange:g=>t("headerLogoMargin",g),value:o==null?void 0:o.headerLogoMargin,wrapperClassName:"border rounded-md h-12 w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Width"}),e.jsx(j,{field:"logoWidth",placeholder:"0px",onChange:g=>t("logoWidth",g),value:o==null?void 0:o.logoWidth,wrapperClassName:"border rounded-md h-12 w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Height"}),e.jsx(j,{field:"logoHeight",placeholder:"0px",onChange:g=>t("logoHeight",g),value:o==null?void 0:o.logoHeight,wrapperClassName:"border rounded-md h-12 w-full"})]})]})]})};async function Ie(o){return await V(`/organization/organization-props/${o}`,{},{noAuth:!0})}const w={BOT:"bot",ADVANCE:"advance"};function Ae({onChange:o}){var h,x,y;const[t,a]=ee(),[i,l]=b.useState(w.BOT),n=O(d=>{var f;return(f=d.organization)==null?void 0:f.organizationPropId}),[m,c]=b.useState(null);if(b.useEffect(()=>{n&&(async()=>{try{const d=await Ie(n);c(d)}catch(d){c(null),console.error("Failed to fetch organization props:",d)}})()},[n]),!a)return null;const{botName:p,botDesign:r={}}=a,s=r,u={bgColor:(s==null?void 0:s.backgroundColor)||"#484a49",botBorderColor:(s==null?void 0:s.botBorderColor)||"#484a49",botBackgroundColor:(s==null?void 0:s.botBackgroundColor)||"#dfd9df",botFontColor:(s==null?void 0:s.botFontColor)||"#000000",visitorBorderColor:(s==null?void 0:s.visitorBorderColor)||"#000000",visitorBackgroundColor:(s==null?void 0:s.visitorBackgroundColor)||"#ffffff",visitorFontColor:(s==null?void 0:s.visitorFontColor)||"#000000",fontType:(s==null?void 0:s.fontType)||"normal-font",windowAlign:(s==null?void 0:s.windowAlign)||"bottomRight",fontColor:(s==null?void 0:s.textColor)||"#484a49",titleText:p,placeholder:"Type your message...",launcherType:"bar",messageBubbleLogo:!0,botLogo:(s==null?void 0:s.botLogo)||{},visitorMessageLogo:(s==null?void 0:s.visitorMessageLogo)||{},botMessageLogo:(s==null?void 0:s.botMessageLogo)||{},botChatButton:(s==null?void 0:s.botChatButton)||{},hideLivservBranding:(s==null?void 0:s.hideLivservBranding)||!1,showMinimizeButtonToolTip:(s==null?void 0:s.showMinimizeButtonToolTip)||!0,...s};m&&(u.domainSettings={domain:(h=m==null?void 0:m.consoleSettings)==null?void 0:h.domain,website:(x=m==null?void 0:m.consoleSettings)==null?void 0:x.website,displayName:(y=m==null?void 0:m.consoleSettings)==null?void 0:y.displayName});const g=async(d,{setErrors:f,setStatus:v,setSubmitting:C})=>{var N,I,T,A,R,W,$,K;try{((N=d.botChatButton)==null?void 0:N.name)!==((I=s.botChatButton)==null?void 0:I.name)&&(d.botChatButton=s.botChatButton),((T=d.botLogo)==null?void 0:T.name)!==((A=s.botLogo)==null?void 0:A.name)&&(d.botLogo=s.botLogo),((R=d.visitorMessageLogo)==null?void 0:R.name)!==((W=s.visitorMessageLogo)==null?void 0:W.name)&&(d.visitorMessageLogo=s.visitorMessageLogo),(($=d.botMessageLogo)==null?void 0:$.name)!==((K=s.botMessageLogo)==null?void 0:K.name)&&(d.botMessageLogo=s.botMessageLogo),await ae(t,d),v({success:!1}),C(!1)}catch(Y){console.error(Y),v({success:!1}),f({submit:Y.message}),C(!1)}};return e.jsx(e.Fragment,{children:e.jsx(te,{initialValues:u,validationSchema:void 0,onSubmit:g,children:d=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-full h-full bg-white rounded-lg shadow-lg p-14",children:[e.jsxs("div",{className:"flex items-center space-x-4 border-b pb-4 mb-4",children:[e.jsxs("div",{className:"relative flex items-center justify-center",children:[e.jsx("button",{className:`px-4 py-2 text-black ${i===w.BOT?"text-orange-600 bg-white border border-[#FB9F37] rounded-md shadow-md transition":""}`,onClick:()=>l(w.BOT),children:"Bot Setting"}),i===w.BOT&&e.jsx("div",{className:"absolute bottom-[-8px] w-4 h-4 bg-white border-l border-b border-[#FB9F37]",style:{transform:"rotate(-46deg)"}})]}),e.jsxs("div",{className:"relative flex items-center justify-center",children:[e.jsx("button",{className:`px-4 py-2 text-black ${i===w.ADVANCE?"text-orange-600 bg-white border border-[#FB9F37] rounded-md shadow-md transition":""}`,onClick:()=>l(w.ADVANCE),children:"Advance Setting"}),i===w.ADVANCE&&e.jsx("div",{className:"absolute bottom-[-8px] w-4 h-4 bg-white border-l border-b border-[#FB9F37]",style:{transform:"rotate(-46deg)"}})]})]}),e.jsxs("form",{noValidate:!0,onSubmit:d.handleSubmit,children:[i===w.BOT&&e.jsxs(e.Fragment,{children:[e.jsx(Me,{...d}),e.jsx(ze,{...d}),e.jsx(ke,{...d}),e.jsx(Pe,{...d}),e.jsx(Te,{...d})]}),i===w.ADVANCE&&e.jsx(Le,{...d})]}),e.jsx(Re,{onChange:o}),e.jsx("div",{className:"flex mt-12 justify-end",children:e.jsx(B,{label:"Save Changes",onClick:()=>d.handleSubmit()})})]})})})})}function Re({onChange:o}){const{values:t}=se();return b.useEffect(()=>{t&&o(ge(t))},[t,o]),null}const Ee=({openPopUpDialog:o,setPopUpDialog:t,setFieldsValues:a,onClose:i,title:l,width:n="70%",showCloseButton:m=!0,children:c})=>{const[p,r]=b.useState(!1),[s,u]=b.useState(!1),g=()=>{i?i():(t(!1),a&&a({}))};return b.useEffect(()=>{o?(r(!0),setTimeout(()=>u(!0),10)):(u(!1),setTimeout(()=>r(!1),300))},[o]),b.useEffect(()=>{const h=y=>{y.key==="Escape"&&o&&g()},x=y=>{y.target.classList.contains("dialog-backdrop")&&g()};return o&&(document.addEventListener("keydown",h),document.addEventListener("click",x),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",h),document.removeEventListener("click",x),document.body.style.overflow="unset"}},[o]),p?e.jsx("div",{className:J("dialog-backdrop fixed inset-0 z-[11010] flex items-center justify-center bg-black bg-opacity-50 transition-opacity duration-300",{"opacity-100":s,"opacity-0":!s}),children:e.jsxs("div",{className:J("relative bg-white rounded-lg shadow-xl max-h-[90vh] overflow-hidden transition-all duration-300",{"scale-100 opacity-100":s,"scale-95 opacity-0":!s}),style:{width:window.innerWidth<=640?"90%":n,maxWidth:"95vw"},onClick:h=>h.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 m-0",children:l}),m&&e.jsx(B,{type:"plain",size:"sm",icon:he,onClick:g,className:"absolute top-2 right-2 p-1 hover:bg-gray-100 rounded-full","aria-label":"Close dialog"})]}),e.jsx("div",{className:"p-4 overflow-y-auto max-h-[calc(90vh-120px)]",children:c})]})}):null},E=[{value:"gpt-4o-mini",label:"GPT 4o Mini Latest (default)",description:"Current Latest Mini model of GPT 4o. Cheaper and faster than GPT 4o."},{value:"gpt-4.1-mini-2025-04-14",label:"gpt-4.1-mini",description:"3 times costly than GPT 4o."},{value:"gpt-4.1-nano-2025-04-14",label:"gpt-4.1-nano",description:"Cheaper and faster than GPT 4o"},{value:"gpt-4o-mini-2024-07-18",label:"GPT 4o Mini (July 2024)",description:"Mini model of GPT 4o. Cheaper and faster than GPT 4o."},{value:"gpt-4o",label:"GPT 4o Latest",description:"Latest model of GPT 4o. More capable, cheaper and faster than GPT 4 Turbo."},{value:"gpt-4o-2024-08-06",label:"GPT 4o (Aug 2024)",description:"May 2024 Release of GPT 4o. More capable, cheaper and faster than GPT 4 Turbo."},{value:"gpt-4",label:"GPT 4 Turbo",description:"Latest stable model of GPT 4. More capable, but is 5 times costly then 3.5 models."},{value:"gpt-4-1106-preview",label:"GPT 4 Latest Preview",description:"Latest preview model of GPT 4. Most capable model, but is 3 times costly then 3.5 models."},{value:"gpt-3.5-turbo-0125",label:"GPT 3.5 Latest Stable",description:"Latest stable model of GPT 3.5. More performant. Random minor inconsistency observed sometimes."},{value:"gpt-3.5-turbo-1106",label:"GPT 3.5 Latest Preview",description:"Latest preview model of GPT 3.5. This is more accurate than latest stable, but some times non responsive while on peek loads."}],Z=E.reduce((o,t)=>(o[t.value]=t,o),{});function He({value:o,hideDescription:t=!1,onChange:a,className:i,...l}){const n=E.map(r=>({label:r.label,value:r.value}));o&&!Z[o]&&n.push({label:o,value:o});const m=Z[o]||E[0],c=o||E[0].value,p=r=>{a&&a(r)};return e.jsxs(e.Fragment,{children:[e.jsx(_,{...l,className:i||"w-full border border-gray-300 rounded px-2 py-2",value:c,options:n,onChange:r=>p(r),showClear:!1,placeholder:"Select a model..."}),!t&&e.jsx("div",{className:"text-xs text-gray-600 mt-1",id:"bot-model-description",children:m.description})]})}function Oe({message:o,isSuperUser:t,onReplay:a}){const{content:i,searchQuery:l,passedDocIds:n,index:m,model:c}=o,[p,r]=b.useState([]),[s,u]=b.useState(c);b.useEffect(()=>{(async()=>{const h=await ue(n);r(h)})()},[n]),b.useEffect(()=>{u(o.model)},[o]);const g=U.useCallback(h=>u(h),[]);return e.jsxs("div",{className:"kb-docs-editor",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("strong",{children:"Selected Bot:"}),e.jsx("div",{className:"min-w-[200px]",children:e.jsx(He,{value:s,hideDescription:!0,onChange:g})})]}),e.jsx(F,{style:{marginLeft:8},variant:"contained",color:"primary",size:"medium",onClick:()=>a&&a(m,s),children:"Replay"})]}),e.jsxs("div",{className:"ellipsis",children:[e.jsx("strong",{children:"Message: "}),e.jsx("span",{title:i,children:i})]}),t&&l&&e.jsxs("div",{className:"ellipsis",children:[e.jsx("strong",{children:"Search Query: "}),e.jsx("span",{children:l})]}),e.jsx("div",{children:e.jsx(be,{docsList:p})})]})}function io(){var v;const[o,t]=b.useState(null),[a,i]=b.useState(!1),[l,n]=b.useState({}),[m,c]=b.useState(),[p,r]=ee(),{organizationId:s}=r,u=C=>xe(C.organization),[g,h]=b.useState(!1),{isSuperUser:x}=O(),y=()=>h(!0);if(b.useEffect(()=>{if(!s||!p)return;(async()=>{try{const N=await V(`/bot/${s}/${p}/chat/startup-flow`,{recipientId:Q()});c(N||!1)}catch(N){c(!1),console.error("Failed to fetch startup flow:",N)}})()},[p,s]),m===void 0)return null;const d=C=>{const{role:N,type:I,passedDocIds:T,searchQuery:A}=C||{};if(N!=="assistant"||I!=="text"||!(T!=null&&T.length)&&!A)return null;const R=()=>e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{d:"M19 2H8c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h11c.55 0 1-.45 1-1V3c0-.55-.45-1-1-1zm0 17H8V4h11v15zm-2-7H10v2h7v-2zm0-4H10v2h7V8zm-9 9H5V5c0-1.1.9-2 2-2h1v2H7v12zm0 2v-2h1v2H7z"})});return e.jsx("span",{className:"ml-2 cursor-pointer",onClick:()=>f(C),children:e.jsx(R,{})})},f=C=>{console.log("Clicked on KB icon",C),t(C),i(!0)};return e.jsxs("div",{className:"w-full p-8",children:[e.jsx("div",{className:"mb-4",children:e.jsx(pe,{title:"Chat Window Design"})}),e.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-8"}),e.jsxs("div",{children:[e.jsx("div",{className:"w-full mb-4",children:e.jsx(Ae,{onChange:n})}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx(F,{isLoading:g,disabled:g,variant:"contained",color:"success",size:"large",onClick:y,children:"Deploy Bot"})}),e.jsxs("div",{className:"w-full",children:[e.jsx(re,{botDetails:r,botDesign:l,startupFlow:m,autoLaunch:(v=r==null?void 0:r.botDesign)==null?void 0:v.autoLaunch,recipientId:Q(),onReceiveChatResponse:u,onCallback:ne,optionsRenderer:d}),e.jsx(Ee,{openPopUpDialog:a,setPopUpDialog:i,title:"View and update Knowledge base",children:o&&e.jsx(Oe,{message:o,isSuperUser:x})})]})]})]})}export{io as default};
