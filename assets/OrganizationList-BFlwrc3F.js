import{j as e,r as x,R as h,b as H}from"./index-CKFRWpiY.js";import{c as g}from"./Button-DPlmeEM7.js";import{F as R,c as l,P as I,a as f}from"./ProgressButton-DnPvWfCC.js";import{o as K,a as A,f as _}from"./ajax-Dnb_jTyI.js";import{T as d}from"./Toggle-B49lPY8-.js";import{b as k}from"./organization-x4bUhHat.js";import{S as E}from"./settings-C7WWtvQr.js";/* empty css                */import{T as P}from"./Table-DGusAr9L.js";import{B}from"./Button-B9q7G81R.js";import{S as L}from"./SelectButton-BUr7ggp5.js";import{T as W}from"./TextBox-W9ENzfzT.js";import{s as G}from"./utils-B3TvvZ68.js";import{P as Q,S as V}from"./PageHeader-DSj-Zlpb.js";import{S as q}from"./download-CTVjKbTw.js";import"./hoist-non-react-statics.cjs-_yZRi9J4.js";import"./env-CmL5wTXD.js";import"./useSelectedBot-D32GDd_q.js";function J({organizationId:T,consoleDisplaySettings:t={},onDone:j}){const r={hideTrainingTab:(t==null?void 0:t.hideTrainingTab)||!1,hideSettingsTab:(t==null?void 0:t.hideSettingsTab)||!1,hideKBTab:(t==null?void 0:t.hideKBTab)||!1,hideMediaTab:(t==null?void 0:t.hideMediaTab)||!1,hideDesignTab:(t==null?void 0:t.hideDesignTab)||!1,hideFlowDesignTab:(t==null?void 0:t.hideFlowDesignTab)??!0},p=async i=>{try{await k({settings:i},T),f(!0,"Console display settings updated successfully","success"),j()}catch{f(!0,"Not able to update the console display settings. Try after sometime!","error")}};return e.jsx(R,{initialValues:r,onSubmit:p,children:({values:i,handleChange:n,isSubmitting:m,handleSubmit:o})=>e.jsxs("form",{onSubmit:o,className:"space-y-4",children:[e.jsx("div",{className:"text-lg font-semibold border-b pb-2",children:"Console Settings"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Hide Training Tab"}),e.jsx(l,{as:d,name:"hideTrainingTab",checked:i.hideTrainingTab,onChange:()=>n({target:{name:"hideTrainingTab",value:!i.hideTrainingTab}})})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Hide Settings Tab"}),e.jsx(l,{as:d,name:"hideSettingsTab",checked:i.hideSettingsTab,onChange:()=>n({target:{name:"hideSettingsTab",value:!i.hideSettingsTab}})})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Hide FAQ / Knowledge base"}),e.jsx(l,{as:d,name:"hideKBTab",checked:i.hideKBTab,onChange:()=>n({target:{name:"hideKBTab",value:!i.hideKBTab}})})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Hide Conversation Media"}),e.jsx(l,{as:d,name:"hideMediaTab",checked:i.hideMediaTab,onChange:()=>n({target:{name:"hideMediaTab",value:!i.hideMediaTab}})})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Hide Design Tab"}),e.jsx(l,{as:d,name:"hideDesignTab",checked:i.hideDesignTab,onChange:()=>n({target:{name:"hideDesignTab",value:!i.hideDesignTab}})})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Hide Flow Designer"}),e.jsx(l,{as:d,name:"hideFlowDesignTab",checked:i.hideFlowDesignTab,onChange:()=>n({target:{name:"hideFlowDesignTab",value:!i.hideFlowDesignTab}})})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx(I,{isLoading:m,disabled:m,type:"submit",children:"Update"})})]})})}const z=[{value:0,label:"Organization List"},{value:1,label:"Organization Invoice"}],X=[{value:"today",label:"Today"},{value:"week",label:"Week"},{value:"month",label:"Month"},{value:"custom",label:"Custom"}];function ue(){const T=[{field:"name",title:"Name",sortable:!0},{field:"websiteUrl",title:"Website",cellClassName:g("max-w-[250px]"),hideBelow:"lg",template:a=>!!a.websiteUrl&&e.jsx("a",{href:a.websiteUrl,target:"_blank",title:a.websiteUrl,rel:"noreferrer noopener",children:K(a.websiteUrl)})},{field:"email",title:"Email",cellClassName:g("max-w-[250px]"),hideBelow:"sm"},{field:"registeredAt",title:"Registered Date",hideBelow:"xl",sortable:!0},{field:"credits",title:"Credits",hideBelow:"lg",sortable:!0},{field:"managed",title:"Managed",cellClassName:g("text-center"),hideBelow:"md",template:a=>e.jsx(d,{checked:a.handledByLivServ,containerClassName:"mx-auto",onChange:s=>U(s,a._id)})},{field:"",title:"",cellClassName:g("text-center"),template:a=>e.jsx(B,{icon:e.jsx(E,{}),type:"plain",onClick:()=>M(a._id,a.settings)})}],[t,j]=x.useState(""),[r,p]=h.useState(z[0]),[i,n]=h.useState(),m=H(a=>a.organizationList),[o,y]=h.useState(),[,N]=x.useState(!1),[S,F]=x.useState();x.useEffect(()=>{o&&O(o)},[o]);const w=h.useMemo(()=>m.map(a=>({_id:a._id,name:a.organizationName,websiteUrl:a.websiteUrl,email:a.admins.map(s=>s.email).join(", "),registeredAt:_(a.registeredAt),credits:A(a.availableCredits),handledByLivServ:a.handledByLivServ,settings:a.settings})),[m]),M=(a,s)=>{y(a),F(s),N(!0)},O=a=>G(e.jsx(J,{organizationId:a,consoleDisplaySettings:S,onDone:()=>N(!1)}),{showCloseButton:!0,width:"700px"}),U=async(a,s)=>{const c=a,u=s;try{await k({handledByLivServ:c},u),f(!0,"Handled by LivServ updated successfully","success")}catch{f(!0,"Not able to update the Handled by LivServ. Try after sometime!","error")}},b=h.useMemo(()=>{var s;const a=(s=t==null?void 0:t.toLowerCase())==null?void 0:s.trim();return a?w.filter(c=>{var u,v,C;return((u=c.name)==null?void 0:u.toLowerCase().includes(a))||((v=c.email)==null?void 0:v.toLowerCase().includes(a))||((C=c.websiteUrl)==null?void 0:C.toLowerCase().includes(a))}):w},[t,w]);return e.jsxs("div",{children:[e.jsx(Q,{title:"Organizations"}),e.jsxs("div",{className:"flex flex-col gap-3 pt-6",children:[e.jsxs("div",{className:"flex justify-between py-4",children:[e.jsxs("div",{className:"pt-2",children:[!(r!=null&&r.value)&&e.jsx("span",{className:"text-sm font-semibold",children:"Organization List"}),!!(r!=null&&r.value)&&e.jsx("span",{className:"text-sm font-semibold",children:"Organization Invoice"}),e.jsx(L,{value:r,onChange:p,items:z,iconOnly:!0,className:"bg-primary pt-0 ps-0 pb-0 pr-0 text-white ms-2 align-middle"})]}),e.jsxs("div",{className:"flex",children:[e.jsx(W,{value:t,placeholder:"Search",onChange:a=>j(a.target.value),iconRight:V,className:"py-5"}),e.jsx(B,{icon:e.jsx(q,{}),size:"sm",type:"secondary",className:"mr-2 align-middle"}),e.jsx(L,{value:i,items:X,prefix:"Group by:",onChange:n,className:"bg-[#323131] text-white align-middle"})]})]}),e.jsx(P,{rows:b,columns:T,totalRows:b==null?void 0:b.length,pagination:!0})]})]})}export{ue as default};
