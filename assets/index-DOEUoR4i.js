import{a as $,b as j,R as i,j as n}from"./index-DilKqAPQ.js";import{g as w,f as y}from"./ajax-rKymc6Ns.js";import{a as D,C as v}from"./index-D9-hiTFp.js";import"./env-CBDBHzQq.js";function B(){const{organizationId:t,botId:s,recipientId:m,chatId:u}=$(),{isAuthenticated:h}=j(),[c,l]=i.useState(),[a,p]=i.useState(),[,f]=i.useState(),g=`/bot/${t}/${s}/chat/history/${m}/${u}?includeBot=1${h?"&includeKB=1":""}${a!=null&&a.code?`&language=${encodeURIComponent(a.code)}`:""}`;if(i.useEffect(()=>{w(g).then(e=>{var o;const r=y((o=e.messages[0])==null?void 0:o.createdAt);e.botDesign=D(e.botDesign,{window:{width:"600px",height:"calc(100vh - 120px)"},header:{titleText:r+` (${e.titleText})`}}),l(R(e))},e=>{console.error("Unable to load chat conversations:",e)})},[g]),!c)return n.jsx("div",{children:"Loading... Please wait..."});const x=e=>{const{role:r,type:o,passedDocIds:d,searchQuery:b}=e||{};if(!(r!=="assistant"||o!=="text"||!(d!=null&&d.length)&&!b))return n.jsx("span",{className:"show-icon",onClick:()=>f(e),children:"="})};return n.jsx("div",{className:"conversation-history"+(h?" authenticated":""),children:n.jsx("div",{children:n.jsx(v,{botDesign:c.botDesign,messages:c.messages,showTime:!0,disabledMessage:!0,optionsRenderer:x,language:a,setLanguage:p})})})}function R(t){const s=t.messages.length&&t.messages[t.messages.length-1];return(s==null?void 0:s.type)==="options"&&(s.content=""),t}export{B as default};
