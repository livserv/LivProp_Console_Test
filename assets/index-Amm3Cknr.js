import{j,R as x}from"./AlertSnackbar-BtF5Z4Y6.js";import{c as w,m as T,n as K}from"./Button-CPgSoE2E.js";import{L as M,T as B,S as R}from"./TextBox-DznVYwBF.js";function k({label:c,iconLeft:e,iconRight:o,className:g,wrapperClassName:s,args:r,field:a,onChange:d,value:n,...t}){const h=j.jsx("textarea",{className:w("border-0 w-full h-full rounded-[8px] mt-[-5px] bg-transparent outline-none px-4 placeholder:text-pBlack placeholder:text-sm",g),onChange:u=>d?.(u.currentTarget.value,a,r),...t,children:n});return j.jsx(M,{label:c,iconLeft:e,iconRight:o,className:s,children:h})}const $=x.createContext({}),S=$.Provider;function F(c,e){const{valueFieldProp:o="value",hasErrorFieldProp:g="hasError",errorMessageFieldProp:s="errorMessage",changeHandler:r,defaultProps:a}={};return function(n){const t=x.useContext($),{[o]:h,onChange:u,...f}=n,l=f,m=x.useRef({field:n.field,onChange:u,form:t,changeHandler:r});m.current={field:n.field,onChange:u,form:t,changeHandler:r};const C=x.useCallback((i,p,...v)=>{const{form:y,onChange:E,field:P,changeHandler:b}=m.current;typeof b=="function"&&(i=b(i,p,...v),p=P||p),P&&y?.onChange&&y.onChange(i,P,...v),E?.(i,p,...v)},[]);if(t?.getProps&&n.field){const{[o]:i=h,hasError:p,isTouched:v,errorMessage:y,middleware:E}=t.getProps(n,e);m.current.middleware=E,l[o]=x.useMemo(()=>{const{middleware:P,field:b}=m.current;return P?P(i,b,!1):i},[i]),p&&v&&(l[g]=p),y&&v&&(l[s]=y)}else l.value=h;return j.jsx(c,{...a,...l,onChange:C})}}function H(c,e){const o={hasError:!1};if(!c)return o;try{c.validateSync(e,{abortEarly:!1})}catch(g){const s=g.inner;o.hasError=!0,o.errors=s.reduce((r,a)=>(r[a.path]=a.message,r),{})}return o}function L(c){const e=x.useRef({props:c,touched:{}});e.current.props=c,e.current.errors=c.errors||e.current.errors;const{value:o}=c,g=x.useMemo(()=>({onChange:(s,r,a)=>{const{field:d,args:n,middleware:t,onChange:h,validator:u}=e.current.props,f=d?`${d}.${r}`:r,l=T(o,f,t?t(s,r,!0):s),m=H(u,l);e.current.errors=m,e.current.touched[r]=!0,h(l,d,{fieldArgs:a,field:r,args:n,errors:m})},getProps:(s,r)=>{const{field:a,middleware:d}=e.current.props,{valueFieldProp:n="value"}=r||{},{field:t,[n]:h}=s;if(!t)return{[n]:h};const u=a?`${a}.${t}`:t,f=e.current.errors?.errors?.[t];return{[n]:K(o,u),hasError:!!f,isTouched:e.current.touched[t],middleware:d,errorMessage:f}},setValue:(s,r)=>{if(!s||typeof s!="object")return;const{field:a,args:d,middleware:n,onChange:t,validator:h}=e.current.props,u=Object.keys(s);if(!u.length)return;const f=u.reduce((m,C)=>{const i=s[C],p=a?`${a}.${C}`:C;return T(m,p,n?n(i,C,!0):i)},o),l=h?.validate(f);e.current.errors=l,t(f,a,{fieldArgs:r,args:d,errors:l})},getErrors:()=>e.current.errors}),[o]);return j.jsx(S,{value:g,children:c.children})}const O=F(R),G=F(k),q=F(B);export{L as F,q as a,O as b,F as c,G as d};
