import{d as j,r as c,j as s,h as f,e as N}from"./AlertSnackbar-BBOi9bHj.js";import{c as v}from"./index-B4Pd27tI.js";import{F as y}from"./formik.esm-WsGY0UtP.js";import{c as S,a as h,b as R}from"./index.esm-DQc3wIMG.js";import{A as k}from"./AnimateButton-DLDqu4Ov.js";import{P as E}from"./ProgressButton-DbRXTBvR.js";import{r as C}from"./resetPassword-Bxic2cPS.js";import{S as F}from"./SignUp-CvCf8ba0.js";import{l as $,a as A,F as L}from"./Footer-c5fykw0-.js";import"./env-CmL5wTXD.js";const q=e=>new RegExp(/[0-9]/).test(e),B=e=>new RegExp(/[a-z]/).test(e)&&new RegExp(/[A-Z]/).test(e),O=e=>new RegExp(/[!#@$%^&*)(+=._-]/).test(e),U=e=>e<2?{label:"Poor",color:"error.main"}:e<3?{label:"Weak",color:"warning.main"}:e<4?{label:"Normal",color:"warning.dark"}:e<5?{label:"Good",color:"success.main"}:e<6?{label:"Strong",color:"success.dark"}:{label:"Poor",color:"error.main"},I=e=>{let r=0;return e.length>5&&(r+=1),e.length>7&&(r+=1),q(e)&&(r+=1),O(e)&&(r+=1),B(e)&&(r+=1),r},T=({email:e,code:r})=>{const d=j(),[n,p]=c.useState(),[g]=c.useState(!1),[P]=c.useState(!1),w=a=>{const o=I(a);p(U(o))};c.useEffect(()=>{w("")},[]);const b=async(a,{setErrors:o,setStatus:i,setSubmitting:l,resetForm:m})=>{try{if(!e||!r)throw new Error("Invalid reset link");await C(a.newPassword,e,r),i({success:!0}),l(!1),f(!0,"Password updated","success"),m(),d("/")}catch(t){i({success:!1}),o({submit:t.message}),l(!1),f(!0,"Not able to update the password. Try after sometime!","error")}};return s.jsx(y,{initialValues:{newPassword:"",confirmPassword:""},validationSchema:S().shape({newPassword:h().max(30).required("New Password is required"),confirmPassword:h().oneOf([R("newPassword")],"Passwords must match").max(30).required("Confirm Password is required")}),onSubmit:b,children:({errors:a,handleBlur:o,handleChange:i,handleSubmit:l,isSubmitting:m,touched:t,values:x})=>s.jsx("form",{noValidate:!0,onSubmit:l,children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"new-password",className:"block text-sm font-medium text-gray-700",children:"New Password"}),s.jsx("div",{className:"relative",children:s.jsx("input",{id:"new-password",type:g?"text":"password",value:x.newPassword,name:"newPassword",onBlur:o,onChange:u=>{i(u),w(u.target.value)},placeholder:"******",autoComplete:"off",className:`w-full px-3 py-2 pr-10 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900 bg-white placeholder-gray-400 ${t.newPassword&&a.newPassword?"border-red-500":"border-gray-300"}`})}),t.newPassword&&a.newPassword&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.newPassword})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),s.jsx("div",{className:"relative",children:s.jsx("input",{id:"confirm-password",type:P?"text":"password",value:x.confirmPassword,name:"confirmPassword",onBlur:o,onChange:i,placeholder:"******",autoComplete:"off",className:`w-full px-3 py-2 pr-10 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900 bg-white placeholder-gray-400 ${t.confirmPassword&&a.confirmPassword?"border-red-500":"border-gray-300"}`})}),t.confirmPassword&&a.confirmPassword&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.confirmPassword})]}),a.submit&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:s.jsx("p",{className:"text-red-600 text-sm",children:a.submit})}),n&&s.jsxs("div",{className:"flex items-center space-x-3 mt-2",children:[s.jsx("div",{className:"h-2 rounded-full transition-all duration-300",style:{backgroundColor:n.color,width:"85px"}}),s.jsx("span",{className:"text-xs text-gray-600",children:n.label})]}),s.jsx("div",{className:"mt-6",children:s.jsx(k,{children:s.jsx(E,{isLoading:m,className:"w-full",type:"submit",children:"Update Password"})})})]})})})},J=()=>{const e=N(),r=new URLSearchParams(e.search),d=r.get("email"),n=r.get("code");return s.jsxs("div",{className:"auth-layout",children:[s.jsxs("header",{children:[s.jsx("img",{src:$,alt:"",className:"bg-white inline-block",width:"40",height:"42"}),s.jsx("img",{src:A,alt:"Livserv",className:"inline-block ms-2"})]}),s.jsx("section",{children:s.jsxs("div",{className:"content",children:[s.jsx("div",{className:"banner",children:s.jsx(F,{})}),s.jsxs("div",{className:"main",children:[s.jsx("div",{className:"welcome",children:"RESET YOUR PASSWORD"}),s.jsx("div",{className:"fields",children:s.jsx(T,{email:d,code:n})})]})]})}),s.jsx(L,{fontColor:v("text-white")})]})};export{J as default};
