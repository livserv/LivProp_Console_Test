import{u as N,e as B,d as S,g as z,R as l,j as e,c as u}from"./AlertSnackbar-BBOi9bHj.js";import"./index-CUzqN5ta.js";import"./Button-htJsKnEd.js";import{S as _}from"./SelectBox-zddttI4M.js";import{s as v,c as P}from"./organization-4CNJ-QOP.js";import{u as C}from"./useSelectedBot-D0BiDtF-.js";function w(){const r=N(s=>s.botsList),{pathname:o}=B(),a=S(),{botId:n}=z(),[p]=C(),d=l.useRef({});d.current.botId=p,d.current.pathname=o,l.useEffect(()=>{const s=r.find(i=>i._id===n)||[];n&&n!==d.current.botId&&(N.setState({selectedBotId:n,selectedBot:s}),v(n))},[n,p,r]);const x=(r||[]).map(s=>({label:s.botName,value:s._id})),h=l.useCallback(s=>{const i=s&&typeof s=="object"&&"value"in s?s.value:s;if(!i||typeof i!="string")return;const{pathname:m,botId:t}=d.current;if(m&&t&&m.includes(t)){const c=m.replace(t,i);a(c)}v(i)},[a]);return e.jsx("div",{style:{width:"100%",marginLeft:0},children:e.jsx("div",{className:"flex items-center",children:e.jsx(_,{options:x,value:p,onChange:h,showClear:!1,placeholder:"Select Bot",className:"border border-gray-300 rounded px-2 py-2"})})})}function I(){const r=u(t=>t.isSuperUser),o=u(t=>t.organizationId),a=u(t=>t.organizationList),n=l.useRef({}),{pathname:p}=B(),d=S(),{botId:x}=z();n.current.navigate=d,n.current.pathname=p,n.current.botId=x;const h=l.useMemo(()=>a?.filter(t=>t._id===o)[0],[o,a]),s=r&&a?.length>0,i=l.useCallback(async t=>{const c=t&&typeof t=="object"&&"value"in t?t.value:t;if(!c||typeof c!="string")return;const f=a.find(L=>L._id===c);if(!f)return;u.setState({organization:f,organizationId:c,selectedBotId:void 0}),sessionStorage.setItem("orgId",c);const g=await P(c),{botId:b,pathname:j,navigate:y}=n.current;g?b&&j&&y(j.replace(b,g)):y("/")},[a]),m=(a||[]).map(t=>({label:t.organizationName,value:t._id}));return s?e.jsx(_,{options:m,value:h?._id,onChange:i,showClear:!1,placeholder:"Select organization",className:"w-full border border-gray-300 rounded px-2 py-2"}):null}function $({title:r,icon:o,onClick:a}){return e.jsxs("div",{className:"w-full rounded-md bg-white shadow-[0px_1px_4px_0px_#5653534D]",children:[e.jsxs("div",{className:"hidden md:flex justify-between items-center h-[50px]",children:[e.jsx("span",{className:"text-primary uppercase font-bold text-md ps-4 py-3",children:r}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"mx-2",children:e.jsx(I,{})}),e.jsx("div",{className:"mx-2",children:e.jsx(w,{})})]}),!!o&&e.jsx("button",{onClick:a,className:"btn bg-primary h-full w-[50px] rounded-r-[4px] hover:opacity-80",children:e.jsx(o,{className:"m-auto"})})]}),e.jsxs("div",{className:"md:hidden",children:[e.jsxs("div",{className:"flex justify-between items-center h-[50px] border-b border-gray-100",children:[e.jsx("span",{className:"text-primary uppercase font-bold text-sm ps-4 flex-1",children:r}),!!o&&e.jsx("button",{onClick:a,className:"btn bg-primary h-[40px] w-[40px] rounded hover:opacity-80",children:e.jsx(o,{className:"m-auto"})})]}),e.jsxs("div",{className:"px-4 py-3 space-y-2",children:[e.jsx(I,{}),e.jsx(w,{})]})]})]})}export{$ as P};
