import{j as e,r as B,R as Y,d as q}from"./index-DeVpdhnv.js";import{F as K}from"./formik.esm-Dqna8pR8.js";import{S as J}from"./SelectBox-BgXl1Ze1.js";import{P as Q,a as y}from"./ProgressButton-BQFNqtPR.js";import{B as w}from"./Button-DvaykwvA.js";import"./Button-BslcF3aF.js";import{g as X}from"./ajax-DrXfQpOo.js";import{a as p,F as M}from"./index-eerg1Ypx.js";import{e as P,f as R,s as Z}from"./bots-BG9tb2wf.js";import{u as z}from"./index-BnTRCg5W.js";import{a as A,S as _,b as D,c as V,d as ee}from"./upload-BdFKYgN9.js";import{u as oe}from"./useSelectedBot-CPbnCiBW.js";import"./hoist-non-react-statics.cjs-CCwJLIVg.js";import"./LabelWrapper-DsqNXTsv.js";import"./TextBox-CMKgC3bd.js";import"./moment-C5S46NFB.js";function le({values:l,handleChange:s}){return e.jsxs("div",{className:"mb-4",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-thin text-primary mb-4",children:"Legal requirements"}),e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Chat Disclaimer"}),e.jsx("input",{type:"text",name:"chatDisclaimer",value:l.chatDisclaimer,onChange:s,maxLength:260,placeholder:"Provide the disclaimer to be shown in chat window",className:"border rounded-md h-12 w-full px-4"})]})}const k=({name:l,value:s,onChange:a,className:i})=>{const r=[{value:"yes",label:"Yes"},{value:"no",label:"No"}],t=g=>a(l,g==="yes");return e.jsx(J,{className:i,options:r,onChange:g=>t(g),value:s?"yes":"no",showClear:!1,placeholder:""})};function se({values:l,setFieldValue:s}){return e.jsxs("div",{className:"mb-4",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-thin text-primary mb-4",children:"Hide Livserv branding"}),e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Hide Livserv branding"}),e.jsx(k,{name:"hideLivservBranding",value:l.hideLivservBranding,onChange:(a,i)=>s(a,i),className:"border h-12 rounded-md w-full"})]})}const T=({name:l,value:s,onChange:a,onBlur:i,placeholder:r="#000000",className:t="",inputClassName:g="",colorInputClassName:n=""})=>e.jsxs("div",{className:`relative w-full ${t}`,children:[e.jsx("input",{type:"text",name:l,value:s,onChange:a,onBlur:i,className:`w-full border border-gray-300 rounded-md py-2 pl-3 pr-10 text-sm ${g}`,placeholder:r,autoComplete:"off"}),e.jsx("input",{type:"color",value:s,onChange:a,className:`absolute right-2 top-1/2 -translate-y-1/2 w-6 h-6 border-0 p-0 bg-transparent cursor-pointer ${n}`,tabIndex:-1,"aria-label":"Choose color"})]}),L=({error:l,children:s})=>l?e.jsx("div",{className:"text-red-500 text-xs",children:s}):null,ae=Y.forwardRef((l,s)=>e.jsx("input",{ref:s,...l,style:{clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1,...l.style||{}}}));function F({imageUrl:l,imageName:s,maxImageSize:a=25e4,onChange:i,bgColor:r}){const[t,g]=B.useState(null),[n,v]=B.useState(l),o=Y.useRef(null),b=r&&(n!=null&&n.endsWith(".png"))?r:"transparent",h=!!t,c=!h&&l,x=n?"Replace image":"Select image",m=f=>{try{const j=f.target.files[0];if(!j)return;const N=j.size;if(j.type.startsWith("image/")&&N<=a){g(j),v(URL.createObjectURL(j));const S=new FileReader;S.onloadend=()=>{v(S.result)},S.readAsDataURL(j),i==null||i(s,j)}else alert("Please upload valid image file and size is <= "+a/1e3+" kb"),g(null),f.target.value=""}catch(j){console.log("Error uploading the image ::",j),alert("Please select the image file"),f.target.value=""}},d=async()=>{try{await P(s),i(s,null),v(null),g(null),y(!0,"Logo deleted successfully.","success")}catch(f){console.log("Deleting logo failed. Please try again later.",f)}},u=async()=>{try{const f=await R(s,t);i(s,f),g(null),y(!0,"Logo uploaded successfully.","success")}catch(f){console.log("File upload failed. Please try again later.",f)}};return e.jsxs("div",{className:"flex flex-col gap-3",children:[n&&e.jsx("div",{className:"h-20 w-20 flex items-center justify-center",children:e.jsx("img",{src:n,alt:"headerLogo",height:20,style:{backgroundColor:b}})}),e.jsxs("div",{className:"flex flex-row gap-2",children:[e.jsx(w,{label:x,type:"secondary",onClick:()=>o.current&&o.current.click()}),e.jsx(ae,{ref:o,name:s,type:"file",onChange:m},t?t.name:""),c&&e.jsx(w,{label:"Delete",type:"secondary",onClick:d}),h&&e.jsx(Q,{color:"primary",variant:"contained",onClick:u,ml:5,children:"Upload"})]}),t&&e.jsxs("div",{className:"text-xs",children:["File Name : ",t.name," "]})]})}function re({values:l,touched:s,errors:a,handleBlur:i,setFieldValue:r}){var t,g;return e.jsxs("div",{className:"mb-8 border-y py-6",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-thin text-primary mb-4",children:"Message Bubble Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-2",children:"Show Message Bubble Logo"}),e.jsx(k,{name:"messageBubbleLogo",value:l.messageBubbleLogo,onChange:(n,v)=>r(n,v),className:"border h-12 rounded-md w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Font Size"}),e.jsx(p,{field:"fontSize",placeholder:"12px",value:l.fontSize,onChange:n=>r("fontSize",n),wrapperClassName:"border rounded-md h-12 w-full"})]})]}),e.jsx("div",{className:"text-xs uppercase tracking-wider mt-8 mb-2 text-purple-700 font-bold",children:"Visitor Bubble Settings"}),l.messageBubbleLogo&&e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Upload Visitor Logo"}),e.jsx(F,{imageUrl:(t=l.visitorMessageLogo)==null?void 0:t.url,imageName:"visitorMessageLogo",maxImageSize:5e4,onChange:r})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Background Color"}),e.jsx(T,{name:"visitorBackgroundColor",value:l.visitorBackgroundColor,onChange:n=>r("visitorBackgroundColor",n.target.value),onBlur:i,placeholder:"#ffffff",inputClassName:"h-12"}),e.jsx(L,{error:s.visitorBackgroundColor&&a.visitorBackgroundColor,children:a.visitorBackgroundColor})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Font Color"}),e.jsx(T,{name:"visitorFontColor",value:l.visitorFontColor,onChange:n=>r("visitorFontColor",n.target.value),onBlur:i,placeholder:"#000000",inputClassName:"h-12"}),s.visitorFontColor&&a.visitorFontColor&&e.jsx("p",{className:"text-xs text-red-500",children:a.visitorFontColor})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Border Color"}),e.jsx(T,{name:"visitorBorderColor",value:l.visitorBorderColor,onChange:n=>r("visitorBorderColor",n.target.value),onBlur:i,placeholder:"#000000",inputClassName:"h-12"}),e.jsx(L,{error:s.visitorBorderColor&&a.visitorBorderColor,children:a.visitorBorderColor})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Border Radius"}),e.jsx(p,{field:"visitorBubbleBorderCurve",placeholder:"border: 1px 2px 3px 4px",value:l.visitorBubbleBorderCurve,onChange:n=>r("visitorBubbleBorderCurve",n),wrapperClassName:"border rounded-md h-12 w-full"}),e.jsx(L,{error:s.visitorBubbleBorderCurve&&a.visitorBubbleBorderCurve,children:a.visitorBubbleBorderCurve})]})]}),e.jsx("div",{className:"text-xs uppercase tracking-wider mt-8 mb-2 text-purple-700 font-bold",children:"Bot Bubble Settings"}),l.messageBubbleLogo&&e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Upload Bot Logo"}),e.jsx(F,{imageUrl:(g=l.botMessageLogo)==null?void 0:g.url,imageName:"botMessageLogo",maxImageSize:5e4,onChange:r})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Background Color"}),e.jsx(T,{name:"botBackgroundColor",value:l.botBackgroundColor,onChange:n=>r("botBackgroundColor",n.target.value),onBlur:i,placeholder:"#ffffff",inputClassName:"h-12"}),e.jsx(L,{error:s.botBackgroundColor&&a.botBackgroundColor,children:a.botBackgroundColor})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Font Color"}),e.jsx(T,{name:"botFontColor",value:l.botFontColor,onChange:n=>r("botFontColor",n.target.value),onBlur:i,placeholder:"#000000",inputClassName:"h-12"}),e.jsx(L,{error:s.botFontColor&&a.botFontColor,children:a.botFontColor})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Border Color"}),e.jsx(T,{name:"botBorderColor",value:l.botBorderColor,onChange:n=>r("botBorderColor",n.target.value),onBlur:i,placeholder:"#000000",inputClassName:"h-12"}),e.jsx(L,{error:s.botBorderColor&&a.botBorderColor,children:a.botBorderColor})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Border Radius"}),e.jsx(p,{field:"botBubbleBorderCurve",placeholder:"border: 1px 2px 3px 4px",value:l.botBubbleBorderCurve,onChange:n=>r("botBubbleBorderCurve",n),wrapperClassName:"border rounded-md h-12 w-full"}),e.jsx(L,{error:s.botBubbleBorderCurve&&a.botBubbleBorderCurve,children:a.botBubbleBorderCurve})]})]})]})}function te(l){const s=z(a=>a.isSuperUser);return e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"mt-8 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 gap-6 sm:gap-8 lg:gap-12",children:[e.jsx(le,{...l}),s&&e.jsx(se,{...l})]}),e.jsx(re,{...l})]})}const ne=({values:l,setFieldValue:s})=>{const a=r=>l.launcherType===r,i=z(r=>r.isSuperUser);return e.jsxs("div",{className:"mt-12 border-y py-4",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-thin text-primary mb-4",children:"Choose Type"}),e.jsxs("div",{className:"mb-12",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-3 sm:gap-4",children:[e.jsx(w,{icon:e.jsx(A,{className:"w-6 h-6 sm:w-8 sm:h-8"}),type:"rounded",onClick:()=>s("launcherType","icon"),className:`border rounded-full w-12 h-12 sm:w-16 sm:h-16 flex items-center justify-center
                            ${a("icon")?"border-blue-500 ring-2 ring-blue-200":"border-gray-300 hover:bg-gray-100"}`}),e.jsxs("div",{className:`flex items-center w-36 sm:w-48 bg-gray-200 rounded-full shadow-md cursor-pointer
                            ${a("bar")?"border-blue-500 ring-2 ring-blue-200":"border-gray-300 hover:bg-gray-100"}`,onClick:()=>s("launcherType","bar"),children:[e.jsx("div",{className:"bg-white w-10 h-10 sm:w-16 sm:h-16 flex items-center justify-center rounded-full",children:e.jsx(A,{className:"w-6 h-6 sm:w-8 sm:h-8"})}),e.jsx("span",{className:"ml-2 sm:ml-4 text-gray-600 font-medium text-xs sm:text-base",children:"Live Chat"})]}),e.jsxs("div",{className:`flex items-center justify-end w-36 sm:w-48 bg-gray-200 rounded-full shadow-md cursor-pointer
                            ${a("expand")?"border-blue-500 ring-2 ring-blue-200":"border-gray-300 hover:bg-gray-100"}`,onClick:()=>s("launcherType","expand"),children:[e.jsx("span",{className:"mr-2 sm:mr-4 text-gray-600 font-medium text-xs sm:text-base",children:"Live Chat"}),e.jsx("div",{className:"bg-white w-10 h-10 sm:w-16 sm:h-16 flex items-center justify-center rounded-full",children:e.jsx(A,{className:"w-6 h-6 sm:w-8 sm:h-8"})})]})]}),e.jsxs("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-2 gap-6 lg:gap-12",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Spacing on corner"}),e.jsx(p,{field:"launcherSpacingCorner",placeholder:"0px",onChange:r=>s("launcherSpacingCorner",r),value:l.launcherSpacingCorner,wrapperClassName:"border rounded-md h-12 w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Spacing on Bottom "}),e.jsx(p,{field:"launcherSpacingBottom",placeholder:"0px",onChange:r=>s("launcherSpacingBottom",r),value:l.launcherSpacingBottom,wrapperClassName:"border rounded-md h-12 w-full"})]})]}),e.jsxs("div",{className:"mt-8 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8 lg:gap-12",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Button on Mobile"}),e.jsx(k,{name:"buttonOnMobile",value:l.buttonOnMobile,onChange:(r,t)=>s(r,t),className:"border h-12 rounded-md w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Show We are online bubble"}),e.jsx(k,{name:"showMinimizeButtonToolTip",value:l.showMinimizeButtonToolTip,onChange:(r,t)=>s(r,t),className:"border h-12 rounded-md w-full"})]}),i&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Activate Voice Bot"}),e.jsx(k,{name:"activateVoiceBot",value:l.activateVoiceBot,onChange:(r,t)=>s(r,t),className:"border h-12 rounded-md w-full"})]})]})]})]})},ie=[{value:"regular",label:"Regular"},{value:"remote",label:"Remote"}];function de({values:l,touched:s,errors:a,handleBlur:i,setFieldValue:r}){return e.jsxs("div",{className:"mb-8 border-y",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-thin text-primary mb-4",children:"Composer Settings"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6 sm:gap-8 mb-4",children:[e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Placeholder Text *"}),e.jsx(p,{field:"placeholder",placeholder:"Type your message...",maxLength:50,onBlur:i,onChange:t=>r&&r("placeholder",t),value:l.placeholder,wrapperClassName:"border rounded-md h-12 w-full"}),s.placeholder&&a.placeholder&&e.jsx("div",{className:"text-red-500 text-xs",children:a.placeholder})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Font source"}),e.jsx("div",{className:"flex flex-row space-x-4",children:ie.map(t=>e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"fontType",value:t.value,checked:l.fontType===t.value,onChange:g=>r&&r("fontType",g.target.value),className:"mr-2"}),t.label]},t.value))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6 sm:gap-8 mb-4",children:[e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Font name"}),e.jsx(p,{field:"fontName",placeholder:"Provide Font Name",onChange:t=>r&&r("fontName",t),value:l.fontName,wrapperClassName:"border rounded-md h-12 w-full"})]}),l.fontType==="remote"&&e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Paste Remote Font Link"}),e.jsx(p,{field:"remoteFontLink",placeholder:"Ex: https://fonts.googleapis.com",onChange:t=>r&&r("remoteFontLink",t),value:l.remoteFontLink,wrapperClassName:"border rounded-md h-12 w-full"})]})]})]})}const ce=({values:l,setFieldValue:s})=>{const a=[{value:"bottomRight",label:"Bottom Right"},{value:"bottomLeft",label:"Bottom Left"}],i=[{value:"sm",label:"Small"},{value:"md",label:"Medium"},{value:"lg",label:"Large"}],r={sm:{width:"300px",height:"400px"},md:{width:"380px",height:"500px"},lg:{width:"420px",height:"600px"}},t={sm:{width:"200px",height:"300px"},md:{width:"280px",height:"400px"},lg:{width:"320px",height:"450px"}},n=[{code:"en",name:"English",native:"English"},{code:"ar",name:"Arabic",native:"العربية"},{code:"af",name:"Afrikaans",native:"Afrikaans"},{code:"ml",name:"Malayalam",native:"മലയാളം"},{code:"kn",name:"Kannada",native:"ಕನ್ನಡ"},{code:"ta",name:"Tamil",native:"தமிழ்"},{code:"gu",name:"Gujarati",native:"Gujarati"},{code:"ig",name:"Igbo",native:"Igbo"},{code:"yo",name:"Yoruba",native:"Yoruba"}].map(o=>({label:`${o.name}`,value:o.code,full:o})),v=(o,b,h)=>{let c,x;const m=h==="dimension"?r:t;m[o]&&(c=m[o].width,x=m[o].height),b(h,o),b(`${h}Width`,c),b(`${h}Height`,x)};return e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-thin text-primary mb-4",children:" Choose Position And Size"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-2 sm:gap-4 lg:gap-8 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:" Dimension (Desktop)"}),e.jsx(M,{field:"dimension",options:i,onChange:o=>v(o,s,"dimension"),showClear:!1,value:l.dimension||"",className:"border rounded-md h-12 w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:" Position"}),e.jsx(M,{field:"windowAlign",options:a,onChange:o=>s("windowAlign",o),showClear:!1,value:l.windowAlign||"",className:"border rounded-md h-12 w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Spacing on corner"}),e.jsx(p,{field:"paddingLeft",placeholder:"0px",onChange:o=>s("paddingLeft",o),value:l.paddingLeft,wrapperClassName:"border rounded-md h-12 w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Spacing on Bottom"}),e.jsx(p,{field:"paddingBottom",placeholder:"0px",onChange:o=>s("paddingBottom",o),value:l.paddingBottom,wrapperClassName:"border rounded-md h-12 w-full"})]})]}),e.jsxs("div",{className:"mt-8 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8 lg:gap-12",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:" Dimension (Mobile)"}),e.jsx(M,{field:"mobileDimension",options:i,onChange:o=>v(o,s,"mobileDimension"),showClear:!1,value:l.mobileDimension||"",className:"border rounded-md h-12 w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Desktop proactive window"}),e.jsx(k,{name:"autoLaunch",value:l.autoLaunch,onChange:(o,b)=>s(o,b),className:"border h-12 rounded-md w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Mobile proactive window"}),e.jsx(k,{name:"mobileAutoLaunch",value:l.mobileAutoLaunch,onChange:(o,b)=>s(o,b),className:"border h-12 rounded-md w-full"})]})]}),e.jsxs("div",{className:"mt-8 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8 lg:gap-12",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Choose Language"}),e.jsx(M,{field:"translateLanguages",options:n,onChange:o=>{const b=n.filter(h=>o.includes(h.value)).map(h=>h.full);s("translateLanguages",b)},showClear:!1,value:(l.translateLanguages||[]).map(o=>o.code),className:"border rounded-md w-full h-12",multiple:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Select default languages"}),e.jsx(M,{field:"defaultLanguage",options:n,onChange:o=>{const b=n.filter(h=>o.includes(h.value)).map(h=>h.full);s("defaultLanguage",b)},disabled:!l.multiLanguageChat||l.multiLanguageChat==="No",showClear:!1,value:(l.defaultLanguage||[]).map(o=>o.code),className:"border h-12 rounded-md w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:" Enable Multilingual Support?"}),e.jsxs("div",{className:"flex flex-row items-center space-x-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"multiLanguageChat",value:"true",checked:l.multiLanguageChat===!0,onChange:()=>s("multiLanguageChat",!0),className:"mr-2"})," ","Yes"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"multiLanguageChat",value:"false",checked:l.multiLanguageChat===!1,onChange:()=>s("multiLanguageChat",!1),className:"mr-2"})," ","No"]})]})]})]})]})};function me({values:l,setFieldValue:s}){return e.jsxs("div",{className:"mb-8  border-y",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-thin text-primary mb-4",children:"Choose Position And Size"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8 lg:gap-12 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Background Color *"}),e.jsx(p,{field:"bgColor",placeholder:"#000000",onChange:a=>s("bgColor",a),value:l.bgColor,wrapperClassName:"border rounded-md h-12 w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Font Color *"}),e.jsx(p,{field:"fontColor",placeholder:"#000000",onChange:a=>s("fontColor",a),value:l.fontColor,wrapperClassName:"border rounded-md h-12 w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Font Size"}),e.jsx(p,{field:"fontSize",placeholder:"16px",onChange:a=>s("fontSize",a),value:l.fontSize,wrapperClassName:"border rounded-md h-12 w-full"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8 lg:gap-12 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Chat Window Title *"}),e.jsx(p,{field:"titleText",placeholder:"Provide your chat window title",onChange:a=>s("titleText",a),value:l.titleText,wrapperClassName:"border rounded-md h-12 w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Chat Window Header Padding"}),e.jsx(p,{field:"headerPadding",placeholder:"padding: 2px 5px 2px 5px",onChange:a=>s("headerPadding",a),value:l.headerPadding,wrapperClassName:"border rounded-md h-12 w-full"})]})]})]})}const G=200*1024,ge=({values:l,setFieldValue:s})=>{const[a,i]=B.useState(null),[r,t]=B.useState(null),g=B.useRef(null),n=c=>{var x,m,d;try{const u=(x=c.target.files)==null?void 0:x[0];if(!u)return;const f=u.size;u.type.startsWith("image/")&&f<=G?(s("botLogo",u),i(URL.createObjectURL(u)),t(u)):((m=y)==null||m(!0,"Please upload valid image file and size is <= "+G/1e3+" kb","error"),s("botLogo",null),i(null),t(null),c.target.value="")}catch(u){console.log("Error selecting the image ::",u),(d=y)==null||d(!0,"Please select the image file","error"),s("botLogo",null),i(null),t(null),c.target.value=""}},v=async(c,x)=>{try{const m=document.createElement("div");document.body.appendChild(m);const d=q.createRoot(m);d.render(c),setTimeout(()=>{const u=m.querySelector("svg");if(u){const f=u.outerHTML,j=new Blob([f],{type:"image/svg+xml"}),N=new File([j],`bot-icon-${x+1}.svg`,{type:"image/svg+xml"});s("botLogo",N),i(URL.createObjectURL(N)),t(N)}else console.log("SVG element not found.");d.unmount(),document.body.removeChild(m)},100)}catch(m){console.log("Error processing SVG icon.",m)}},o=async()=>{var c,x;try{if(!r)return;let m=r;R&&(m=await R("botChatButton",r)),s("botLogo",m),(c=y)==null||c(!0,"Logo uploaded successfully.","success"),t(null)}catch(m){console.log("File upload failed. Please try again later.",m),(x=y)==null||x(!0,"File upload failed. Please try again later.","error")}},b=async()=>{var c,x;try{P&&await P("botLogo"),s("botLogo",null),i(null),t(null),(c=y)==null||c(!0,"Logo deleted successfully.","success")}catch(m){console.log("Deleting logo failed. Please try again later.",m),(x=y)==null||x(!0,"Deleting logo failed. Please try again later.","error")}},h=[e.jsx(A,{},"default"),e.jsx(A,{},"v1"),e.jsx(D,{},"v2"),e.jsx(V,{},"v3"),e.jsx(ee,{},"v4")];return e.jsxs("div",{className:"mt-12 border-y py-4",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-thin text-primary mb-4",children:"Chat Launcher Setting"}),e.jsxs("div",{className:"mb-12",children:[e.jsx("label",{className:"block text-sm text-gray-600 my-4",children:"Choose Icon"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 sm:gap-4",children:[h.map((c,x)=>e.jsx(w,{icon:c,type:"rounded",className:"border border-gray-300 hover:bg-gray-100 p-2 sm:p-4 rounded-full w-12 h-12 sm:w-16 sm:h-16 flex items-center justify-center",onClick:()=>v(c,x)},x)),e.jsxs("span",{className:"relative",children:[e.jsx(w,{icon:a?e.jsx("img",{src:a,alt:"Bot Icon Preview",className:"w-10 h-10 sm:w-12 sm:h-12 rounded-full object-cover"}):e.jsx(_,{}),type:"rounded",className:"border border-gray-300 text-primary p-2 sm:p-4 rounded-full w-12 h-12 sm:w-16 sm:h-16 flex items-center justify-center",onClick:()=>{var c;return(c=g.current)==null?void 0:c.click()}}),e.jsx("input",{ref:g,type:"file",accept:"image/*",style:{display:"none"},onChange:n})]})]}),e.jsx("div",{className:"flex gap-2 mt-5",children:r&&e.jsxs(e.Fragment,{children:[e.jsx(w,{label:"Upload",type:"primary",onClick:o}),e.jsx(w,{label:"Delete",type:"secondary",onClick:b})]})}),r&&e.jsxs("div",{className:"text-xs mt-2",children:["File Name : ",r.name]})]}),e.jsxs("div",{className:"mt-8 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8 lg:gap-12",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Header Logo Margin"}),e.jsx(p,{field:"headerLogoMargin",placeholder:"0px",onChange:c=>s("headerLogoMargin",c),value:l==null?void 0:l.headerLogoMargin,wrapperClassName:"border rounded-md h-12 w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Width"}),e.jsx(p,{field:"logoWidth",placeholder:"0px",onChange:c=>s("logoWidth",c),value:l==null?void 0:l.logoWidth,wrapperClassName:"border rounded-md h-12 w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Height"}),e.jsx(p,{field:"logoHeight",placeholder:"0px",onChange:c=>s("logoHeight",c),value:l==null?void 0:l.logoHeight,wrapperClassName:"border rounded-md h-12 w-full"})]})]})]})};async function xe(l){return await X(`/organization/organization-props/${l}`,{},{noAuth:!0})}const C={BOT:"bot",ADVANCE:"advance"};function Me(){var c,x,m;const[l,s]=oe(),[a,i]=B.useState(C.BOT),r=z(d=>{var u;return(u=d.organization)==null?void 0:u.organizationPropId}),[t,g]=B.useState(null);if(B.useEffect(()=>{r&&(async()=>{try{const d=await xe(r);g(d)}catch(d){g(null),console.error("Failed to fetch organization props:",d)}})()},[r]),!s)return null;const{botName:n,botDesign:v={}}=s,o=v,b={bgColor:(o==null?void 0:o.backgroundColor)||"#484a49",botBorderColor:(o==null?void 0:o.botBorderColor)||"#484a49",botBackgroundColor:(o==null?void 0:o.botBackgroundColor)||"#dfd9df",botFontColor:(o==null?void 0:o.botFontColor)||"#000000",visitorBorderColor:(o==null?void 0:o.visitorBorderColor)||"#000000",visitorBackgroundColor:(o==null?void 0:o.visitorBackgroundColor)||"#ffffff",visitorFontColor:(o==null?void 0:o.visitorFontColor)||"#000000",fontType:(o==null?void 0:o.fontType)||"normal-font",windowAlign:(o==null?void 0:o.windowAlign)||"bottomRight",fontColor:(o==null?void 0:o.textColor)||"#484a49",titleText:n,placeholder:"Type your message...",launcherType:"bar",messageBubbleLogo:!0,botLogo:(o==null?void 0:o.botLogo)||{},visitorMessageLogo:(o==null?void 0:o.visitorMessageLogo)||{},botMessageLogo:(o==null?void 0:o.botMessageLogo)||{},botChatButton:(o==null?void 0:o.botChatButton)||{},hideLivservBranding:(o==null?void 0:o.hideLivservBranding)||!1,showMinimizeButtonToolTip:(o==null?void 0:o.showMinimizeButtonToolTip)||!0,...o};t&&(b.domainSettings={domain:(c=t==null?void 0:t.consoleSettings)==null?void 0:c.domain,website:(x=t==null?void 0:t.consoleSettings)==null?void 0:x.website,displayName:(m=t==null?void 0:t.consoleSettings)==null?void 0:m.displayName});const h=async(d,{setErrors:u,setStatus:f,setSubmitting:j})=>{var N,S,U,H,O,E,I,$;try{((N=d.botChatButton)==null?void 0:N.name)!==((S=o.botChatButton)==null?void 0:S.name)&&(d.botChatButton=o.botChatButton),((U=d.botLogo)==null?void 0:U.name)!==((H=o.botLogo)==null?void 0:H.name)&&(d.botLogo=o.botLogo),((O=d.visitorMessageLogo)==null?void 0:O.name)!==((E=o.visitorMessageLogo)==null?void 0:E.name)&&(d.visitorMessageLogo=o.visitorMessageLogo),((I=d.botMessageLogo)==null?void 0:I.name)!==(($=o.botMessageLogo)==null?void 0:$.name)&&(d.botMessageLogo=o.botMessageLogo),await Z(l,d),f({success:!1}),j(!1)}catch(W){console.error(W),f({success:!1}),u({submit:W.message}),j(!1)}};return e.jsx(e.Fragment,{children:e.jsx(K,{initialValues:b,validationSchema:void 0,onSubmit:h,children:d=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-full h-full bg-white rounded-lg shadow-lg p-14",children:[e.jsxs("div",{className:"flex items-center space-x-4 border-b pb-4 mb-4",children:[e.jsxs("div",{className:"relative flex items-center justify-center",children:[e.jsx("button",{className:`px-4 py-2 text-black ${a===C.BOT?"text-orange-600 bg-white border border-[#FB9F37] rounded-md shadow-md transition":""}`,onClick:()=>i(C.BOT),children:"Bot Setting"}),a===C.BOT&&e.jsx("div",{className:"absolute bottom-[-8px] w-4 h-4 bg-white border-l border-b border-[#FB9F37]",style:{transform:"rotate(-46deg)"}})]}),e.jsxs("div",{className:"relative flex items-center justify-center",children:[e.jsx("button",{className:`px-4 py-2 text-black ${a===C.ADVANCE?"text-orange-600 bg-white border border-[#FB9F37] rounded-md shadow-md transition":""}`,onClick:()=>i(C.ADVANCE),children:"Advance Setting"}),a===C.ADVANCE&&e.jsx("div",{className:"absolute bottom-[-8px] w-4 h-4 bg-white border-l border-b border-[#FB9F37]",style:{transform:"rotate(-46deg)"}})]})]}),e.jsxs("form",{noValidate:!0,onSubmit:d.handleSubmit,children:[a===C.BOT&&e.jsxs(e.Fragment,{children:[e.jsx(ce,{...d}),e.jsx(ge,{...d}),e.jsx(ne,{...d}),e.jsx(me,{...d}),e.jsx(de,{...d})]}),a===C.ADVANCE&&e.jsx(te,{...d})]}),e.jsx("div",{className:"flex mt-12 justify-end",children:e.jsx(w,{label:"Save Changes",onClick:()=>d.handleSubmit()})})]})})})})}export{Me as default};
