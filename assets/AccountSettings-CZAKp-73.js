import{c as C,r as d,j as s,h as b}from"./AlertSnackbar-C1aUMYU1.js";import{F as k}from"./formik.esm-C1XsncZ4.js";import{c as S,a as w,b as z}from"./index.esm-B4SOufDi.js";import{s as $,a as q}from"./password-strength-CoL6PLjI.js";import{b as x,l as p}from"./svg-icons-s6gHrtH2.js";import{u as F}from"./resetPassword-CLcDo8Mt.js";import"./ajax-C92vMgMI.js";import"./env-CmL5wTXD.js";const E=()=>{const h=C(e=>e.organizationId),[l,j]=d.useState(),[c,g]=d.useState(!1),[i,y]=d.useState(!1),[m,N]=d.useState(!1),f=e=>{const a=$(e);j(q(a))};d.useEffect(()=>{f("")},[]);const v=async(e,{setErrors:a,setStatus:t,setSubmitting:n,resetForm:o})=>{try{await F(e.currentPassword,e.newPassword,h),t({success:!0}),n(!1),b(!0,"Password updated","success"),o()}catch(r){t({success:!1}),a({submit:r.message}),n(!1),b(!0,r.message,"error")}};return s.jsx(k,{initialValues:{currentPassword:"",newPassword:"",confirmPassword:""},validationSchema:S().shape({currentPassword:w().max(30).required("Current Password is required"),newPassword:w().max(30).required("New Password is required"),confirmPassword:w().oneOf([z("newPassword")],"New Password and Confirm Password must match").max(30).required("Confirm Password is required")}),onSubmit:v,children:({errors:e,handleBlur:a,handleChange:t,handleSubmit:n,isSubmitting:o,touched:r,values:u})=>s.jsxs("form",{onSubmit:n,className:"max-w-md mx-auto",children:[s.jsx("div",{className:"text-2xl font-semibold mb-6",children:"Update Admin Password"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"current-password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{id:"current-password",name:"currentPassword",type:m?"text":"password",autoComplete:"off",value:u.currentPassword,onChange:t,onBlur:a,placeholder:"******",className:`w-full px-3 py-2 pr-10 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${r.currentPassword&&e.currentPassword?"border-red-500":"border-gray-300"}`}),s.jsx("button",{type:"button",onClick:()=>N(!m),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:m?s.jsx(x,{size:20}):s.jsx(p,{size:20})})]}),r.currentPassword&&e.currentPassword&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:e.currentPassword})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"new-password",className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{id:"new-password",name:"newPassword",type:c?"text":"password",autoComplete:"off",value:u.newPassword,onChange:P=>{t(P),f(P.target.value)},onBlur:a,placeholder:"******",className:`w-full px-3 py-2 pr-10 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${r.newPassword&&e.newPassword?"border-red-500":"border-gray-300"}`}),s.jsx("button",{type:"button",onClick:()=>g(!c),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:c?s.jsx(x,{size:20}):s.jsx(p,{size:20})})]}),r.newPassword&&e.newPassword&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:e.newPassword})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{id:"confirm-password",name:"confirmPassword",type:i?"text":"password",autoComplete:"off",value:u.confirmPassword,onChange:t,onBlur:a,placeholder:"******",className:`w-full px-3 py-2 pr-10 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${r.confirmPassword&&e.confirmPassword?"border-red-500":"border-gray-300"}`}),s.jsx("button",{type:"button",onClick:()=>y(!i),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:i?s.jsx(x,{size:20}):s.jsx(p,{size:20})})]}),r.confirmPassword&&e.confirmPassword&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:e.confirmPassword})]}),e.submit&&s.jsx("div",{className:"text-sm text-red-600",children:e.submit}),l&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"h-2 w-24 rounded-full",style:{backgroundColor:l.color}}),s.jsx("span",{className:"text-xs text-gray-600",children:l.label})]}),s.jsx("button",{type:"submit",disabled:o,className:`w-full py-2.5 px-4 rounded-md font-medium text-white transition-colors ${o?"bg-blue-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,children:o?"Updating...":"Update Password"})]})]})})},D=()=>s.jsx("div",{className:"p-6",children:s.jsx(E,{})});export{D as default};
