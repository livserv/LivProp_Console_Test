import{R as P,j as E}from"./index-CrvO-MG2.js";import{c as w,m as T,n as K}from"./ajax-LTZZf17G.js";import{L as M,T as B,S as R}from"./TextBox-BAS1ra7T.js";const $=P.createContext({}),k=$.Provider;function F(u,r){const{valueFieldProp:o="value",hasErrorFieldProp:x="hasError",errorMessageFieldProp:s="errorMessage",changeHandler:t,defaultProps:c}={};return function(n){const e=P.useContext($),{[o]:i,onChange:h,...p}=n,a=p,d=P.useRef({field:n.field,onChange:h,form:e,changeHandler:t});d.current={field:n.field,onChange:h,form:e,changeHandler:t};const y=P.useCallback((f,m,...b)=>{const{form:g,onChange:v,field:j,changeHandler:C}=d.current;typeof C=="function"&&(f=C(f,m,...b),m=j||m),j&&(g!=null&&g.onChange)&&g.onChange(f,j,...b),v==null||v(f,m,...b)},[]);if(e!=null&&e.getProps&&n.field){const{[o]:f=i,hasError:m,isTouched:b,errorMessage:g,middleware:v}=e.getProps(n,r);d.current.middleware=v,a[o]=P.useMemo(()=>{const{middleware:j,field:C}=d.current;return j?j(f,C,!1):f},[f]),m&&b&&(a[x]=m),g&&b&&(a[s]=g)}else a.value=i;return E.jsx(u,{...c,...a,onChange:y})}}function S({label:u,iconLeft:r,iconRight:o,className:x,wrapperClassName:s,args:t,field:c,onChange:l,value:n,...e}){const i=E.jsx("textarea",{className:w("border-0 w-full h-full rounded-[8px] mt-[-5px] bg-transparent outline-none px-4 placeholder:text-pBlack placeholder:text-sm",x),onChange:h=>l==null?void 0:l(h.currentTarget.value,c,t),...e,children:n});return E.jsx(M,{label:u,iconLeft:r,iconRight:o,className:s,children:i})}function H(u,r){const o={hasError:!1};if(!u)return o;try{u.validateSync(r,{abortEarly:!1})}catch(x){const s=x.inner;o.hasError=!0,o.errors=s.reduce((t,c)=>(t[c.path]=c.message,t),{})}return o}function L(u){const r=P.useRef({props:u,touched:{}});r.current.props=u,r.current.errors=u.errors||r.current.errors;const{value:o}=u,x=P.useMemo(()=>({onChange:(s,t,c)=>{const{field:l,args:n,middleware:e,onChange:i,validator:h}=r.current.props,p=l?`${l}.${t}`:t,a=T(o,p,e?e(s,t,!0):s),d=H(h,a);r.current.errors=d,r.current.touched[t]=!0,i(a,l,{fieldArgs:c,field:t,args:n,errors:d})},getProps:(s,t)=>{var a,d;const{field:c,middleware:l}=r.current.props,{valueFieldProp:n="value"}=t||{},{field:e,[n]:i}=s;if(!e)return{[n]:i};const h=c?`${c}.${e}`:e,p=(d=(a=r.current.errors)==null?void 0:a.errors)==null?void 0:d[e];return{[n]:K(o,h),hasError:!!p,isTouched:r.current.touched[e],middleware:l,errorMessage:p}},setValue:(s,t)=>{if(!s||typeof s!="object")return;const{field:c,args:l,middleware:n,onChange:e,validator:i}=r.current.props,h=Object.keys(s);if(!h.length)return;const p=h.reduce((d,y)=>{const f=s[y],m=c?`${c}.${y}`:y;return T(d,m,n?n(f,y,!0):f)},o),a=i==null?void 0:i.validate(p);r.current.errors=a,e(p,c,{fieldArgs:t,args:l,errors:a})},getErrors:()=>r.current.errors}),[o]);return E.jsx(k,{value:x,children:u.children})}const O=F(R),G=F(S),q=F(B);export{L as F,q as a,O as b,F as c,G as d};
