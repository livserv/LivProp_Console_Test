import{n as B,l as h,p as f,r as b}from"./ajax-CVEl0eD2.js";import{b as r,e as d}from"./index-DNgbtrVq.js";async function x(t){const{organization:{websiteUrl:n,_id:e}}=r.getState(),o={organizationId:e,websiteUrl:n,botName:t,botDesign:{visitorMessageLogo:{name:"",url:""},botMessageLogo:{name:"",url:""},botChatButton:{name:"",url:""},botLogo:{name:"",url:""},backgroundColor:"#e7a654",textColor:"#ffffff",dimensions:{heightInPixel:"500px",heightInPercent:"70%",widthInPixel:"350px",widthInPercent:"25%"},botLogoDimensions:{heightInPixel:"30px",heightInPercent:"100%",widthInPixel:"30px",widthInPercent:"100%"}}},s=await f(`/bot/${e}`,o);g(s,!0)}async function u(t,n,e=!0){const{organizationId:o}=r.getState();if(!o||!t)throw new Error("Bot details not found");const s=await h(`/bot/${o}/${t}`,n);return g(s,e),s}function m(t,n){return u(t,{botName:n})}async function $(t){const{organizationId:n}=r.getState(),{selectedBotId:e}=d.getState(),o=await b(`/bot/${n}/${e}/update-logo/${t}`,null);return p(e,o),o[`botDesign.${t}`]}async function D(t){var s;const{organizationId:n,selectedBotId:e}=r.getState();if(!n||!t)throw new Error("Bot details not found");const{deleted:o}=await b(`/bot/${n}/${t}`,null);if(o){let{botsMap:a,botsList:i}=d.getState();a={...a},i=[...i],delete a[o];const c=i.findIndex(S=>S._id===o);c>=0&&i.splice(c,1);const l={botsMap:a,botsList:i};e===o&&(l.selectedBotId=((s=i[0])==null?void 0:s._id)||null),d.setState(l)}return!!o}function P(t,n){let{botDesign:e}=r.getState();return e={...e,...n},u(t,{botDesign:e})}function L(t,n){const{botsMap:e}=r.getState(),s={...((e==null?void 0:e[t])||{}).botSettings,...n};return u(t,{botSettings:s})}async function z(t,n){var c;const{organizationId:e}=r.getState(),{selectedBotId:o}=d.getState(),s=new FormData;s.append("file",n);const a=await f(`/bot/${e}/${o}/update-logo/${t}`,s);return p(o,a),((c=(a.botDesign||{})[t])==null?void 0:c.url)||""}function g(t,n=!0){const e=t._id;let{botsMap:o,botsList:s}=d.getState();o={...o,[e]:t},s=[...s];const a=s.findIndex(c=>c._id===e);a>=0?s[a]=t:s.push(t);const i={botsMap:o,botsList:s};n&&(i.selectedBotId=e),d.setState(i)}function p(t,n){if(!t)return;const{botsMap:e}=r.getState(),o=e[t];if(!o)return;const s=Object.keys(n).reduce((a,i)=>(B(a,i,n[i]),a),{...o});g(s)}export{u as a,m as b,x as c,L as d,$ as e,z as f,D as r,P as s,p as u};
